{"version":3,"sources":["utilities.ts","serviceWorker.ts","models/IMessage.ts","comp/Firma.tsx","comp/Calendario.tsx","comp/LessonsCalendar.tsx","comp/Footer.tsx","comp/SceltaCorso.tsx","comp/SceltaClasse.tsx","comp/LogoCorso.tsx","comp/CodiceAccesso.tsx","comp/Main.tsx","models/Cipher.ts","comp/ForgotPassword.tsx","comp/admin/LoginTutor.tsx","models/IAdmin.ts","comp/AskConferma.tsx","comp/admin/StageSwitch.tsx","comp/admin/StudentsList.tsx","comp/admin/AddNewStudent.tsx","comp/admin/PresenzeTable.tsx","comp/admin/StudentStage.tsx","comp/admin/StudentDetails.tsx","comp/admin/DocentiList.tsx","comp/admin/AddNewDocente.tsx","comp/admin/LezioniDocenteTable.tsx","comp/admin/DocenteDetails.tsx","comp/admin/EditDocente.tsx","comp/admin/EditStudente.tsx","comp/admin/StudentsImport.tsx","comp/admin/MaterieList.tsx","comp/ImageScale.tsx","comp/admin/ConfigForm.tsx","comp/admin/ConfigCalendar.tsx","comp/Page404.tsx","comp/admin/EditCodiceFirma.tsx","comp/admin/Home.tsx","comp/admin/Dashboard.tsx","comp/superadmin/CorsiList.tsx","comp/superadmin/AddNewCorso.tsx","comp/superadmin/LoginAdmin.tsx","comp/superadmin/EditCorso.tsx","comp/superadmin/TutorList.tsx","comp/superadmin/AddNewTutor.tsx","comp/superadmin/EditTutor.tsx","comp/superadmin/SuperDashboard.tsx","comp/firmacasa/CodiceSegreto.tsx","models/IStudent.ts","comp/firmacasa/FirmaCasa.tsx","comp/firmacasa/DashboardCasa.tsx","comp/Docs.tsx","comp/studente/LoginStudent.tsx","comp/studente/AddOreStage.tsx","comp/studente/StageList.tsx","comp/studente/Home.tsx","comp/studente/StudentDashboard.tsx","index.tsx"],"names":["siteUrl","logoUrl","avocadoUrl","adminRoute","superAdminRoute","studentRoute","Digits2","n","validateTime","time","test","formattaData","d","convert","from","split","date","Date","Number","getFullYear","getMonth","getDate","formatItalian","capitalizeFirst","name","splitStr","capitalizeQuote","toLowerCase","i","length","charAt","toUpperCase","substring","join","mountLogin","document","getElementsByTagName","classList","add","unmountLogin","remove","imageFileToBase64","file","readImageFile","a","Promise","resolve","reject","reader","FileReader","onload","e","base64Img","Buffer","target","result","toString","onerror","readAsArrayBuffer","resizePopup","mainBlock","getElementById","popup","width","clientWidth","style","checkEnter","callback","keyCode","convertFromUTC","localDate","getHours","getMinutes","getDateTime","clearDate","replace","converted","window","addEventListener","Boolean","location","hostname","match","genericError","title","icon","iconColor","message","Firma","props","maxLength","componentDidMount","id","parseInt","sessionStorage","getItem","Axios","get","then","response","corso","data","setState","changeCode","event","code","value","tryToLog","switchInput","idCorso","anno","output","showMessagePopup","lezione","post","idLezione","catch","_","disable","input","setAttribute","removeAttribute","focus","setTimeout","state","cambiaCorso","removeItem","routerHistory","push","switchFocus","this","type","spin","className","autoFocus","onChange","onFocus","onBlur","nome","indicator","height","placement","onClick","color","React","PureComponent","Calendario","calendarId","plugins","googleCalendarPlugin","dayGridPlugin","events","googleCalendarId","googleCalendarApiKey","defaultView","fixedWeekCount","firstDay","themeSystem","eventTimeFormat","hour","minute","meridiem","buttonText","today","header","right","locale","eventClick","info","jsEvent","preventDefault","Modal","maskClosable","centered","content","fontSize","start","end","extendedProps","LessonsCalendar","classe","calendar","idCalendario","Footer","inMenu","href","position","role","aria-label","SceltaCorso","corsi","componentWillUnmount","chooseCorso","setItem","map","c","src","logo","alt","SceltaClasse","chooseClasse","Component","LogoCorso","catchNull","forLogin","CodiceAccesso","cambiaCodice","codice","cambiaScelta","inviaCodice","trim","error","onSubmit","Main","focusInput","confermaTutor","history","activeClassName","exact","to","path","render","Cipher","maximum","msg","shift","finalMessage","letter","charInt","charCodeAt","newInt","String","fromCharCode","ForgotPassword","cancelRecover","currentStep","email","newPassword","newPasswordConfirm","idUtente","loading","closeModal","changeMail","changePassword","pass","changePasswordConfirm","increaseStep","decreaseStep","switchLoading","confirmFirstStep","forStudent","url","isNaN","confirmSecondStep","savePassword","password","encode","success","onOk","show","Step","Steps","steps","disabled","htmlType","visible","onCancel","footer","size","current","item","key","LoginTutor","changeInputName","adminName","changeInputPassword","psw","adminPsw","tryLogin","username","obj","isAdmin","JSON","stringify","switchForgot","showForgot","askPassword","callType","body","preAction","customText","tutor","parse","admin","cipher","sendForm","authAdmin","idAdmin","idAmministratore","authCoordinatore","idCoordinatore","put","modal","confirm","marginLeft","ref","r","onKeyUp","destroy","okText","cancelText","StageSwitch","toggleLoading","status","stage","switchStage","checked","StudentsList","students","showConfirm","student","cognome","d2","format","okType","theme","dataRitiro","studente","ritirato","idStudente","stu","currentList","indexOf","changeSelection","newList","selection","find","s","filter","concat","selectAll","selectionList","annoFrequentazione","showHideModal","confirmModal","moveStudents","select","studenti","allRetired","group","forEach","sortbyId","b","promuoviStudent","changeFilter","filterStudentsByFilter","Panel","Collapse","TabPane","Tabs","groups","promosso","sort","ritirati","defaultActiveKey","tab","g","checkedAll","tabTitle","element","bg","maxWidth","cf","frequenza","bordered","AddNewStudent","changeNome","changeCognome","changeEmail","changeData","dataNascita","changeAnnoScolastico","annoS","annoScolastico","changeCF","CF","aggiungiStudente","PresenzeTable","presenze","p","ingresso","uscita","changeEntrata","entrata","idPresenza","editingList","changeUscita","startTimeEdit","animateTds","td1","td2","confirmEdit","presenza","newPresenze","reloadTotali","getCategorie","categorie","annullaModifica","Option","Select","presences","defaultValue","showSearch","l","presenzaEdit","pre","moment","minuteStep","placeholder","StudentStage","oreList","o","oraInizio","oraFine","toggleModal","Object","values","filename","argomento","totaleRelativo","StudentDetails","params","oreTotali","loadTotali","totPresenze","downloadQR","pngUrl","toDataURL","downloadLink","createElement","download","appendChild","click","removeChild","toggleStage","showStage","perc","Math","round","percent","strokeColor","suffix","decimalSeparator","groupSeparator","imageSettings","excavate","DocentiList","docenti","switchList","showAll","showDeleteConfirm","docente","ritiraOAnnulla","idDocente","backRetire","doc","isInCorso","docs","transform","monteOre","orePrimo","oreSecondo","AddNewDocente","materie","aggiungiDocente","corsiSel","materieSel","tenere","insegnare","m","idMateria","switchMateria","materiaId","switchCorso","corsoId","f","classname","LezioniDocenteTable","canEdit","editPresenza","DocenteDetails","getQRCode","display","alignItems","justifyContent","EditDocente","modificaDocente","EditStudente","modificaStudente","fields","label","field","StudentsImport","splitCSV","renderOptions","rows","fileContent","changeVarPos","varName","readFile","showImportPreview","readAsText","list","cells","addList","hidePopup","confirmImport","flexDirection","accept","beforeUpload","MaterieList","showModal","nomeMateria","hideEditModal","showEditModal","nomeEdit","materiaEdit","materia","aggiungiMateria","modificaMateria","changeNomeEdit","ImageScale","scaleImage","scalable","scaled","coords","firstclass","ConfigForm","actualId","changeID","saveConfig","calendario","eventiScartati","warning","inizio","fine","summary","ConfigCalendar","showHelp","top","marginTop","rel","getElementsByClassName","scrollTo","Page404","goTo","EditCodiceFirma","requestCodeChange","Home","coordinatore","noLezione1","lezioneCorrente1","noLezione2","lezioneCorrente2","getContenuto","titolo","oraIngresso","codiceCorso","Dashboard","session","routeProps","CorsiList","luogo","AddNewCorso","changeLuogo","aggiungiCorso","convertImage","uploadButton","marginBottom","listType","showUploadList","LoginAdmin","isSuperAdmin","EditCorso","modificaCorso","TutorList","t","AddNewTutor","listaCorsi","changeCorso","isExistingCorso","aggiungiTutor","EditTutor","modificaTutor","selected","SuperDashboard","CodiceSegreto","changeCodice","headers","isStudent","areStudent","FirmaCasa","caricaLezione","inviaFirma","selectedStudente","firmaDocente","scegliStudente","temp","noLezione","firmato","DashboardCasa","Docs","scrollToIndex","block","scrollIntoView","LoginStudent","userEmail","userCode","tryAccess","isAccessStudent","AddOreStage","changeInizio","console","log","changeFine","changeArgomento","addStage","currentDate","reloadStage","annullaAggiunta","StageList","loadOre","isActive","addNew","ore","totale","totaleOre","toggleAdd","floor","EPSILON","StudentDashboard","createHashHistory","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7277dec5.chunk.js","sourcesContent":["export const siteUrl = \"https://registrofitstic.azurewebsites.net\"\r\nexport const logoUrl = \"fitstic_logo.png\"\r\nexport const avocadoUrl = \"avocadoLogo.png\"\r\n\r\nexport const adminRoute = \"/adminpanel\"\r\nexport const superAdminRoute = \"/superpanel\"\r\nexport const docentiRoute = \"/docentipanel\"\r\nexport const studentRoute = \"/studentipanel\"\r\n\r\nexport const Digits2 = (n: number) => {\r\n    return n < 10 ? \"0\" + n : n\r\n}\r\n\r\nexport const validateTime = (time: string) => {\r\n    return /^([0-1]?[0-9]|2[0-4]):([0-5][0-9])$/.test(time)\r\n}\r\n\r\nexport const formattaData = (d: string, convert?: boolean) => {\r\n    let from = d.split(/[/-]/g),\r\n    date = convert ? new Date(Number(from[2]), Number(from[1]) - 1, Number(from[0])) : new Date(d)\r\n\r\n    return `${date.getFullYear()}-${Digits2(date.getMonth() + 1)}-${Digits2(date.getDate())}`\r\n}\r\n\r\nexport const formatItalian = (d: string) => {\r\n    let date = new Date(d)\r\n\r\n    return `${Digits2(date.getDate())}-${Digits2(date.getMonth() + 1)}-${date.getFullYear()}` \r\n}\r\n\r\nexport const capitalizeFirst = (name: string) => {\r\n    let splitStr = capitalizeQuote(name.toLowerCase()).split(\" \")\r\n\r\n    for (let i = 0; i < splitStr.length; i++) {\r\n        splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1) \r\n    }\r\n   \r\n    return splitStr.join(\" \")\r\n}\r\n\r\nexport const capitalizeQuote = (name: string) => {\r\n    let splitStr = name.toLowerCase().split(\"'\")\r\n\r\n    for (let i = 0; i < splitStr.length; i++) {\r\n        splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1)\r\n    }\r\n   \r\n    return splitStr.join(\"'\")\r\n}\r\n\r\nexport const mountLogin = () => {\r\n    let body = document.getElementsByTagName(\"body\")[0]\r\n\r\n    body.classList.add(\"login\")\r\n}\r\nexport const unmountLogin = () => {\r\n    let body = document.getElementsByTagName(\"body\")[0]\r\n\r\n    body.classList.remove(\"login\")\r\n}\r\n\r\nexport const imageFileToBase64 = async (file: any) => {\r\n    function readImageFile(file: any){\r\n        return new Promise((resolve, reject) => {\r\n            let reader = new FileReader()\r\n        \r\n            reader.onload = e => {\r\n                let base64Img = new Buffer(e.target.result as any, \"binary\").toString(\"base64\"),\r\n                src = \"data:image/png;base64,\" + base64Img\r\n\r\n                resolve(src)\r\n            }\r\n        \r\n            reader.onerror = reject\r\n        \r\n            reader.readAsArrayBuffer(file)\r\n        })     \r\n    }\r\n\r\n    return readImageFile(file)\r\n}\r\n\r\nexport const resizePopup = () => {\r\n    let mainBlock = document.getElementById(\"mainBlock\"),\r\n    popup = document.getElementById(\"popup\"),\r\n    width = mainBlock ? mainBlock.clientWidth : 0\r\n\r\n    if(mainBlock && popup)\r\n        popup.style.width = width + \"px\"\r\n}\r\n\r\nexport const checkEnter = (e: any, callback: any) => {\r\n    if(e.keyCode === 13)\r\n        callback()\r\n}\r\n\r\nexport const convertFromUTC = (date: string) => {\r\n    let localDate = new Date(date)\r\n\r\n    return `${Digits2(localDate.getHours())}:${Digits2(localDate.getMinutes())}`\r\n}\r\n\r\nexport const getDateTime = (date: string) => {\r\n    let clearDate = date.replace(\"Z\", \"\"),\r\n    converted = new Date(clearDate)\r\n\r\n    return `${Digits2(converted.getHours())}:${Digits2(converted.getMinutes())}`\r\n}\r\n\r\nwindow.addEventListener(\"load\", resizePopup)\r\nwindow.addEventListener(\"resize\", resizePopup)","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","export interface IMessage{\r\n    readonly title: string\r\n    readonly icon: string\r\n    readonly iconColor: string\r\n    readonly message: string\r\n    readonly time: number\r\n    readonly type?: string\r\n}\r\n\r\nexport const genericError = {\r\n    title: \"Ops!\",\r\n    icon: \"fa-times-circle\",\r\n    iconColor: \"#de1e30\",\r\n    message: \"È stato riscontrato un errore durante l'accesso.\",\r\n    time: 3000\r\n}","import React from \"react\"\r\nimport { IMessage, genericError } from \"../models/IMessage\"\r\nimport { siteUrl, resizePopup } from \"../utilities\"\r\nimport { routerHistory } from \"..\"\r\nimport { Divider, Tooltip, Spin, Icon } from \"antd\"\r\nimport { ICorso } from \"../models/ICorso\"\r\nimport Axios from \"axios\"\r\nimport { ILezione } from \"../models/ILezione\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly code: string\r\n    readonly popup: IMessage\r\n    readonly corso: ICorso\r\n    readonly focus: boolean\r\n}\r\n\r\nexport default class Firma extends React.PureComponent<IProps, IState>{\r\n    maxLength = 16\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            code: \"\",\r\n            popup: genericError,\r\n            corso: null,\r\n            focus: false\r\n        }\r\n    }\r\n    \r\n    componentDidMount = () => {\r\n        let id = parseInt(sessionStorage.getItem(\"corso\"))\r\n\r\n        Axios.get(siteUrl+\"/api/corsi/\"+id).then(response => {\r\n            let corso = response.data as ICorso\r\n\r\n            this.setState({\r\n                corso\r\n            })\r\n        })\r\n\r\n        resizePopup()\r\n    }\r\n\r\n    changeCode = (event: any) => {\r\n        let code = event.target.value\r\n\r\n        this.setState({\r\n            code\r\n        })\r\n\r\n        this.tryToLog(code)\r\n    }\r\n\r\n    tryToLog = (code: string) => {\r\n        if(code.length < this.maxLength) return false\r\n\r\n        this.switchInput(true)\r\n\r\n        let idCorso = parseInt(sessionStorage.getItem(\"corso\")),\r\n        anno = parseInt(sessionStorage.getItem(\"classe\"))\r\n        \r\n        Axios.get(siteUrl+\"/api/lezioni/\"+idCorso+\"/\"+anno).then(output => {\r\n            if(typeof(output.data) === \"string\"){\r\n                this.setState({\r\n                    popup: {\r\n                        title: \"Attenzione!\",\r\n                        icon: \"fa-times-circle\",\r\n                        iconColor: \"#de1e30\",\r\n                        message: \"Al momento non c'è nessuna lezione in corso.\",\r\n                        time: 3000\r\n                    }\r\n                }, () => {\r\n                    this.showMessagePopup()\r\n                })\r\n            }else{\r\n\r\n                let lezione = output.data as ILezione\r\n\r\n                Axios.post(siteUrl + \"/api/firma\", {\r\n                    code,\r\n                    idCorso,\r\n                    anno,\r\n                    idLezione: lezione.idLezione\r\n                }).then(response => {\r\n                    this.setState({\r\n                        popup: response.data as IMessage\r\n                    })\r\n        \r\n                    this.showMessagePopup()\r\n                }).catch((_) => {\r\n                    this.setState({\r\n                        popup: genericError\r\n                    })\r\n        \r\n                    this.showMessagePopup()\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    switchInput = (disable: boolean) => {\r\n        let input = document.getElementById(\"mainInput\") as HTMLInputElement\r\n\r\n        if(!input) return\r\n\r\n        if(disable)\r\n            input.setAttribute(\"disabled\", \"disabled\")\r\n        else{\r\n            this.setState({\r\n                code: \"\"\r\n            })\r\n            input.removeAttribute(\"disabled\")\r\n            input.focus()\r\n        }\r\n    }\r\n\r\n    showMessagePopup = () => {\r\n        let popup = document.getElementById(\"popup\")\r\n\r\n        if(!popup) return\r\n\r\n        popup.classList.add(\"show\")\r\n\r\n        setTimeout(() => {\r\n            popup.classList.remove(\"show\")\r\n            this.switchInput(false)\r\n        }, this.state.popup.time)\r\n    }\r\n\r\n    cambiaCorso = () => {\r\n        sessionStorage.removeItem(\"corso\")\r\n        sessionStorage.removeItem(\"classe\")\r\n        sessionStorage.removeItem(\"confermaTutor\")\r\n\r\n        routerHistory.push(\"/\")\r\n    }\r\n\r\n    switchFocus = () => {\r\n        this.setState({\r\n            focus: !this.state.focus\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { popup, corso, focus } = this.state\r\n        let icon = <Icon type=\"loading\" spin />\r\n\r\n        return <div className=\"col\" id=\"mainBlock\">\r\n            <div className=\"text-center w-100\">\r\n                <h2 className=\"mb-1 font-weight-normal\">Scannerizza il codice</h2>\r\n                <h6 className=\"mb-1 text-muted font-weight-normal\">(alza la luminosità del dispositivo)</h6>\r\n                <input autoFocus type=\"password\" value={this.state.code} onChange={this.changeCode} maxLength={this.maxLength} id=\"mainInput\" onFocus={this.switchFocus} onBlur={this.switchFocus}/>\r\n\r\n                <Icon type=\"scan\" className=\"fa-9x d-block text-blue\" />\r\n\r\n                {\r\n                    !focus ? <div className=\"text-danger text-center mt-2\">Clicca sulla pagina per ristabilire il focus e firmare.</div>  : \"\"\r\n                }\r\n\r\n                <div className=\"top-info\">\r\n                    {\r\n                        corso ? corso.nome : <Spin indicator={icon} />\r\n                    }\r\n                        <Divider type=\"vertical\" style={{ height: 20 }} />\r\n                    {\r\n                        parseInt(sessionStorage.getItem(\"classe\")) === 1 ? \"Primo anno\" : \"Secondo anno\"\r\n                    }\r\n                        <Divider type=\"vertical\" style={{ height: 20 }} />\r\n                    <Tooltip placement=\"bottomRight\" title=\"Cambia il corso o la classe per firmare\">\r\n                        <button type=\"button\" className=\"btn btn-sm btn-blue\" onClick={this.cambiaCorso}>\r\n                            <i className=\"far fa-repeat-alt fa-fw mr-1\"></i>\r\n                            Cambia\r\n                        </button>\r\n                    </Tooltip>\r\n                </div>\r\n            </div>\r\n\r\n            <div id=\"popup\">\r\n                <div className=\"w-100\">\r\n                    <i className={\"fal fa-fw fa-lg fa-6x \" + popup.icon} style={{ color: popup.iconColor}}></i>\r\n                    <h2 className=\"mt-5\">{popup.title}</h2>\r\n                    <div className=\"mt-2\">{popup.message}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport FullCalendar from \"@fullcalendar/react\"\r\nimport dayGridPlugin from \"@fullcalendar/daygrid\"\r\nimport googleCalendarPlugin from \"@fullcalendar/google-calendar\"\r\nimport { Modal } from \"antd\"\r\nimport { Digits2 } from \"../utilities\"\r\nimport \"@fullcalendar/core/main.css\"\r\nimport \"@fullcalendar/timegrid/main.css\"\r\n\r\nexport interface IProps{\r\n    readonly calendarId: string\r\n}\r\nexport interface IState{}\r\n\r\nexport default class Calendario extends React.PureComponent<IProps, IState>{\r\n    render(): JSX.Element{\r\n        const { calendarId } = this.props\r\n\r\n        return <FullCalendar\r\n            plugins={[ googleCalendarPlugin, dayGridPlugin ]}\r\n            events={{ googleCalendarId: calendarId }}\r\n            googleCalendarApiKey={\"AIzaSyCEEaAbHOYhofQs-iLdHd_J8-KyD_IlRbE\"}\r\n            defaultView=\"dayGridMonth\"\r\n            fixedWeekCount={false}\r\n            firstDay={1}\r\n            themeSystem={\"bootstrap\"}\r\n            eventTimeFormat={{\r\n                hour: \"2-digit\",\r\n                minute: \"2-digit\",\r\n                meridiem: false\r\n            }}\r\n            buttonText={{\r\n                today: \"Mese corrente\"\r\n            }}\r\n            header={{\r\n                right: \"prev, next\"\r\n            }}\r\n            locale={\"it\"}\r\n            eventClick={\r\n                function(info){\r\n                    info.jsEvent.preventDefault()\r\n                    let event = info.event\r\n                    \r\n                    Modal.info({\r\n                        maskClosable: true,\r\n                        centered: true,\r\n                        icon: null,\r\n                        title: event.title,\r\n                        content: <div className=\"mt-3\" style={{ fontSize: 20 }}>\r\n                            <div className=\"row\">\r\n                                <div className=\"col-3 pr-0\">\r\n                                    <span className=\"label\">Inizio</span>\r\n                                </div>\r\n                                <div className=\"col\">\r\n                                    <span className=\"desc\">\r\n                                        { Digits2(event.start.getHours()) }:{ Digits2(event.start.getMinutes()) }\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"row\">\r\n                                <div className=\"col-3 pr-0\">\r\n                                    <span className=\"label\">Fine</span>\r\n                                </div>\r\n                                <div className=\"col\">\r\n                                    <span className=\"desc\">\r\n                                        { Digits2(event.end.getHours()) }:{ Digits2(event.end.getMinutes()) }\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                            {  \r\n                                event.extendedProps.location && <div className=\"row\">\r\n                                    <div className=\"col-3 pr-0\">\r\n                                        <span className=\"label\">Luogo</span>\r\n                                    </div>\r\n                                    <div className=\"col-9\" style={{ fontSize: 15 }}>\r\n                                        {event.extendedProps.location}\r\n                                    </div>\r\n                                </div>\r\n                            }\r\n                        </div>\r\n                    })\r\n                }\r\n            }\r\n        />\r\n    }\r\n}","import React from \"react\"\r\nimport { siteUrl } from \"../utilities\"\r\nimport { Icon, Spin } from \"antd\"\r\nimport { ICalendar } from \"../models/ICalendar\"\r\nimport Axios from \"axios\"\r\nimport Calendario from \"./Calendario\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly calendar: ICalendar\r\n}\r\n\r\nexport default class LessonsCalendar extends React.PureComponent<IProps, IState> {\r\n    constructor(props: IProps){\r\n        super(props)\r\n        \r\n        this.state = {\r\n            calendar: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let idCorso = parseInt(sessionStorage.getItem(\"corso\")),\r\n        classe = parseInt(sessionStorage.getItem(\"classe\"))\r\n        \r\n        Axios.get(siteUrl+\"/api/calendari/\"+idCorso+\"/\"+classe).then(response => {\r\n            let calendar = response.data as ICalendar\r\n\r\n            this.setState({\r\n                calendar\r\n            })\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { calendar } = this.state\r\n    \r\n        if(!calendar){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-3\" id=\"mainBlock\">\r\n            <Calendario calendarId={calendar.idCalendario} />\r\n        </div>\r\n    }\r\n  \r\n  }","import React from \"react\"\r\nimport { adminRoute, superAdminRoute, studentRoute, siteUrl } from \"../utilities\"\r\n\r\nexport interface IProps{\r\n    readonly inMenu?: boolean\r\n}\r\nexport interface IState{}\r\n\r\nexport default class Footer extends React.PureComponent<IProps, IState>{\r\n    render(): JSX.Element{\r\n        if(this.props.inMenu){\r\n            return <div className=\"copyright\">\r\n                &copy; {(new Date()).getFullYear()} FITSTIC - <a href={siteUrl+\"/#/documentazione\"} className=\"text-white u-hover\">Documentazione</a>\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"w-100 bg-white p-3 mt-3 shadow px-2 text-center fixed-bottom\">\r\n            <span style={{ position: \"absolute\", right: 20, fontSize: 32, color: \"#000\" }} role=\"img\" aria-label=\"Avocado Team\">🥑</span>\r\n\r\n            <div>\r\n                &copy; {(new Date()).getFullYear()} FITSTIC\r\n            </div>\r\n\r\n            <a href={siteUrl+\"/#\"+adminRoute} className=\"text-blue u-hover align-middle\">Coordinatori</a> | <a href={siteUrl+\"/#\"+superAdminRoute} className=\"text-blue u-hover align-middle\">Amministratori</a> | <a href={siteUrl+\"/#\"+studentRoute} className=\"text-blue u-hover align-middle\">Studenti</a> | <a href={siteUrl+\"/#/firmacasa\"} className=\"text-blue u-hover align-middle\">Firma da remoto</a> | <a href={siteUrl+\"/#/documentazione\"} className=\"text-blue u-hover align-middle\">Documentazione</a>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { siteUrl, mountLogin, unmountLogin } from \"../utilities\"\r\nimport { ICorso } from \"../models/ICorso\"\r\nimport Axios from \"axios\"\r\nimport { Spin, Icon } from \"antd\"\r\nimport { routerHistory } from \"..\"\r\nimport Footer from \"./Footer\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly corsi: ICorso[]\r\n}\r\n\r\nexport default class SceltaCorso extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            corsi: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Axios.get(siteUrl+\"/api/corsi\").then(response => {\r\n            let corsi = response.data as ICorso[]\r\n\r\n            this.setState({\r\n                corsi\r\n            })\r\n        })\r\n\r\n        mountLogin()\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        unmountLogin()\r\n    }\r\n\r\n    chooseCorso = (id: number) => {\r\n        sessionStorage.setItem(\"corso\", id.toString())\r\n        routerHistory.push(\"/\")\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { corsi } = this.state\r\n\r\n        if(!corsi){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50, color: \"#fff\" }} spin />\r\n\r\n            return <div className=\"col-12 px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col-11 col-lg-5 mx-auto\" id=\"loginBlock\">\r\n            <div className=\"w-100\">\r\n                <div className=\"w-100 bg-white py-3 rounded shadow px-2 text-center\">\r\n                    <h3 className=\"text-center\">Scegli il corso</h3>\r\n\r\n                    {\r\n                        corsi.map(c => {\r\n                            return <div className=\"p-3 mx-2 text-center pointer corso-item d-inline-block rounded\" onClick={() => this.chooseCorso(c.idCorso)}>\r\n                                <img src={c.logo} alt=\"logo\" height=\"60\" />\r\n                            </div>\r\n                        })\r\n                    }\r\n                </div>\r\n\r\n                <Footer />\r\n            </div>\r\n        </div>\r\n\r\n    }\r\n}","import React from \"react\"\r\nimport { mountLogin, unmountLogin } from \"../utilities\"\r\nimport { routerHistory } from \"..\"\r\nimport Footer from \"./Footer\"\r\n\r\nexport default class SceltaClasse extends React.Component{\r\n\r\n    componentDidMount = () => {\r\n        mountLogin()\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        unmountLogin()\r\n    }\r\n\r\n    chooseClasse = (id: number) => {\r\n        sessionStorage.setItem(\"classe\", id.toString())\r\n        routerHistory.push(\"/\")\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        return <div className=\"col-11 col-lg-5 mx-auto\" id=\"loginBlock\">\r\n            <div className=\"w-100\">\r\n                <div className=\"w-100 bg-white py-3 rounded shadow\">\r\n                    <h3 className=\"text-center\">Scegli la classe</h3>\r\n\r\n                    <div className=\"py-2 text-center pointer corso-item\" onClick={() => this.chooseClasse(1)}>\r\n                        Primo anno\r\n                    </div>\r\n                    <div className=\"py-2 text-center pointer corso-item\" onClick={() => this.chooseClasse(2)}>\r\n                        Secondo anno\r\n                    </div>\r\n                </div>\r\n                \r\n                <Footer />\r\n            </div>\r\n        </div>\r\n\r\n    }\r\n}","import React from \"react\"\r\nimport { Icon, Spin } from \"antd\"\r\nimport Axios from \"axios\"\r\nimport { siteUrl, logoUrl } from \"../utilities\"\r\nimport { ICorso } from \"../models/ICorso\"\r\n\r\nexport interface IProps{\r\n    readonly idCorso?: string | number\r\n    readonly forLogin?: boolean\r\n}\r\nexport interface IState{\r\n    readonly logo: string\r\n}\r\n\r\nexport default class LogoCorso extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            logo: null\r\n        }\r\n    }\r\n\r\n    catchNull = () => {\r\n        this.setState({\r\n            logo: logoUrl\r\n        })\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        if(!this.props.idCorso){\r\n            this.catchNull()\r\n            return\r\n        }\r\n        \r\n        Axios.get(siteUrl+\"/api/corsi/\"+this.props.idCorso).then(response => {\r\n            let corso = response.data as ICorso\r\n\r\n            if(!corso.logo){\r\n                this.catchNull()\r\n                return\r\n            }\r\n\r\n            this.setState({\r\n                logo: corso.logo\r\n            })\r\n        }).catch(_ =>{\r\n            this.catchNull()\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { logo } = this.state\r\n        \r\n        if(!logo){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50, color: \"#fff\" }} spin />\r\n\r\n            return <div className=\"text-center py-4\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        if(this.props.forLogin){\r\n            return <img src={logo} height=\"40\" className=\"float-right logo\" alt=\"logo\" />\r\n        }else{\r\n            return <div className=\"logo-block px-3 py-4\">\r\n                <img src={logo} height=\"100\" className=\"mx-auto d-block logo\" alt=\"logo\" />\r\n            </div>\r\n        }\r\n    }\r\n}","import React from \"react\"\r\nimport { mountLogin, unmountLogin, siteUrl } from \"../utilities\"\r\nimport { routerHistory } from \"..\"\r\nimport Axios from \"axios\"\r\nimport { Modal } from \"antd\"\r\nimport Footer from \"./Footer\"\r\n\r\nexport interface IProps{\r\n    readonly idCorso: number\r\n}\r\nexport interface IState{\r\n    readonly codice: string\r\n}\r\nexport default class CodiceAccesso extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            codice: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        mountLogin()\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        unmountLogin()\r\n    }\r\n\r\n    cambiaCodice = (e: any) => {\r\n        let codice = e.target.value\r\n\r\n        this.setState({\r\n            codice\r\n        })\r\n    }\r\n\r\n    cambiaScelta = () => {\r\n        sessionStorage.removeItem(\"corso\")\r\n        sessionStorage.removeItem(\"classe\")\r\n\r\n        routerHistory.push(\"/\")\r\n    }\r\n\r\n    inviaCodice = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        if(this.state.codice === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire il campo.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        Axios.post(siteUrl+\"/api/firma/accedi\", {\r\n            idCorso: this.props.idCorso,\r\n            codice: this.state.codice\r\n        }).then(response => {\r\n\r\n            if(response.data.trim() === \"success\"){\r\n                sessionStorage.setItem(\"confermaTutor\", \"true\")\r\n                routerHistory.push(\"/\")\r\n            }else{\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: \"Codice non valido.\"\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        return <div className=\"col-11 col-lg-5 mx-auto\" id=\"loginBlock\">\r\n            <div className=\"w-100\">\r\n                <form className=\"w-100 bg-white p-3 rounded shadow\" onSubmit={this.inviaCodice}>\r\n                    <h3 className=\"text-center\">Conferma del coordinatore</h3>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-secondary\">Codice di conferma</label>\r\n                        <input name=\"codice\" type=\"password\" className=\"form-control\" value={this.state.codice} onChange={this.cambiaCodice} />\r\n                    </div>\r\n\r\n                    <div className=\"row\">\r\n                        <div className=\"pr-1 col-6\">\r\n                            <input type=\"button\" value=\"Annulla scelta\" className=\"btn btn-lg btn-link text-danger w-100 text-uppercase\" onClick={this.cambiaScelta} />\r\n                        </div>\r\n                        <div className=\"pl-1 col\">\r\n                            <input type=\"submit\" value=\"Prosegui\" className=\"btn btn-lg btn-success w-100 text-uppercase\"/>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n\r\n                <Footer />\r\n            </div>\r\n        </div>\r\n\r\n    }\r\n}","import React from \"react\"\r\nimport { NavLink, Route, Router, Switch } from \"react-router-dom\"\r\nimport { routerHistory } from \"..\"\r\nimport Firma from \"./Firma\"\r\nimport LessonsCalendar from \"./LessonsCalendar\"\r\nimport SceltaCorso from \"./SceltaCorso\"\r\nimport SceltaClasse from \"./SceltaClasse\"\r\nimport LogoCorso from \"./LogoCorso\"\r\nimport CodiceAccesso from \"./CodiceAccesso\"\r\nimport Footer from \"./Footer\"\r\n\r\nexport default class Main extends React.Component{\r\n\r\n    focusInput = () => {\r\n        let input = document.getElementById(\"mainInput\") as HTMLInputElement\r\n\r\n        if(input)\r\n            input.focus()\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        let idCorso = sessionStorage.getItem(\"corso\"),\r\n        classe = sessionStorage.getItem(\"classe\"),\r\n        confermaTutor = sessionStorage.getItem(\"confermaTutor\")\r\n\r\n        if(!idCorso)\r\n            return <SceltaCorso />\r\n\r\n        if(!classe)\r\n            return <SceltaClasse />\r\n\r\n        if(!confermaTutor)\r\n            return <CodiceAccesso idCorso={parseInt(idCorso)} />\r\n\r\n        return <div className=\"container-fluid\" onClick={this.focusInput}>\r\n\r\n            <Router history={routerHistory}>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3 bg-blue p-0 menu\">\r\n                        \r\n                        <LogoCorso idCorso={sessionStorage.getItem(\"corso\")} />\r\n\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(\"/\")} exact to=\"/firme/\">\r\n                            <span><i className=\"fal fa-home-alt fa-fw mr-1\"></i> Home</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(\"/calendar\")} exact to=\"/firme/calendar\">\r\n                            <span><i className=\"fal fa-calendar-alt fa-fw mr-1\"></i> Calendario</span>\r\n                        </NavLink>\r\n\r\n                        <Footer inMenu />\r\n                    </div>\r\n\r\n                    <Switch>\r\n                        <Route exact path=\"/firme/\" render={() => (\r\n                            <Firma />\r\n                        )} />\r\n\r\n                        <Route exact path=\"/firme/calendar\" render={() => (\r\n                            <LessonsCalendar />\r\n                        )} />\r\n                    </Switch>\r\n                        \r\n                </div>\r\n            </Router>\r\n        </div>\r\n    }\r\n}","export class Cipher{\r\n    private maximum = 65535\r\n\r\n    public encode(msg: string, shift: number = -4){\r\n        let finalMessage = \"\"\r\n    \r\n        if(shift < 0)\r\n            shift = -shift\r\n    \r\n        for(let i = 0; i < msg.length; i++){\r\n            let letter = msg[i],\r\n            charInt = letter.charCodeAt(0),\r\n            newInt = charInt + shift\r\n\r\n            if(newInt > this.maximum)\r\n                newInt = newInt - (this.maximum + 1)\r\n\r\n            letter = String.fromCharCode(newInt)\r\n\r\n            finalMessage += letter\r\n        }\r\n        \r\n        return finalMessage\r\n    }\r\n\r\n    public decode(msg: string, shift: number = -4){\r\n        let finalMessage = \"\"\r\n    \r\n        if(shift < 0)\r\n            shift = -shift\r\n    \r\n        for(let i = 0; i < msg.length; i++){\r\n            let letter = msg[i],\r\n            charInt = letter.charCodeAt(0),\r\n            newInt = charInt - shift\r\n\r\n            if(newInt < 0)\r\n                newInt = this.maximum + (newInt + 1)\r\n\r\n            letter = String.fromCharCode(newInt)\r\n\r\n            finalMessage += letter\r\n        }\r\n        \r\n        return finalMessage\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, Steps, Button } from \"antd\"\r\nimport Axios from \"axios\"\r\nimport { siteUrl } from \"../utilities\"\r\nimport { Cipher } from \"../models/Cipher\"\r\n\r\nexport interface IProps{\r\n    readonly show: boolean\r\n    readonly closeModal: () => void\r\n    readonly forStudent?: boolean\r\n}\r\nexport interface IState{\r\n    readonly currentStep: number\r\n    readonly email: string\r\n    readonly code: string\r\n    readonly newPassword: string\r\n    readonly newPasswordConfirm: string\r\n    readonly idUtente: number\r\n    readonly loading: boolean\r\n}\r\n\r\nexport default class ForgotPassword extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            currentStep: 0,\r\n            email: \"\",\r\n            code: \"\",\r\n            newPassword: \"\",\r\n            newPasswordConfirm: \"\",\r\n            idUtente: null,\r\n            loading: false\r\n        }\r\n    }\r\n\r\n    cancelRecover = () => {\r\n        this.setState({\r\n            currentStep: 0,\r\n            email: \"\",\r\n            code: \"\",\r\n            newPassword: \"\",\r\n            newPasswordConfirm: \"\",\r\n            idUtente: null,\r\n            loading: false\r\n        })\r\n\r\n        this.props.closeModal()\r\n    }\r\n\r\n    changeMail = (e: any) => {\r\n        let email = e.target.value.trim()\r\n\r\n        this.setState({\r\n            email\r\n        })\r\n    }\r\n\r\n    changeCode = (e: any) => {\r\n        let code = e.target.value.trim()\r\n\r\n        this.setState({\r\n            code\r\n        })\r\n    }\r\n\r\n    changePassword = (e: any) => {\r\n        let pass = e.target.value\r\n\r\n        this.setState({\r\n            newPassword: pass\r\n        })\r\n    }\r\n\r\n    changePasswordConfirm = (e: any) => {\r\n        let pass = e.target.value\r\n\r\n        this.setState({\r\n            newPasswordConfirm: pass\r\n        })\r\n    }\r\n\r\n    increaseStep = () => {\r\n        this.setState({\r\n            currentStep: this.state.currentStep + 1\r\n        })\r\n    }\r\n\r\n    decreaseStep = () => {\r\n        this.setState({\r\n            currentStep: this.state.currentStep - 1\r\n        })\r\n    }\r\n\r\n    switchLoading = () => {\r\n        this.setState({\r\n            loading: !this.state.loading\r\n        })\r\n    }\r\n\r\n    confirmFirstStep = (e: any) => {\r\n        e.preventDefault()\r\n        \r\n        const { email } = this.state,\r\n        { forStudent } = this.props\r\n\r\n        if(email === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\",\r\n                maskClosable: true\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        this.switchLoading()\r\n\r\n        let url = forStudent ? \"/api/studenti/recuperopwdstudente\" : \"/api/coordinatori/recuperocoordinatori\"\r\n\r\n        Axios.post(siteUrl + url, {\r\n            email\r\n        }).then(response => {\r\n            let data = response.data,\r\n            idUtente = parseInt(data)\r\n\r\n            if(!isNaN(idUtente)){\r\n                this.setState({\r\n                    idUtente,\r\n                    loading: false\r\n                })\r\n\r\n                this.increaseStep()\r\n            }else{\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: \"Questa e-mail non corrisponde a nessun utente.\",\r\n                    maskClosable: true\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    confirmSecondStep = (e: any) => {\r\n        e.preventDefault()\r\n        \r\n        if(this.state.code === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire il campo.\",\r\n                maskClosable: true\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        this.increaseStep()\r\n    }\r\n\r\n    savePassword = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { newPassword, newPasswordConfirm, idUtente, code } = this.state,\r\n        { forStudent } = this.props\r\n\r\n        if(newPassword === \"\" || newPasswordConfirm === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\",\r\n                maskClosable: true\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(newPassword.length < 8){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"La password deve avere almeno 8 caratteri.\",\r\n                maskClosable: true\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(newPassword !== newPasswordConfirm){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Le password non corrispondono.\",\r\n                maskClosable: true\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        this.switchLoading()\r\n\r\n        let cipher = new Cipher(),\r\n        password = cipher.encode(newPassword),\r\n        url = forStudent ? \"/api/Studenti/cambiopassword\" : \"/api/coordinatori/cambiopassword\"\r\n\r\n        Axios.post(siteUrl + url, {\r\n            idUtente,\r\n            password,\r\n            codice: code\r\n        }).then(response => {\r\n            let msg = response.data\r\n\r\n            if(msg.trim() === \"success\"){\r\n                Modal.success({\r\n                    title: \"Complimenti!\",\r\n                    content: \"Password modificata con successo.\",\r\n                    centered: true,\r\n                    onOk: this.cancelRecover\r\n                })\r\n            }else{\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: \"Non è stato possibile completare l'operazione.\",\r\n                    onOk: () => {\r\n                        this.setState({\r\n                            loading: false\r\n                        })\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { show } = this.props\r\n        const { currentStep, email, code, newPassword, newPasswordConfirm, loading } = this.state\r\n        const { Step } = Steps\r\n\r\n        const steps = [{\r\n            title: \"E-mail\",\r\n            content: <form onSubmit={this.confirmFirstStep}>\r\n                <div className=\"form-group my-3\">\r\n                    <label className=\"text-muted\">Inserisci la tua e-mail</label>\r\n                    <input type=\"email\" name=\"email\" value={email} className=\"form-control\" onChange={this.changeMail} disabled={loading} />\r\n                </div>\r\n\r\n                <Button htmlType=\"submit\" className=\"float-right\" type=\"primary\" loading={loading}>Prosegui</Button>\r\n\r\n                <div className=\"clearfix\"></div>\r\n            </form>\r\n        },\r\n        {\r\n            title: \"Codice\",\r\n            content: <form onSubmit={this.confirmSecondStep}>\r\n                <div className=\"form-group my-3\">\r\n                    <label className=\"text-muted\">Inserisci il codice ricevuto via e-mail</label>\r\n                    <input type=\"text\" name=\"code\" value={code} className=\"form-control\" onChange={this.changeCode} disabled={loading} />\r\n                </div>\r\n\r\n                <div className=\"float-right\">\r\n                    <Button className=\"mr-2\" onClick={this.decreaseStep}>Indietro</Button>\r\n\r\n                    <Button htmlType=\"submit\" type=\"primary\" loading={loading}>Prosegui</Button>\r\n                </div>\r\n\r\n                <div className=\"clearfix\"></div>\r\n            </form>\r\n        },\r\n        {\r\n            title: \"Nuova password\",\r\n            content: <form onSubmit={this.savePassword}>\r\n                <div className=\"form-group my-3\">\r\n                    <label className=\"text-muted\">Crea la tua nuova password</label>\r\n                    <input type=\"password\" name=\"newpassword\" value={newPassword} className=\"form-control\" onChange={this.changePassword} disabled={loading} />\r\n                </div>\r\n\r\n                <div className=\"form-group my-3\">\r\n                    <label className=\"text-muted\">Conferma la nuova password</label>\r\n                    <input type=\"password\" name=\"newpassword_conf\" value={newPasswordConfirm} className=\"form-control\" onChange={this.changePasswordConfirm} disabled={loading} />\r\n                </div>\r\n\r\n                <div className=\"float-right\">\r\n                    <Button className=\"mr-2\" onClick={this.decreaseStep}>Indietro</Button>\r\n\r\n                    <Button htmlType=\"submit\" type=\"primary\" loading={loading}>Salva la password</Button>\r\n                </div>\r\n\r\n                <div className=\"clearfix\"></div>\r\n            </form>\r\n        }]\r\n\r\n        return <Modal visible={show} title=\"Recupero della password\" onCancel={this.cancelRecover} footer={null} maskClosable={false}>\r\n            <Steps size=\"small\" current={currentStep}>\r\n                {\r\n                    steps.map(item => {\r\n                        return <Step key={item.title} title={item.title} />\r\n                    })\r\n                }\r\n            </Steps>\r\n\r\n            <div className=\"steps-content\">\r\n                {steps[currentStep].content}\r\n            </div>\r\n        </Modal>\r\n    }\r\n}","import React from \"react\"\r\nimport { routerHistory } from \"../..\"\r\nimport { message, Modal } from \"antd\"\r\nimport { mountLogin, unmountLogin, siteUrl, logoUrl, adminRoute } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { Cipher } from \"../../models/Cipher\"\r\nimport { isAdmin } from \"../../models/IAdmin\"\r\nimport ForgotPassword from \"../ForgotPassword\"\r\nimport Footer from \"../Footer\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly adminName: string\r\n    readonly adminPsw: string\r\n    readonly showForgot: boolean\r\n}\r\n\r\nexport default class LoginTutor extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            adminName: \"\",\r\n            adminPsw: \"\",\r\n            showForgot: false\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        mountLogin()\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        unmountLogin()\r\n    }\r\n\r\n    changeInputName = (event: any) => {\r\n        let name = event.target.value\r\n\r\n        this.setState({\r\n            adminName: name\r\n        })\r\n    }\r\n\r\n    changeInputPassword = (event: any) => {\r\n        let psw = event.target.value\r\n\r\n        this.setState({\r\n            adminPsw: psw\r\n        })\r\n    }\r\n\r\n    tryLogin = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { adminName, adminPsw } = this.state\r\n        let cipher = new Cipher(),\r\n        password = cipher.encode(adminPsw)\r\n\r\n        Axios.post(siteUrl+\"/api/coordinatori/logincoordinatore\", {\r\n            username: adminName.trim(),\r\n            password\r\n        }).then(response => {\r\n            let data = response.data\r\n\r\n            if(isAdmin(data)){\r\n                data.password = password\r\n                sessionStorage.setItem(\"adminSession\", JSON.stringify(data))\r\n                routerHistory.push(adminRoute)\r\n                message.success(\"Login effettuato con successo!\")\r\n            }else{\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: \"Username o Password errati!\",\r\n                    centered: true,\r\n                    maskClosable: true\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    switchForgot = () => {\r\n        this.setState({\r\n            showForgot: !this.state.showForgot\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { adminName, adminPsw, showForgot } = this.state\r\n\r\n        return <div className=\"col-11 col-lg-5 mx-auto\" id=\"loginBlock\">\r\n            <div className=\"w-100\">\r\n                <form className=\"w-100 bg-white p-3 rounded shadow\" onSubmit={this.tryLogin}>\r\n                    <h3 className=\"d-inline-block\">Accesso coordinatori</h3>\r\n                    <img src={logoUrl} height=\"40\" className=\"float-right logo\" alt=\"logo\" />\r\n\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-secondary\">Utente di accesso</label>\r\n                        <input name=\"username\" type=\"text\" className=\"form-control\" value={adminName} onChange={this.changeInputName} />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-secondary\">Password di accesso</label>\r\n                        <input name=\"password\" type=\"password\" className=\"form-control\" value={adminPsw} onChange={this.changeInputPassword} />\r\n                    </div>\r\n\r\n                    <input type=\"submit\" value=\"Accedi\" className=\"btn btn-lg btn-success w-100 text-uppercase\"/>\r\n\r\n                    <span className=\"link-blue u-hover d-block mt-3 text-center\" onClick={this.switchForgot}>Hai dimenticato la password?</span>\r\n                </form>\r\n\r\n                <Footer />\r\n            </div>\r\n\r\n            <ForgotPassword show={showForgot} closeModal={this.switchForgot} />\r\n        </div>\r\n    }\r\n\r\n}","export interface IAdmin{\r\n    readonly idCoordinatore?: number\r\n    readonly idAmministratore?: number\r\n    readonly idCorso: number\r\n    readonly nome: string\r\n    readonly cognome: string\r\n    readonly codiceCorso?: string\r\n    readonly password?: string\r\n}\r\n\r\nexport const isAdmin = (obj: any) => {\r\n    try{\r\n        return \"idCorso\" in obj && \"nome\" in obj && \"cognome\" in obj\r\n    }catch{\r\n        return false\r\n    }\r\n}\r\n\r\nexport const isSuperAdmin = (obj: any) => {\r\n    try{\r\n        return \"nome\" in obj && \"cognome\" in obj\r\n    }catch{\r\n        return false\r\n    }\r\n}","import React from \"react\"\r\nimport Axios from \"axios\"\r\nimport { Modal, Icon } from \"antd\"\r\nimport { IAdmin } from \"../models/IAdmin\"\r\nimport { checkEnter } from \"../utilities\"\r\nimport { Cipher } from \"../models/Cipher\"\r\n\r\nexport const askPassword = (url: string, callType: string, body?: any, callback?: any, preAction?: any, customText?: string) => {\r\n    let input: HTMLInputElement,\r\n    tutor = JSON.parse(sessionStorage.getItem(\"adminSession\")) as IAdmin,\r\n    admin = JSON.parse(sessionStorage.getItem(\"superSession\")) as IAdmin,\r\n    cipher = new Cipher()\r\n\r\n    const sendForm = () => {\r\n\r\n        if(preAction)\r\n            preAction()\r\n\r\n        if(admin){\r\n            body.authAdmin = {\r\n                idAdmin: admin.idAmministratore,\r\n                password: admin.password\r\n            }\r\n        }\r\n        else if(tutor){\r\n            body.authCoordinatore = {\r\n                idCoordinatore: tutor.idCoordinatore,\r\n                password: tutor.password\r\n            }\r\n        }else{\r\n            if(input.value === \"\"){\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: \"Riempire il campo.\",\r\n                    centered: true,\r\n                    maskClosable: true\r\n                })\r\n                \r\n                return true\r\n            }\r\n            \r\n            body.password = \"idStudente\" in body ? cipher.encode(input.value) : input.value.trim()\r\n        }\r\n\r\n        if(callType === \"post\"){\r\n            Axios.post(url, body).then(callback).catch(_ => {\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: \"C'è stato un problema. Forse sei stato disconnesso: prova a riefettuare il login.\"\r\n                })\r\n            })\r\n        }else if(callType === \"put\"){\r\n            Axios.put(url, body).then(callback).catch(_ => {\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: \"C'è stato un problema. Forse sei stato disconnesso: prova a riefettuare il login.\"\r\n                })\r\n            })\r\n        }\r\n    }\r\n\r\n    if(tutor || admin){\r\n        sendForm()\r\n    }else{\r\n        let modal = Modal.confirm({\r\n            title: \"Prima di procedere...\",\r\n            content: <div style={{ marginLeft: -38 }}>\r\n                <div className=\"form-group mb-0\">\r\n                    <label className=\"text-secondary\">\r\n                        {customText ? customText : \"Inserisci la tua password per confermare l'identità\"}\r\n                    </label>\r\n                    <input type=\"password\" ref={r => input = r} className=\"form-control\" onKeyUp={(e) => checkEnter(e, () => {\r\n                        if(!sendForm())\r\n                            modal.destroy()\r\n                    })} />\r\n                </div>\r\n            </div>,\r\n            okText: \"Conferma identità\",\r\n            cancelText: \"Annulla\",\r\n            onOk: sendForm,\r\n            icon: <Icon type=\"lock\" style={{ color: \"var(--danger)\" }} />,\r\n            centered: true\r\n        })\r\n\r\n        setTimeout(() => {\r\n            input.focus()\r\n        }, 300)\r\n    }\r\n}","import React from \"react\"\r\nimport { Switch } from \"antd\"\r\nimport { siteUrl } from \"../../utilities\"\r\nimport { askPassword } from \"../AskConferma\"\r\nimport Axios from \"axios\"\r\n\r\nexport interface IProps{\r\n    readonly idCorso: number\r\n    readonly anno: number\r\n}\r\nexport interface IState{\r\n    readonly stage: boolean\r\n    readonly loading: boolean\r\n}\r\n\r\nexport default class StageSwitch extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            stage: false,\r\n            loading: false\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        const { idCorso, anno } = this.props\r\n\r\n        this.toggleLoading()\r\n\r\n        Axios.get(siteUrl+\"/api/corsi/getstagevalue/\"+idCorso+\"/\"+anno).then(response => {\r\n            let status = response.data as boolean\r\n\r\n            this.setState({\r\n                stage: status\r\n            })\r\n\r\n            this.toggleLoading()\r\n        })\r\n    }\r\n\r\n    toggleLoading = () => {\r\n        this.setState({\r\n            loading: !this.state.loading\r\n        })\r\n    }\r\n\r\n    switchStage = () => {\r\n        this.toggleLoading()\r\n\r\n        askPassword(siteUrl+\"/api/corsi/switchabilitastage\", \"post\", {\r\n            anno: this.props.anno\r\n        }, (response: any) => {\r\n            let message = response.data\r\n\r\n            if(message === \"success\"){\r\n                this.toggleLoading()\r\n\r\n                this.setState({\r\n                    stage: !this.state.stage\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { stage, loading } = this.state\r\n\r\n        return <label className=\"pointer mb-3\">\r\n            <Switch loading={loading} onChange={this.switchStage} checked={stage} className=\"mr-1 align-top\" /> Attiva lo stage per questa classe\r\n        </label>\r\n    }\r\n}","import React from \"react\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\nimport { routerHistory } from \"../..\"\r\nimport { Modal, Tooltip, Spin, Icon, Checkbox, Collapse, DatePicker, message, Tabs, Input } from \"antd\"\r\nimport Axios from \"axios\"\r\nimport { siteUrl, formattaData, adminRoute } from \"../../utilities\"\r\nimport locale from \"antd/es/date-picker/locale/it_IT\"\r\nimport { askPassword } from \"../AskConferma\"\r\nimport StageSwitch from \"./StageSwitch\"\r\n\r\nexport interface IProps{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly students: IStudent[]\r\n    readonly selection: IStudent[]\r\n    readonly confirmModal: boolean\r\n    readonly filter: string\r\n}\r\n\r\nexport default class StudentsList extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            students: null,\r\n            selection: [],\r\n            confirmModal: false,\r\n            filter: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Axios.get(siteUrl+\"/api/studenti/\"+this.props.corso).then(response => {\r\n            this.setState({\r\n                students: response.data as IStudent[]\r\n            })\r\n        })\r\n    }\r\n\r\n    showConfirm = (student: IStudent) => {\r\n        const { students } = this.state\r\n        let date: string = \"\"\r\n\r\n        Modal.confirm({\r\n            title: `${student.nome} ${student.cognome}`,\r\n            content: <div style={{ marginLeft: -38 }}>\r\n                <p>Confermi di voler ritirare questo studente dal corso?</p>\r\n                <label className=\"text-secondary\">Data di ritiro</label>\r\n                \r\n                <DatePicker locale={locale} className=\"w-100\" onChange={(_, d2) => date = d2} format=\"DD-MM-YYYY\" />\r\n            </div>,\r\n            okText: \"Conferma ritiro\",\r\n            okType: \"danger\",\r\n            cancelText: \"Annulla\",\r\n            icon: <Icon type=\"warning\" className=\"text-danger\" theme=\"filled\" />,\r\n            onOk: () => {\r\n                if(date === \"\"){\r\n                    Modal.error({\r\n                        title: \"Errore!\",\r\n                        content: \"Seleziona una data valida.\"\r\n                    })\r\n\r\n                    return true\r\n                }\r\n\r\n                let dataRitiro = formattaData(date, true),\r\n                studente = student as any\r\n                studente.ritirato = \"true\"\r\n                studente.dataRitiro = dataRitiro\r\n                \r\n                askPassword(siteUrl+\"/api/studenti/\" + student.idStudente, \"put\", {\r\n                    studente\r\n                }, (response: any) => {\r\n\r\n                    let stu = response.data as IStudent,\r\n                    currentList = students as any,\r\n                    editingStudent = students.indexOf(student)\r\n                    \r\n                    currentList[editingStudent] = stu\r\n\r\n                    this.setState({\r\n                        students: currentList as IStudent[]\r\n                    })\r\n\r\n                    message.success(\"Studente ritirato con successo!\")\r\n                }, () => {\r\n                    this.setState({\r\n                        students: null\r\n                    })\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    changeSelection = (student: IStudent) => {\r\n        let find = this.state.selection.find(s => s === student),\r\n        newList = find ? this.state.selection.filter(s => s.idStudente !== student.idStudente) : this.state.selection.concat(student)\r\n\r\n        this.setState({\r\n            selection: newList\r\n        })\r\n    }\r\n\r\n    selectAll = (anno: number, event: any) => {\r\n        let selectionList = event.target.checked ? this.state.students.filter(s => s.annoFrequentazione === anno && !s.ritirato) : this.state.selection.filter(s => s.annoFrequentazione !== anno)\r\n\r\n        this.setState({\r\n            selection: selectionList\r\n        })\r\n    }\r\n\r\n    showHideModal = () => {\r\n        if(!this.state.selection.length){\r\n            Modal.info({\r\n                title: \"Attenzione!\",\r\n                content: \"Devi selezionare almeno uno studente.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        this.setState({\r\n            confirmModal: !this.state.confirmModal\r\n        })\r\n    }\r\n\r\n    moveStudents = () => {\r\n        let select = document.getElementById(\"moveToClass\") as HTMLSelectElement,\r\n        value = parseInt(select.value),\r\n        studenti = this.state.selection.map(s => {\r\n            let stu = s as any\r\n            stu.idCorso = this.props.corso\r\n            stu.annoFrequentazione = value\r\n\r\n            return stu\r\n        })\r\n\r\n        if(value !== 1 && value !== 2){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"L'anno selezionato non è valido.\"\r\n            })\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/studenti\", \"put\", {\r\n            studenti\r\n        }, (response: any) => {\r\n            this.setState({\r\n                students: response.data as IStudent[],\r\n                confirmModal: false\r\n            })\r\n\r\n            message.success(\"Studenti spostati con successo!\")\r\n        }, () => {\r\n            this.setState({\r\n                students: null,\r\n                selection: []\r\n            })\r\n        })\r\n    }\r\n\r\n    allRetired = (group: IStudent[]) => {\r\n        let allRetired = true\r\n\r\n        group.forEach(s => {\r\n            if(!s.ritirato)\r\n                allRetired = false\r\n        })\r\n\r\n        return !allRetired\r\n    }\r\n\r\n    sortbyId = (a: IStudent, b: IStudent) => { \r\n        if(a.idStudente > b.idStudente)\r\n            return-1\r\n        if(a.idStudente < b.idStudente)\r\n            return 1\r\n\r\n        return 0\r\n    }\r\n\r\n    promuoviStudent = (s: IStudent) => {\r\n        Modal.confirm({\r\n            title: `${s.nome} ${s.cognome}`,\r\n            content: \"Confermi di voler segnare questo studente come archiviato?\",\r\n            okText: \"Conferma\",\r\n            okType: \"primary\",\r\n            cancelText: \"Annulla\",\r\n            onOk: () => {\r\n                askPassword(siteUrl+\"/api/studenti/promuovistudente\", \"put\", {\r\n                    idStudente: s.idStudente\r\n                }, (response: any) => {\r\n                    \r\n                    let students = response.data as IStudent[]\r\n        \r\n                    this.setState({\r\n                        students\r\n                    })\r\n        \r\n                    message.success(\"Studente archiviato con successo!\")\r\n                }, () => {\r\n                    this.setState({\r\n                        students: null\r\n                    })\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    changeFilter = (e: any) => {\r\n        let filter = e.target.value\r\n\r\n        this.setState({\r\n            filter\r\n        })\r\n    }\r\n\r\n    filterStudentsByFilter = () => {\r\n        const { students, filter } = this.state\r\n\r\n        return students.filter(s => s.nome.toLowerCase().indexOf(filter.toLowerCase()) !== -1 || s.cognome.toLowerCase().indexOf(filter.toLowerCase()) !== -1)\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { students, selection, filter } = this.state,\r\n        { Panel } = Collapse,\r\n        { TabPane } = Tabs\r\n        \r\n        if(!students){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n        \r\n        let firstYear = students.filter(s => s.annoFrequentazione === 1 && !s.promosso).sort(this.sortbyId).sort((a, _) => a.ritirato ? 0 : -1),\r\n        secondYear = students.filter(s => s.annoFrequentazione === 2 && !s.promosso).sort(this.sortbyId).sort((a, _) => a.ritirato ? 0 : -1),\r\n        groups = [firstYear, secondYear],\r\n        studentiRitirati = filter.trim() === \"\" ? students : this.filterStudentsByFilter(),\r\n        ritirati = studentiRitirati.filter(s => s.promosso).sort(this.sortbyId).sort((a, _) => a.ritirato ? 0 : -1)\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-3 text-center\">Studenti del corso</h3>\r\n\r\n            <Tabs defaultActiveKey=\"1\">\r\n                <TabPane tab={<span><i className=\"fal fa-user fa-fw mr-1\"></i> Studenti attivi</span>} key=\"1\">\r\n                    <button className=\"btn btn-success float-right mr-1\" type=\"button\" onClick={() => routerHistory.push(adminRoute+\"/studenti/new\")}>\r\n                        <i className=\"fal fa-plus fa-fw\"></i> Aggiungi studente\r\n                    </button>\r\n\r\n                    <button className=\"btn btn-orange float-right mr-2\" type=\"button\" onClick={this.showHideModal}>\r\n                        <i className=\"fa fa-arrows-alt fa-fw\"></i> Sposta studenti\r\n                    </button>\r\n\r\n                    <button className=\"btn btn-blue float-right mr-2\" type=\"button\" onClick={() => routerHistory.push(adminRoute+\"/studenti/import\")}>\r\n                        <i className=\"fa fa-file-csv fa-fw\"></i> Importa da CSV\r\n                    </button>\r\n\r\n                    <div className=\"clearfix\"></div>\r\n\r\n                    <Tabs defaultActiveKey=\"0\">\r\n                        \r\n                        {\r\n                            groups.map((g, i) => {\r\n                                if(!g[0])\r\n                                    return false\r\n                                    \r\n                                let checkedAll = this.allRetired(g),\r\n                                tabTitle = g[0].annoFrequentazione === 1 ? \"Primo\" : \"Secondo\"\r\n\r\n                                g.forEach(element => {\r\n                                    if(selection.indexOf(element) === -1 && !element.ritirato)\r\n                                        checkedAll = false\r\n                                })\r\n\r\n                                return <TabPane tab={tabTitle + \" anno\"} key={i.toString()}>\r\n                                    <StageSwitch anno={g[0].annoFrequentazione} idCorso={g[0].idCorso} />\r\n                                    \r\n                                    <table className=\"table table-bordered text-center\">\r\n\r\n                                        <tbody className=\"border-top-0\">\r\n                                            <tr>\r\n                                                <th style={{width: \"5%\"}}>\r\n                                                    <Tooltip title=\"Seleziona tutti\">\r\n                                                        <Checkbox onChange={(e) => this.selectAll(g[0].annoFrequentazione, e)} checked={checkedAll} />\r\n                                                    </Tooltip>\r\n                                                </th>\r\n                                                <th>Studente</th>\r\n                                                <th>Codice Fiscale</th>\r\n                                                <th style={{width: \"15%\"}}>Frequenza</th>\r\n                                                <th style={{width: \"26%\"}}>Azioni</th>\r\n                                            </tr>\r\n                                \r\n                                            {\r\n                                                g.map(s => {\r\n                                                    let checked = this.state.selection.find(n => n === s) ? true : false,\r\n                                                    bg = s.ritirato ? \"light font-italic\" : \"white\"\r\n                            \r\n                                                    return <tr className={\"bg-\"+bg}>\r\n                                                        <td>\r\n                                                            {\r\n                                                                s.ritirato ? <Checkbox disabled /> : <Checkbox onChange={() => this.changeSelection(s)} checked={checked} />\r\n                                                            }\r\n                                                        </td>\r\n                                                        <Tooltip title={s.nome + \" \" + s.cognome}>\r\n                                                            <td style={{maxWidth: 0}} className=\"text-truncate\">{s.nome} {s.cognome}</td>\r\n                                                        </Tooltip>\r\n                                                        <td style={{maxWidth: 0}} className=\"text-truncate\">{s.cf}</td>\r\n                                                        <td style={{maxWidth: 0}} className=\"text-truncate\">\r\n                                                            {isNaN(s.frequenza) ? 0 : s.frequenza}%\r\n                                                        </td>\r\n                                                        \r\n                                                        <td>\r\n                                                            <Tooltip title=\"Dettagli\">\r\n                                                                <button type=\"button\" className=\"btn btn-info circle-btn\" onClick={() => routerHistory.push(adminRoute+\"/studenti/\" + s.idStudente)}>\r\n                                                                    <i className=\"fa fa-info\"></i>\r\n                                                                </button>\r\n                                                            </Tooltip>\r\n                                                            \r\n                                                            {\r\n                                                                !s.ritirato && <Tooltip title=\"Modifica\">\r\n                                                                    <button type=\"button\" className=\"btn btn-warning text-white circle-btn ml-2\" onClick={() => routerHistory.push(adminRoute+\"/studenti/edit/\" + s.idStudente)}>\r\n                                                                        <i className=\"fa fa-pen\"></i>\r\n                                                                    </button>\r\n                                                                </Tooltip>\r\n                                                            }\r\n                                                            {\r\n                                                                !s.ritirato && <Tooltip title=\"Segna come ritirato\">\r\n                                                                    <button type=\"button\" className=\"btn btn-danger circle-btn ml-2\" onClick={() => this.showConfirm(s)}>\r\n                                                                        <i className=\"fa fa-user-times\"></i>\r\n                                                                    </button>\r\n                                                                </Tooltip>\r\n                                                            }\r\n\r\n                                                            {\r\n                                                                s.ritirato && <Tooltip title=\"Studente ritirato\">\r\n                                                                    <button type=\"button\" className=\"circle-btn ml-2 border-0\">\r\n                                                                        <i className=\"fa fa-user-slash\"></i>\r\n                                                                    </button>\r\n                                                                </Tooltip>\r\n                                                            }\r\n\r\n                                                            <Tooltip title=\"Archivia studente\">\r\n                                                                <button type=\"button\" className=\"btn btn-success circle-btn ml-2\" onClick={() => this.promuoviStudent(s)}>\r\n                                                                    <i className=\"fa fa-user-check\"></i>\r\n                                                                </button>\r\n                                                            </Tooltip>\r\n                                                            \r\n                                                        </td>\r\n                                                    </tr>\r\n                                                })\r\n                                            }\r\n                                        </tbody>\r\n                                    </table>\r\n                                </TabPane>\r\n                            })\r\n                        }\r\n                    </Tabs>\r\n                </TabPane>\r\n\r\n                <TabPane tab={<span><i className=\"fal fa-user-graduate fa-fw mr-1\"></i> Studenti archiviati</span>} key=\"2\">\r\n                    <div className=\"float-right mr-1 mb-2\">\r\n                        <label className=\"d-inline-block text-secondary mr-2\">Filtra studenti: </label>\r\n                        <Input value={filter} onChange={this.changeFilter} className=\"w-auto\" />\r\n                    </div>\r\n\r\n                    <table className=\"table table-bordered text-center\">\r\n                        <tbody className=\"border-top-0\">\r\n\r\n                            <tr>\r\n                                <th><i className=\"fa fa-check-circle fa-lg text-success\"></i></th>\r\n                                <th>Studente</th>\r\n                                <th>Codice Fiscale</th>\r\n                                <th style={{width: \"15%\"}}>Anno</th>\r\n                                <th style={{width: \"15%\"}}>Frequenza</th>\r\n                                <th style={{width: \"20%\"}}>Azioni</th>\r\n                            </tr>\r\n                            \r\n                            {\r\n                                ritirati.map(s => {\r\n                                    let bg = s.ritirato ? \"light font-italic\" : \"white\"\r\n\r\n                                    return <tr className={\"bg-\"+bg}>\r\n                                        <td>\r\n                                            {\r\n                                                !s.ritirato ? <i className=\"fa fa-check-circle fa-lg text-success\"></i> : <i className=\"fa fa-times-circle fa-lg text-danger\"></i>\r\n                                            }\r\n                                        </td>\r\n                                        <Tooltip title={s.nome + \" \" + s.cognome}>\r\n                                            <td style={{maxWidth: 0}} className=\"text-truncate\">{s.nome} {s.cognome}</td>\r\n                                        </Tooltip>\r\n                                        <td style={{maxWidth: 0}} className=\"text-truncate\">{s.cf}</td>\r\n                                        <td style={{maxWidth: 0}} className=\"text-truncate\">\r\n                                            {s.annoFrequentazione === 1 ? \"Primo\" : \"Secondo\"}\r\n                                        </td>\r\n                                        <td style={{maxWidth: 0}} className=\"text-truncate\">\r\n                                            {isNaN(s.frequenza) ? 0 : s.frequenza}%\r\n                                        </td>\r\n                                        \r\n                                        <td>\r\n                                            <Tooltip title=\"Dettagli\">\r\n                                                <button type=\"button\" className=\"btn btn-info circle-btn\" onClick={() => routerHistory.push(adminRoute+\"/studenti/\" + s.idStudente)}>\r\n                                                    <i className=\"fa fa-info\"></i>\r\n                                                </button>\r\n                                            </Tooltip>                                            \r\n                                        </td>\r\n                                    </tr>\r\n                                })\r\n                            }\r\n                        </tbody>\r\n                    </table>\r\n                </TabPane>\r\n            </Tabs>\r\n\r\n            <Modal title=\"Sposta studenti\" visible={this.state.confirmModal} onCancel={this.showHideModal} cancelText=\"Annulla\" okText=\"Conferma\" onOk={this.moveStudents}>\r\n                <label className=\"text-secondary\">Scegliere l'anno in cui spostare gli studenti</label>\r\n                <select className=\"custom-select\" id=\"moveToClass\">\r\n                    <option value=\"1\">Primo anno</option>\r\n                    <option value=\"2\">Secondo anno</option>\r\n                </select>\r\n\r\n                <Collapse bordered={false}>\r\n                    <Panel header=\"Mostra studenti selezionati\" key={1}>\r\n                        { \r\n                            selection.map(s => {\r\n                                return <span className=\"d-block\">\r\n                                    <strong>{s.nome} {s.cognome}</strong> ({s.annoFrequentazione}° anno)\r\n                                </span>\r\n                            })\r\n                        }\r\n                    </Panel>\r\n                </Collapse>\r\n            </Modal>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, message, DatePicker, Icon } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { siteUrl, formattaData, adminRoute } from \"../../utilities\"\r\nimport locale from \"antd/es/date-picker/locale/it_IT\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IProps{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly nome: string\r\n    readonly cognome: string\r\n    readonly dataNascita: string\r\n    readonly cf: string\r\n    readonly email: string\r\n    readonly annoScolastico: number\r\n    readonly loading: boolean\r\n}\r\n\r\nexport default class AddNewStudent extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            nome: \"\",\r\n            cognome: \"\",\r\n            cf: \"\",\r\n            annoScolastico: 1,\r\n            email: \"\",\r\n            dataNascita: \"\",\r\n            loading: false\r\n        }\r\n    }\r\n\r\n    changeNome = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nome\r\n        })\r\n    }\r\n\r\n    changeCognome = (event: any) => {\r\n        let cognome = event.target.value\r\n\r\n        this.setState({\r\n            cognome\r\n        })\r\n    }\r\n\r\n    changeEmail = (event: any) => {\r\n        let email = event.target.value.trim()\r\n\r\n        this.setState({\r\n            email\r\n        })\r\n    }\r\n    \r\n    changeData = (data: string) => {\r\n        this.setState({\r\n            dataNascita: data\r\n        })\r\n    }\r\n\r\n    changeAnnoScolastico = (event: any) => {\r\n        let annoS = event.target.value\r\n\r\n        this.setState({\r\n            annoScolastico: Number(annoS)\r\n        })\r\n    }\r\n\r\n    changeCF = (event: any) => {\r\n        let CF = event.target.value.trim()\r\n\r\n        this.setState({\r\n            cf: CF\r\n        })\r\n    }\r\n\r\n    aggiungiStudente = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { nome, cognome, dataNascita, cf, annoScolastico, email } = this.state\r\n\r\n        if(nome.trim() === \"\" || cognome.trim() === \"\" || dataNascita === \"\" || cf === \"\" || !annoScolastico || email === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(cf.length !== 16){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Codice Fiscale non valido.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        let students = [{\r\n            nome: nome.trim(),\r\n            cognome: cognome.trim(),\r\n            cf,\r\n            password: cf,\r\n            email,\r\n            annoFrequentazione: annoScolastico,\r\n            dataNascita: formattaData(dataNascita, true),\r\n            idCorso: this.props.corso\r\n        }]\r\n\r\n        this.toggleLoading()\r\n\r\n        askPassword(siteUrl+\"/api/studenti\", \"post\", {\r\n            studenti: students\r\n        }, (_: any) => {\r\n            this.toggleLoading()\r\n            message.success(\"Studente creato con successo!\")\r\n            routerHistory.push(adminRoute+\"/studenti\")\r\n        })\r\n\r\n    }\r\n\r\n    toggleLoading = () => {\r\n        this.setState({\r\n            loading: !this.state.loading\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { nome, cognome, cf, email, loading } = this.state\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-2 text-center\">Aggiungi un nuovo studente</h3>\r\n\r\n            <form onSubmit={this.aggiungiStudente}>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Nome</label>\r\n                        <input name=\"name\" type=\"text\" className=\"form-control\" value={nome} onChange={this.changeNome} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Cognome</label>\r\n                        <input name=\"surname\" type=\"text\" className=\"form-control\" value={cognome} onChange={this.changeCognome} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Anno frequentato</label>\r\n                        <select name=\"anno\" onChange={this.changeAnnoScolastico} className=\"custom-select\">\r\n                            <option value={1}>Primo anno</option>\r\n                            <option value={2}>Secondo anno</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Data di nascita</label>\r\n                        <DatePicker locale={locale} className=\"w-100 select-date\" onChange={(_, d2) => this.changeData(d2)} format=\"DD-MM-YYYY\" />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">E-mail</label>\r\n                        <input name=\"email\" type=\"email\" className=\"form-control\" value={email} onChange={this.changeEmail} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Codice Fiscale</label>\r\n                        <input name=\"cf\" type=\"text\" className=\"form-control\" maxLength={16} value={cf} onChange={this.changeCF} />\r\n                    </div>\r\n                </div>\r\n\r\n                <button type=\"submit\" className=\"btn btn-success text-uppercase w-100\" disabled={loading}>\r\n                    {\r\n                        loading && <Icon type=\"loading\" className=\"mr-2 loadable-btn\" spin />\r\n                    }\r\n                    Aggiungi studente</button>\r\n            </form>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { IPresenze } from \"../../models/IPresenze\"\r\nimport { Tooltip, Icon, Spin, Modal, Select, TimePicker } from \"antd\"\r\nimport { siteUrl, formatItalian, validateTime, convertFromUTC, getDateTime } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { askPassword } from \"../AskConferma\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\nimport moment from \"moment\"\r\n\r\nexport interface IProps{\r\n    readonly studente: IStudent\r\n    reloadTotali(): void\r\n}\r\nexport interface IState{\r\n    readonly presenze: IPresenze[]\r\n    readonly editingList: IPresenze[]\r\n    readonly filter: string\r\n}\r\n\r\nexport default class PresenzeTable extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            presenze: null,\r\n            editingList: [],\r\n            filter: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        const { studente } = this.props\r\n\r\n        Axios.get(siteUrl+\"/api/studenti/getdetailedpresences/\"+studente.idStudente).then(response => {\r\n\r\n            let presenze = response.data as IPresenze[]\r\n\r\n            this.setState({\r\n                presenze: presenze.map(p => {\r\n                    p.ingresso = convertFromUTC(p.ingresso)\r\n                    p.uscita = getDateTime(p.uscita) === \"00:00\" ? \"Non firmata\" : convertFromUTC(p.uscita)\r\n\r\n                    return p\r\n                })\r\n            })\r\n        })\r\n    }\r\n\r\n    changeEntrata = (entrata: string, idPresenza: number) => {\r\n        let presenze = this.state.editingList.map(p => {\r\n            if(p.idPresenza === idPresenza)\r\n                p.ingresso = entrata\r\n\r\n            return p\r\n        }) \r\n\r\n        this.setState({\r\n            editingList: presenze\r\n        })\r\n    }\r\n\r\n    changeUscita = (uscita: string, idPresenza: number) => {\r\n        let presenze = this.state.editingList.map(p => {\r\n            if(p.idPresenza === idPresenza)\r\n                p.uscita = uscita\r\n\r\n            return p\r\n        }) \r\n\r\n        this.setState({\r\n            editingList: presenze\r\n        })\r\n    }\r\n\r\n    startTimeEdit = (p: IPresenze) => {\r\n        this.setState({\r\n            editingList: this.state.editingList.concat(p)\r\n        })\r\n    }\r\n\r\n    animateTds = (td1: HTMLElement, td2: HTMLElement) => {\r\n        td1.classList.add(\"edited\")\r\n        td2.classList.add(\"edited\")\r\n\r\n        setTimeout(() => {\r\n            td1.classList.remove(\"edited\")\r\n            td2.classList.remove(\"edited\")\r\n        }, 1000)\r\n    }\r\n\r\n    confirmEdit = (id: number, td1: HTMLElement, td2: HTMLElement) => {\r\n        const { presenze, editingList } = this.state,\r\n        presenza = editingList.find(p => p.idPresenza === id)\r\n\r\n        if(!validateTime(presenza.ingresso) || !validateTime(presenza.uscita)){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Orari non validi. (ore:minuti)\",\r\n                maskClosable: true\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        let data = new Date()\r\n\r\n        askPassword(siteUrl+\"/api/presenze/\" + id, \"put\", {\r\n            idPresenza: presenza.idPresenza,\r\n            idStudente: presenza.idStudente,\r\n            ingresso: new Date(`${data.getFullYear()}-${data.getMonth() + 1}-${data.getDate()} ${presenza.ingresso}`),\r\n            uscita: new Date(`${data.getFullYear()}-${data.getMonth() + 1}-${data.getDate()} ${presenza.uscita}`),\r\n            idLezione: presenza.idLezione\r\n        }, (response: any) => {\r\n            let output = response.data\r\n\r\n            if(output.trim() === \"success\"){\r\n                let newPresenze = presenze.map(p => {\r\n                    if(p.idPresenza === id){\r\n                        return presenza\r\n                    }\r\n\r\n                    return p\r\n                })\r\n\r\n                this.setState({\r\n                    presenze: newPresenze,\r\n                    editingList: editingList.filter(p => p.idPresenza !== presenza.idPresenza)\r\n                })\r\n\r\n                this.animateTds(td1, td2)\r\n                this.props.reloadTotali()\r\n            }else{\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: output\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    getCategorie = () => {\r\n        const { presenze } = this.state \r\n        let categorie: string[] = []\r\n\r\n        presenze.forEach(p => {\r\n            if(categorie.indexOf(p.lezione) === -1)\r\n                categorie.push(p.lezione)\r\n        })\r\n\r\n        return categorie\r\n    }\r\n\r\n    changeFilter = (filter: string) => {\r\n        this.setState({\r\n            filter: filter === \"\" ? null : filter\r\n        })\r\n    }\r\n\r\n    annullaModifica = (presenza: IPresenze) => {\r\n        this.setState({\r\n            editingList: this.state.editingList.filter(p => p.idPresenza !== presenza.idPresenza)\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { presenze, editingList, filter } = this.state,\r\n        { studente } = this.props,\r\n        { Option } = Select\r\n\r\n        if(!presenze){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div>\r\n                <Spin indicator={icon} className=\"mt-3\" />\r\n            </div>\r\n        }\r\n\r\n        let presences = filter ? presenze.filter(p => p.lezione.toLowerCase() === filter.toLowerCase()) : presenze\r\n\r\n        return <div className=\"mt-3\">\r\n\r\n            <h3 className=\"d-inline-block\">Presenze dello studente</h3>\r\n\r\n            <div className=\"float-right\">\r\n                <label className=\"d-inline-block text-secondary mr-2\">Filtra per materia: </label>\r\n                <Select defaultValue=\"\" style={{ width: 150 }} onChange={this.changeFilter} showSearch>\r\n                    <Option value=\"\">Nessuna</Option>\r\n                    {\r\n                        this.getCategorie().map(l =>{\r\n                            return <Option value={l}>{l}</Option>\r\n                        })\r\n                    }\r\n                </Select>\r\n            </div>\r\n            \r\n            <div className=\"clearfix\"></div>\r\n\r\n            <table className=\"table table-bordered text-center\">\r\n                <tbody>\r\n                    <tr>\r\n                        <th>Giorno</th>\r\n                        <th>Entrata</th>\r\n                        <th>Uscita</th>\r\n                        <th>Lezione</th>\r\n                        {\r\n                            !studente.promosso && <th style={{ width: \"20%\" }}>Azioni</th>\r\n                        }\r\n                    </tr>\r\n\r\n                    {\r\n                        presences.map(p => {\r\n                            let presenzaEdit = editingList.find(pre => pre.idPresenza === p.idPresenza),\r\n                            td1: HTMLElement,\r\n                            td2: HTMLElement\r\n\r\n                            return <tr>\r\n                                <td style={{maxWidth: 0}} className=\"text-truncate\">{formatItalian(p.data)}</td>\r\n                                <td style={{maxWidth: 0}} className=\"text-truncate\" ref={r => td1 = r}>\r\n                                    {\r\n                                        presenzaEdit ? <TimePicker defaultValue={moment(p.ingresso, 'HH:mm')} format='HH:mm' onChange={(_, ingresso) => this.changeEntrata(ingresso, p.idPresenza)} minuteStep={10} placeholder=\"Seleziona una data\" /> : <span>{p.ingresso}</span>\r\n                                    }\r\n                                </td>\r\n                                <td style={{maxWidth: 0}} className=\"text-truncate\" ref={r => td2 = r}>\r\n                                    {\r\n                                        presenzaEdit ? <TimePicker defaultValue={moment(p.uscita, 'HH:mm')} format='HH:mm' onChange={(_, uscita) => this.changeUscita(uscita, p.idPresenza)} minuteStep={10} placeholder=\"Seleziona una data\" /> : <span>{p.uscita}</span>\r\n                                    }\r\n                                </td>\r\n                                <Tooltip title={p.lezione}>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{p.lezione}</td>\r\n                                </Tooltip>\r\n                                {\r\n                                    !studente.promosso && <td>\r\n                                        {\r\n                                            presenzaEdit ? <div>\r\n                                                <Tooltip title=\"Annulla\">\r\n                                                    <button type=\"button\" className=\"btn btn-danger circle-btn\" onClick={() => this.annullaModifica(p)} >\r\n                                                        <i className=\"fa fa-times\"></i>\r\n                                                    </button>\r\n                                                </Tooltip>\r\n\r\n                                                <Tooltip title=\"Conferma modifiche\">\r\n                                                    <button type=\"button\" className=\"btn btn-success circle-btn ml-2\" onClick={() => this.confirmEdit(p.idPresenza, td1, td2)} >\r\n                                                        <i className=\"fa fa-check\"></i>\r\n                                                    </button>\r\n                                                </Tooltip>\r\n                                            </div> : <Tooltip title=\"Modifica orari\">\r\n                                                <button type=\"button\" className=\"btn btn-orange circle-btn\" onClick={() => this.startTimeEdit(p)}>\r\n                                                    <i className=\"fa fa-user-edit\"></i>\r\n                                                </button>\r\n                                            </Tooltip>\r\n                                        }\r\n                                    </td>\r\n                                }\r\n                            </tr>\r\n                        })\r\n                    }\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport Axios from \"axios\"\r\nimport { Modal, Spin, Icon, Tooltip, Button } from \"antd\"\r\nimport { IStage } from \"../../models/IStage\"\r\nimport { siteUrl, formatItalian, convertFromUTC } from \"../../utilities\"\r\nimport { CSVLink } from \"react-csv\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\n\r\nexport interface IProps{\r\n    readonly studente: IStudent\r\n    readonly toggleModal: () => void\r\n    readonly show: boolean\r\n}\r\nexport interface IState{\r\n    readonly oreList: IStage[]\r\n}\r\n\r\nexport default class StudentStage extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            oreList: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Axios.get(siteUrl+\"/api/studenti/getorestage/\"+this.props.studente.idStudente).then(response => {\r\n            let data = response.data,\r\n            oreList = data.map((o: any) => {\r\n                o.data = formatItalian(o.data)\r\n                o.oraInizio = convertFromUTC(o.oraInizio + \"Z\")\r\n                o.oraFine = convertFromUTC(o.oraFine + \"Z\")\r\n\r\n                return o as IStage\r\n            })\r\n\r\n            this.setState({\r\n                oreList\r\n            })\r\n        })\r\n    }\r\n\r\n    render = () => {\r\n        const { oreList } = this.state,\r\n        { toggleModal, show, studente } = this.props,\r\n        icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n        return <Modal visible={show} title=\"Ore di stage svolte\" onCancel={toggleModal} width=\"60%\" footer={[\r\n            <Button type=\"primary\" disabled={!oreList || oreList.length === 0}>\r\n                <CSVLink data={oreList ? oreList.map(o => Object.values(o)) : null} filename={\"oreStage\"+studente.nome+studente.cognome+\".csv\"}>\r\n                    <i className=\"far fa-arrow-to-bottom mr-2\"></i> Scarica CSV\r\n                </CSVLink>\r\n            </Button>,\r\n            <Button onClick={toggleModal}>Chiudi</Button>\r\n        ]}>\r\n            {\r\n                !oreList ? <div className=\"text-center\">\r\n                    <Spin indicator={icon} />\r\n                </div> : <div>\r\n                    {\r\n                        !oreList.length ? <div className=\"text-center\">Ore stage non segnate.</div> : <table className=\"table table-bordered text-center\">\r\n                            <tbody>\r\n                                <tr>\r\n                                    <th style={{width: \"15%\"}}>Data</th>\r\n                                    <th style={{width: \"25%\"}}>Descrizione</th>\r\n                                    <th>Inizio</th>\r\n                                    <th>Fine</th>\r\n                                    <th>Ore svolte</th>\r\n                                </tr>\r\n\r\n                                {\r\n                                    oreList.map(s => {        \r\n                                        return <tr>\r\n                                            <td>{s.data}</td>\r\n                                            <Tooltip title={s.argomento}>\r\n                                                <td style={{maxWidth: 0}} className=\"text-truncate\">{s.argomento}</td>\r\n                                            </Tooltip>\r\n                                            <td style={{maxWidth: 0}} className=\"text-truncate\">{s.oraInizio}</td>\r\n                                            <td style={{maxWidth: 0}} className=\"text-truncate\">{s.oraFine}</td>\r\n                                            <td style={{maxWidth: 0}} className=\"text-truncate\">{s.totaleRelativo}</td>\r\n                                        </tr>\r\n                                    })\r\n                                }\r\n                            </tbody>\r\n                        </table>\r\n                    }\r\n                </div>\r\n            }\r\n        </Modal>\r\n    }\r\n}","import React from \"react\"\r\nimport { RouteComponentProps } from \"react-router\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\nimport { routerHistory } from \"../..\"\r\nimport { Icon, Spin, Progress, Statistic, Modal, Button } from \"antd\"\r\nimport PresenzeTable from \"./PresenzeTable\"\r\nimport Axios from \"axios\"\r\nimport { formatItalian, siteUrl, adminRoute, avocadoUrl } from \"../../utilities\"\r\nimport QRCode from \"qrcode.react\"\r\nimport StudentStage from \"./StudentStage\"\r\n\r\nexport interface IRouteParams{\r\n    readonly id: string\r\n}\r\nexport interface IProps extends RouteComponentProps<IRouteParams>{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly student: IStudent\r\n    readonly totPresenze: number\r\n    readonly oreTotali: number\r\n    readonly modal: boolean\r\n    readonly showStage: boolean\r\n}\r\n\r\nexport default class StudentDetails extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            student: null,\r\n            totPresenze: null,\r\n            oreTotali: null,\r\n            modal: false,\r\n            showStage: false\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let id = Number(this.props.match.params.id)\r\n\r\n        if(isNaN(id))\r\n            routerHistory.push(adminRoute)\r\n\r\n        Axios.get(siteUrl+\"/api/studenti/getstudentibyid/\" + id).then(response => {\r\n            this.setState({\r\n                student: response.data as IStudent\r\n            })\r\n        })\r\n\r\n        Axios.get(siteUrl+\"/api/studenti/gettotaleorelezioni/\" + id).then(response => {\r\n            this.setState({\r\n                oreTotali: response.data as number\r\n            })\r\n        })\r\n\r\n        this.loadTotali()\r\n    }\r\n\r\n    loadTotali = () => {\r\n        this.setState({\r\n            totPresenze: null\r\n        })\r\n\r\n        Axios.get(siteUrl+\"/api/studenti/gethoursamount/\" + this.props.match.params.id).then(response => {\r\n            this.setState({\r\n                totPresenze: response.data as number\r\n            })\r\n        })\r\n    }\r\n\r\n    toggleModal = () => {\r\n        this.setState({\r\n            modal: !this.state.modal\r\n        })\r\n    }\r\n\r\n    downloadQR = () => {\r\n        const { student } = this.state,\r\n        canvas = document.getElementById(\"qr-code-image\") as any,\r\n        pngUrl = canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\")\r\n        let downloadLink = document.createElement(\"a\")\r\n        \r\n        downloadLink.href = pngUrl\r\n        downloadLink.download = `qrcode${student.nome}${student.cognome}.png`\r\n        document.body.appendChild(downloadLink)\r\n        downloadLink.click()\r\n        document.body.removeChild(downloadLink)\r\n    }\r\n\r\n    toggleStage = () => {\r\n        this.setState({\r\n            showStage: !this.state.showStage\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { student, totPresenze, oreTotali, modal, showStage } = this.state\r\n        \r\n        if(!student){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        let perc = student.frequenza !== null ? Math.round(100 * totPresenze / oreTotali) : null,\r\n        color = perc >= 80 ? \"var(--success)\" : \"var(--danger)\"\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <div className=\"row mx-0\">\r\n                <div className=\"col-12 col-md-6 pl-md-0 mb-2 mb-md-0\">\r\n                    <div className=\"p-3 bg-white border rounded\">\r\n                        <span className=\"border-text\">\r\n                            {\r\n                                student.ritirato ? \"Ritirato: \" + formatItalian(student.dataRitiro) : student.annoFrequentazione === 1 ? \"Primo anno\" : \"Secondo anno\"\r\n                            }\r\n                        </span>\r\n                        <h4 className=\"text-uppercase mb-2 text-truncate\">{student.nome} {student.cognome}</h4>\r\n                        <p className=\"mb-0\"><strong>Data di nascita</strong>: {formatItalian(student.dataNascita)}</p>\r\n                        <p className=\"mb-0\"><strong>E-mail</strong>: {student.email}</p>\r\n                        <Button onClick={this.toggleModal} className=\"float-right\" type=\"link\">\r\n                            Mostra codice QR\r\n                        </Button>\r\n                        <div className=\"clearfix\"></div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-12 col-md-6 pr-md-0\">\r\n                    <div className=\"p-3 bg-white border rounded\">\r\n                        {\r\n                            perc !== null ? <Progress type=\"circle\" percent={perc} width={80} className=\"float-left mr-3\" strokeColor={color} format={percent => `${percent}%`}  /> : <Spin indicator={<Icon type=\"loading\" spin />} />\r\n                        }\r\n\r\n                        {\r\n                            oreTotali !== null && totPresenze !== null ? <Statistic title=\"Presenze totali (ore)\" value={totPresenze} suffix={\"/ \"+oreTotali} decimalSeparator=\",\" groupSeparator=\".\" /> : <Spin indicator={<Icon type=\"loading\" spin />} />\r\n                        }\r\n\r\n                        <Button onClick={this.toggleStage} className=\"float-right mt-3\" type=\"link\">\r\n                            Mostra ore di stage\r\n                        </Button>\r\n                        \r\n                        <div className=\"clearfix\"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <PresenzeTable studente={student} reloadTotali={this.loadTotali} />\r\n            \r\n            <Modal visible={modal} maskClosable centered title={\r\n                <span>\r\n                    <i className=\"far fa-qrcode fa-fw fa-lg text-primary mr-2\"></i>Codice QR dello studente\r\n                </span>\r\n            } onCancel={this.toggleModal} width={350} onOk={this.downloadQR}\r\n            footer={[\r\n                <Button type=\"primary\" onClick={this.downloadQR}>\r\n                    <i className=\"far fa-arrow-to-bottom mr-2\"></i> Salva codice\r\n                </Button>,\r\n                <Button type=\"default\" onClick={this.toggleModal}>Chiudi</Button>\r\n            ]}>\r\n                <div className=\"text-center\">\r\n                    <p>Salva il codice sottostante e condividilo con <strong>{student.nome} {student.cognome}.</strong></p>\r\n                    <div className=\"my-2\">\r\n                        <QRCode id=\"qr-code-image\" value={student.codice} size={200} imageSettings={{ src: avocadoUrl, height: 50, width: 50, excavate: true }} />\r\n                    </div>\r\n                </div>\r\n            </Modal>\r\n\r\n            <StudentStage studente={student} toggleModal={this.toggleStage} show={showStage} />\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { IDocente } from \"../../models/IDocente\"\r\nimport { routerHistory } from \"../..\"\r\nimport { Modal, Tooltip, Spin, Icon, Switch, message } from \"antd\"\r\nimport Axios from \"axios\"\r\nimport { siteUrl, adminRoute } from \"../../utilities\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IProps{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly docenti: IDocente[]\r\n    readonly showAll: boolean\r\n}\r\n\r\nexport default class DocentiList extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            docenti: null,\r\n            showAll: false\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Axios.get(siteUrl+\"/api/docenti\").then(response => {\r\n            this.setState({\r\n                docenti: response.data as IDocente[]\r\n            })\r\n        })\r\n    }\r\n\r\n    switchList = () => {\r\n        this.setState({\r\n            showAll: !this.state.showAll\r\n        })\r\n    }\r\n\r\n    showDeleteConfirm = (docente: IDocente) => {\r\n        Modal.confirm({\r\n            title: `ATTENZIONE: si sta per ritirare un docente (${docente.nome} ${docente.cognome})`,\r\n            content: \"I dati identificativi del docente, le lezioni e le presenze verranno comunque mantenuti, ma il docente verrà ritirato da tutti i corsi in cui insegna. In seguito sarà possibile reintegrarlo nel corso se necessario.\",\r\n            okText: \"Confermo\",\r\n            okType: \"danger\",\r\n            cancelText: \"Annulla\",\r\n            onOk: () => this.ritiraOAnnulla(docente.idDocente, \"Docente ritirato con successo!\")\r\n        })\r\n    }\r\n\r\n    ritiraOAnnulla = (idDocente: number, msg: string) => {\r\n        askPassword(siteUrl+\"/api/docenti/ritiradocente\", \"put\", {\r\n            idDocente\r\n        }, (response: any) => {\r\n\r\n            let docenti = response.data as IDocente[]\r\n\r\n            this.setState({\r\n                docenti\r\n            })\r\n\r\n            message.success(msg)\r\n        }, () => {\r\n            this.setState({\r\n                docenti: null\r\n            })\r\n        })\r\n    }\r\n\r\n    sortbyId = (a: IDocente, b: IDocente) => { \r\n        if(a.idDocente > b.idDocente)\r\n            return 1\r\n        if(a.idDocente < b.idDocente)\r\n            return -1\r\n\r\n        return 0\r\n    }\r\n\r\n    backRetire = (doc: IDocente) => {\r\n        Modal.confirm({\r\n            title: `${doc.nome} ${doc.cognome}`,\r\n            content: \"Questo docente verrà reintegrato all'interno del corso.\",\r\n            okText: \"Confermo\",\r\n            okType: \"danger\",\r\n            cancelText: \"Annulla\",\r\n            onOk: () => this.ritiraOAnnulla(doc.idDocente, \"Docente reintegrato con successo!\")\r\n        })\r\n    }\r\n\r\n    isInCorso = (doc: IDocente) => {\r\n        return doc.corsi.indexOf(this.props.corso) !== -1\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { docenti, showAll } = this.state\r\n\r\n        if(!docenti){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        let lista = showAll ? docenti : docenti.filter(d => this.isInCorso(d)),\r\n        docs = lista.sort(this.sortbyId).sort((a, _) => a.ritirato ? 0 : -1)\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-3 text-center\">Docenti del corso</h3>\r\n\r\n            <label className=\"pointer\" style={{ transform: \"translateY(50%)\" }}>\r\n                <Switch checked={!showAll} onChange={this.switchList} className=\"mr-1 align-top\" /> Mostra solo i docenti del mio corso\r\n            </label>\r\n\r\n            <button className=\"btn btn-success float-right mb-3\" type=\"button\" onClick={() => routerHistory.push(adminRoute+\"/docenti/new\")}>\r\n                <i className=\"fal fa-plus fa-fw\"></i> Aggiungi docente\r\n            </button>\r\n\r\n            <table className=\"table table-bordered text-center\">\r\n                \r\n                    <tbody>\r\n                        <tr>\r\n                            <th style={{width: \"35%\"}}>Docente</th>\r\n                            <th style={{width: \"15%\"}}>Ore 1° anno</th>\r\n                            <th style={{width: \"15%\"}}>Ore 2° anno</th>\r\n                            <th style={{width: \"20%\"}}>Azioni</th>\r\n                        </tr>\r\n\r\n                        {\r\n                            docs.map(d => {   \r\n                                let bg = d.ritirato ? \"light font-italic\" : !this.isInCorso(d) ? \"transblue\" :\"white\"\r\n\r\n                                return <tr className={\"bg-\"+bg}>\r\n                                    <Tooltip title={d.nome + \" \" + d.cognome}>\r\n                                        <td style={{maxWidth: 0}} className=\"text-truncate\">{d.nome} {d.cognome}</td>\r\n                                    </Tooltip>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{d.monteOre.orePrimo}</td>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{d.monteOre.oreSecondo}</td>\r\n                                    <td>\r\n                                        <Tooltip title=\"Dettagli\">\r\n                                            <button type=\"button\" className=\"btn btn-info circle-btn\" onClick={() => routerHistory.push(adminRoute+\"/docenti/\" + d.idDocente)}>\r\n                                                <i className=\"fa fa-info\"></i>\r\n                                            </button>\r\n                                        </Tooltip>\r\n\r\n                                        {\r\n                                            !d.ritirato && <Tooltip title=\"Modifica\">\r\n                                                <button type=\"button\" className=\"btn btn-warning text-white circle-btn ml-2\" onClick={() => routerHistory.push(adminRoute+\"/docenti/edit/\" + d.idDocente)}>\r\n                                                    <i className=\"fa fa-pen\"></i>\r\n                                                </button>\r\n                                            </Tooltip>\r\n                                        }\r\n                                        \r\n                                        {\r\n                                            !d.ritirato && <Tooltip title=\"Segna come ritirato\">\r\n                                                <button type=\"button\" className=\"btn btn-danger circle-btn ml-2\" onClick={() => this.showDeleteConfirm(d)}>\r\n                                                    <i className=\"fa fa-user-times\"></i>\r\n                                                </button>\r\n                                            </Tooltip>\r\n                                        }\r\n\r\n                                        {\r\n                                            d.ritirato && <Tooltip title=\"Reintegra nel corso\">\r\n                                                <button type=\"button\" className=\"btn btn-danger circle-btn ml-2\" onClick={() => this.backRetire(d)}>\r\n                                                    <i className=\"fa fa-reply\"></i>\r\n                                                </button>\r\n                                            </Tooltip>\r\n                                        }\r\n                                    </td>\r\n                                </tr>\r\n                            })\r\n                        }\r\n                    </tbody>\r\n            </table>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, message, Icon, Spin, Checkbox } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { siteUrl, adminRoute } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { IMateria } from \"../../models/IMateria\"\r\nimport { ICorso } from \"../../models/ICorso\"\r\nimport { Cipher } from \"../../models/Cipher\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IProps{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly nome: string\r\n    readonly cognome: string\r\n    readonly CF: string\r\n    readonly email: string\r\n    readonly materie: IMateria[]\r\n    readonly corsi: ICorso[]\r\n    readonly materieSel: number[]\r\n    readonly corsiSel: number[]\r\n    readonly loading: boolean\r\n}\r\n\r\nexport default class AddNewDocente extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            nome: \"\",\r\n            cognome: \"\",\r\n            CF: \"\",\r\n            email: \"\",\r\n            corsi: null,\r\n            materie: null,\r\n            corsiSel: [],\r\n            materieSel: [],\r\n            loading: false\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Axios.get(siteUrl+\"/api/corsi\").then(response => {\r\n            let corsi = response.data as ICorso[]\r\n\r\n            this.setState({\r\n                corsi\r\n            })\r\n        })\r\n\r\n        Axios.get(siteUrl+\"/api/materie/getmateriebycorso/\"+this.props.corso).then(response => {\r\n            let materie = response.data as IMateria[]\r\n\r\n            this.setState({\r\n                materie\r\n            })\r\n        })\r\n    }\r\n\r\n    changeNome = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nome\r\n        })\r\n    }\r\n\r\n    changeEmail = (event: any) => {\r\n        let email = event.target.value.trim()\r\n\r\n        this.setState({\r\n            email\r\n        })\r\n    }\r\n\r\n    changeCognome = (event: any) => {\r\n        let cognome = event.target.value\r\n\r\n        this.setState({\r\n            cognome\r\n        })\r\n    }\r\n\r\n    changeCF = (event: any) => {\r\n        let CF = event.target.value.trim()\r\n\r\n        this.setState({\r\n            CF\r\n        })\r\n    }\r\n\r\n    aggiungiDocente = (e: any) => {\r\n        e.preventDefault()\r\n        \r\n        const { nome, cognome, CF, email, corsiSel, materieSel } = this.state\r\n\r\n        if(nome.trim() === \"\" || cognome.trim() === \"\" || CF === \"\" || email === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(CF.length !== 16){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Codice Fiscale non valido.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(!materieSel.length){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Scegliere almeno una materia.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(!corsiSel.length){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Scegliere almeno un corso.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        let cipher = new Cipher(),\r\n        password = cipher.encode(CF)\r\n\r\n        this.toggleLoading()\r\n\r\n        askPassword(siteUrl+\"/api/docenti\", \"post\", {\r\n            docente: {\r\n                nome: nome.trim(),\r\n                cognome: cognome.trim(),\r\n                cf: CF,\r\n                password,\r\n                email,\r\n                tenere: corsiSel.map(c => { return { idCorso: c, idDocente: 0 } }),\r\n                insegnare: materieSel.map(m => { return { idMateria: m, idDocente: 0 } }),\r\n            }\r\n        }, (_: any) => {\r\n            this.toggleLoading()\r\n            message.success(\"Docente creato con successo!\")\r\n            routerHistory.push(adminRoute+\"/docenti\")\r\n        })\r\n    }\r\n\r\n    switchMateria = (materiaId: number) => {\r\n        let find = this.state.materieSel.find(m => m === materiaId),\r\n        newList = find ? this.state.materieSel.filter(m => m !== materiaId) : this.state.materieSel.concat(materiaId)\r\n\r\n        this.setState({\r\n            materieSel: newList\r\n        })\r\n    }\r\n\r\n    switchCorso = (corsoId: number) => {\r\n        let find = this.state.corsiSel.find(m => m === corsoId),\r\n        newList = find ? this.state.corsiSel.filter(m => m !== corsoId) : this.state.corsiSel.concat(corsoId)\r\n\r\n        this.setState({\r\n            corsiSel: newList\r\n        })\r\n    }\r\n\r\n    toggleLoading = () => {\r\n        this.setState({\r\n            loading: !this.state.loading\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { nome, cognome, CF, email, materie, materieSel, corsi, corsiSel, loading } = this.state\r\n\r\n        if(!materie || !corsi){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        if(!materie.length){\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                È necessario creare almeno una materia per poter inserire un nuovo docente.\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-2 text-center\">Aggiungi un nuovo docente</h3>\r\n\r\n            <form onSubmit={this.aggiungiDocente}>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Nome</label>\r\n                        <input name=\"name\" type=\"text\" className=\"form-control\" value={nome} onChange={this.changeNome} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Cognome</label>\r\n                        <input name=\"surname\" type=\"text\" className=\"form-control\" value={cognome} onChange={this.changeCognome} />\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">E-mail</label>\r\n                        <input name=\"email\" type=\"email\" className=\"form-control\" value={email} onChange={this.changeEmail} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Codice Fiscale</label>\r\n                        <input name=\"cf\" type=\"text\" className=\"form-control\" maxLength={16} value={CF} onChange={this.changeCF} />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Materie insegnate dal docente</label>\r\n                        <div className=\"multiselect form-control p-0\">\r\n                            {\r\n                                materie.map(m => {\r\n                                    let find = materieSel.find(f => f === m.idMateria),\r\n                                    checked = find ? true : false,\r\n                                    classname = checked ? \"checked\" : \"\"\r\n\r\n                                    return <label className={\"option \" + classname}>\r\n                                        <Checkbox className=\"mr-2\" onChange={() => this.switchMateria(m.idMateria)} checked={checked} /> {m.nome}\r\n                                    </label>\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Corsi del docente</label>\r\n                        <div className=\"multiselect form-control p-0\">\r\n                            {\r\n                                corsi.map(m => {\r\n                                    let find = corsiSel.find(f => f === m.idCorso),\r\n                                    checked = find ? true : false,\r\n                                    classname = checked ? \"checked\" : \"\"\r\n\r\n                                    return <label className={\"option \" + classname}>\r\n                                        <Checkbox className=\"mr-2\" onChange={() => this.switchCorso(m.idCorso)} checked={checked} /> {m.nome}\r\n                                    </label>\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <button type=\"submit\" className=\"btn btn-success text-uppercase w-100\" disabled={loading}>\r\n                    {\r\n                        loading && <Icon type=\"loading\" className=\"mr-2 loadable-btn\" spin />\r\n                    }\r\n                    Aggiungi docente\r\n                </button>\r\n            </form>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Tooltip, Icon, Spin, Modal, Select, TimePicker } from \"antd\"\r\nimport { siteUrl, formatItalian, validateTime, convertFromUTC, getDateTime } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { IPresenzaDocente } from \"../../models/IPresenzaDocente\"\r\nimport { askPassword } from \"../AskConferma\"\r\nimport moment from \"moment\"\r\n\r\nexport interface IProps{\r\n    readonly idDocente: number\r\n    readonly canEdit: boolean\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly presenze: IPresenzaDocente[]\r\n    readonly editingList: IPresenzaDocente[]\r\n    readonly filter: string\r\n}\r\n\r\nexport default class LezioniDocenteTable extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            presenze: null,\r\n            editingList: [],\r\n            filter: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        const { corso, idDocente } = this.props\r\n\r\n        Axios.get(siteUrl+\"/api/lezioni/getlezionidocente/\"+idDocente+\"/\"+corso).then(response => {\r\n            let presenze = response.data as IPresenzaDocente[]\r\n\r\n            this.setState({\r\n                presenze: presenze.map(p => {\r\n                    p.ingresso = convertFromUTC(p.ingresso)\r\n                    p.uscita = getDateTime(p.uscita) === \"00:00\" ? \"Non firmata\" : convertFromUTC(p.uscita)\r\n\r\n                    return p\r\n                })\r\n            })\r\n        })\r\n    }\r\n\r\n    changeEntrata = (entrata: string, idPresenza: number) => {\r\n        let presenze = this.state.editingList.map(p => {\r\n            if(p.idPresenza === idPresenza)\r\n                p.ingresso = entrata\r\n            \r\n            return p\r\n        })\r\n\r\n        this.setState({\r\n            editingList: presenze\r\n        })\r\n    }\r\n\r\n    changeUscita = (uscita: string, idPresenza: number) => {\r\n        let presenze = this.state.editingList.map(p => {\r\n            if(p.idPresenza === idPresenza)\r\n                p.uscita = uscita\r\n            \r\n            return p\r\n        })\r\n\r\n        this.setState({\r\n            editingList: presenze\r\n        })\r\n    }\r\n\r\n    startTimeEdit = (p: IPresenzaDocente) => {\r\n        this.setState({\r\n            editingList: this.state.editingList.concat(p)\r\n        })\r\n    }\r\n\r\n    animateTds = (td1: HTMLElement, td2: HTMLElement) => {\r\n        td1.classList.add(\"edited\")\r\n        td2.classList.add(\"edited\")\r\n\r\n        setTimeout(() => {\r\n            td1.classList.remove(\"edited\")\r\n            td2.classList.remove(\"edited\")\r\n        }, 1000)\r\n    }\r\n\r\n    confirmEdit = (id: number, td1: HTMLElement, td2: HTMLElement) => {\r\n        const { editingList, presenze } = this.state,\r\n        presenza = editingList.find(p => p.idPresenza === id)\r\n        \r\n        if(!validateTime(presenza.ingresso) || !validateTime(presenza.uscita)){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Orari non validi. (ore:minuti)\",\r\n                maskClosable: true\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        let data = new Date()\r\n\r\n        askPassword(siteUrl+\"/api/presenzedocente/\" + id, \"put\", {\r\n            idPresenza: id,\r\n            ingresso: new Date(`${data.getFullYear()}-${data.getMonth() + 1}-${data.getDate()} ${presenza.ingresso}`),\r\n            uscita: new Date(`${data.getFullYear()}-${data.getMonth() + 1}-${data.getDate()} ${presenza.uscita}`),\r\n            idDocente: presenza.idDocente,\r\n            idLezione: presenza.idLezione\r\n        }, (response: any) => {\r\n            let output = response.data\r\n\r\n            if(output.trim() === \"success\"){\r\n                let newPresenze = presenze.map(p => {\r\n                    if(p.idPresenza === id){\r\n                        return presenza\r\n                    }\r\n\r\n                    return p\r\n                })\r\n\r\n                this.setState({\r\n                    presenze: newPresenze,\r\n                    editingList: editingList.filter(p => p.idPresenza !== presenza.idPresenza)\r\n                })\r\n                \r\n                this.animateTds(td1, td2)\r\n            }else{\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: output\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    getCategorie = () => {\r\n        const { presenze } = this.state \r\n        let categorie: string[] = []\r\n\r\n        presenze.forEach(p => {\r\n            if(categorie.indexOf(p.lezione) === -1)\r\n                categorie.push(p.lezione)\r\n        })\r\n\r\n        return categorie\r\n    }\r\n\r\n    changeFilter = (filter: string) => {\r\n        this.setState({\r\n            filter: filter === \"\" ? null : filter\r\n        })\r\n    }\r\n\r\n    annullaModifica = (presenza: IPresenzaDocente) => {\r\n        this.setState({\r\n            editingList: this.state.editingList.filter(p => p.idPresenza !== presenza.idPresenza)\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { presenze, editingList, filter } = this.state,\r\n        { canEdit } = this.props,\r\n        { Option } = Select\r\n\r\n        if(!presenze){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div>\r\n                <Spin indicator={icon} className=\"mt-3\" />\r\n            </div>\r\n        }\r\n\r\n        let presences = filter ? presenze.filter(p => p.lezione.toLowerCase() === filter.toLowerCase()) : presenze\r\n\r\n        return <div className=\"mt-3\">\r\n            <h3 className=\"d-inline-block\">Lezioni tenute dal docente</h3>\r\n\r\n            <div className=\"float-right\">\r\n                <label className=\"d-inline-block text-secondary mr-2\">Filtra per materia: </label>\r\n                <Select defaultValue=\"\" style={{ width: 150 }} onChange={this.changeFilter} showSearch>\r\n                    <Option value=\"\">Nessuna</Option>\r\n                    {\r\n                        this.getCategorie().map(l =>{\r\n                            return <Option value={l}>{l}</Option>\r\n                        })\r\n                    }\r\n                </Select>\r\n            </div>\r\n\r\n            <div className=\"clearfix\"></div>\r\n\r\n            <table className=\"table table-bordered text-center\">\r\n                <tbody>\r\n                    <tr className=\"thead-light\">\r\n                        <th>Giorno</th>\r\n                        <th>Entrata</th>\r\n                        <th>Uscita</th>\r\n                        <th>Lezione</th>\r\n                        {\r\n                            canEdit && <th style={{ width: \"20%\" }}>Azioni</th>\r\n                        }\r\n                    </tr>\r\n\r\n                    {\r\n                        presences.map(p => {\r\n                            let editPresenza = editingList.find(pre => pre.idPresenza === p.idPresenza),\r\n                            td1: HTMLElement,\r\n                            td2: HTMLElement\r\n\r\n                            return <tr>\r\n                                <td style={{maxWidth: 0}} className=\"text-truncate\">{formatItalian(p.data)}</td>\r\n                                <td style={{maxWidth: 0}} className=\"text-truncate\" ref={r => td1 = r}>\r\n                                    {\r\n                                        editPresenza ? <TimePicker defaultValue={moment(p.ingresso, 'HH:mm')} format='HH:mm' onChange={(_, ingresso) => this.changeEntrata(ingresso, p.idPresenza)} minuteStep={10} placeholder=\"Seleziona una data\" /> : <span>{p.ingresso}</span>\r\n                                    }\r\n                                </td>\r\n                                <td style={{maxWidth: 0}} className=\"text-truncate\" ref={r => td2 = r}>\r\n                                    {\r\n                                        editPresenza ? <TimePicker defaultValue={moment(p.uscita, 'HH:mm')} format='HH:mm' onChange={(_, uscita) => this.changeUscita(uscita, p.idPresenza)} minuteStep={10} placeholder=\"Seleziona una data\" /> : <span>{p.uscita}</span>\r\n                                    }\r\n                                </td>\r\n                                <Tooltip title={p.lezione}>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{p.lezione}</td>\r\n                                </Tooltip>\r\n                                {\r\n                                    canEdit && <td>\r\n                                        {\r\n                                            editPresenza ? <div>\r\n                                                <Tooltip title=\"Annulla\">\r\n                                                    <button type=\"button\" className=\"btn btn-danger circle-btn\" onClick={() => this.annullaModifica(p)}>\r\n                                                        <i className=\"fa fa-times\"></i>\r\n                                                    </button>\r\n                                                </Tooltip>\r\n\r\n                                                <Tooltip title=\"Conferma modifiche\">\r\n                                                    <button type=\"button\" className=\"btn btn-success circle-btn ml-2\" onClick={() => this.confirmEdit(p.idPresenza, td1, td2)}>\r\n                                                        <i className=\"fa fa-check\"></i>\r\n                                                    </button>\r\n                                                </Tooltip>\r\n                                            </div> : <Tooltip title=\"Modifica orari\">\r\n                                                <button type=\"button\" className=\"btn btn-orange circle-btn\" onClick={() => this.startTimeEdit(p)}>\r\n                                                    <i className=\"fa fa-user-edit\"></i>\r\n                                                </button>\r\n                                            </Tooltip>\r\n                                        }\r\n                                        \r\n                                    </td>\r\n                                }\r\n                            </tr>\r\n                        })\r\n                    }\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { RouteComponentProps } from \"react-router\"\r\nimport { routerHistory } from \"../..\"\r\nimport { Icon, Spin, Modal, Button, Statistic } from \"antd\"\r\nimport Axios from \"axios\"\r\nimport { IDocente } from \"../../models/IDocente\"\r\nimport LezioniDocenteTable from \"./LezioniDocenteTable\"\r\nimport { siteUrl, adminRoute, avocadoUrl } from \"../../utilities\"\r\nimport { Cipher } from \"../../models/Cipher\"\r\nimport QRCode from \"qrcode.react\"\r\n\r\n\r\nexport interface IRouteParams{\r\n    readonly id: string\r\n}\r\nexport interface IProps extends RouteComponentProps<IRouteParams>{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly docente: IDocente\r\n    readonly modal: boolean\r\n}\r\n\r\nexport default class DocenteDetails extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            docente: null,\r\n            modal: false\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let id = Number(this.props.match.params.id)\r\n\r\n        if(isNaN(id))\r\n            routerHistory.push(adminRoute)\r\n\r\n        Axios.get(siteUrl+\"/api/docenti/getdocentibyid/\" + id).then(response => {\r\n            this.setState({\r\n                docente: response.data as IDocente\r\n            })\r\n        })\r\n    }\r\n\r\n    toggleModal = () => {\r\n        this.setState({\r\n            modal: !this.state.modal\r\n        })\r\n    }\r\n\r\n    downloadQR = () => {\r\n        const { docente } = this.state,\r\n        canvas = document.getElementById(\"qr-code-image\") as any,\r\n        pngUrl = canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\")\r\n        let downloadLink = document.createElement(\"a\")\r\n        \r\n        downloadLink.href = pngUrl\r\n        downloadLink.download = `qrcode${docente.nome}${docente.cognome}.png`\r\n        document.body.appendChild(downloadLink)\r\n        downloadLink.click()\r\n        document.body.removeChild(downloadLink)\r\n    }\r\n\r\n    getQRCode = () => {\r\n        const { docente } = this.state\r\n        let cipher = new Cipher(),\r\n        code = cipher.encode(docente.cf)\r\n\r\n        return code\r\n    }\r\n\r\n    isInCorso = (doc: IDocente) => {\r\n        return doc.corsi.indexOf(this.props.corso) !== -1\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { docente, modal } = this.state\r\n\r\n        if(!docente){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <div className=\"row mx-0\">\r\n                <div className=\"col-12 col-md-6 pl-md-0 mb-2 mb-md-0\">\r\n\r\n                    <div className=\"p-3 bg-white border rounded\">\r\n                        {\r\n                            docente.ritirato && <span className=\"border-text\">Ritirato</span>\r\n                        }\r\n\r\n                        <h4 className=\"text-uppercase mb-2 text-truncate\">{docente.nome} {docente.cognome}</h4>\r\n                        <p className=\"mb-0\"><strong>E-mail</strong>: {docente.email}</p>\r\n                        <Button onClick={this.toggleModal} className=\"float-right\" type=\"link\">\r\n                            Mostra codice QR\r\n                        </Button>\r\n                        <div className=\"clearfix\"></div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-3 pr-md-0\">\r\n                    <div className=\"p-3 bg-white border rounded text-center\" style={{ display: \"flex\", height: \"100%\", alignItems: \"center\", justifyContent: \"center\" }}>\r\n                        <Statistic title=\"Ore svolte\" value={docente.monteOre} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <LezioniDocenteTable idDocente={docente.idDocente} canEdit={this.isInCorso(docente)} corso={this.props.corso} />\r\n\r\n            <Modal visible={modal} maskClosable centered title={\r\n                <span>\r\n                    <i className=\"far fa-qrcode fa-fw fa-lg text-primary mr-2\"></i>Codice QR del docente\r\n                </span>\r\n            } onCancel={this.toggleModal} width={350} onOk={this.downloadQR}\r\n            footer={[\r\n                <Button type=\"primary\" onClick={this.downloadQR}>\r\n                    <i className=\"far fa-arrow-to-bottom mr-2\"></i> Salva codice\r\n                </Button>,\r\n                <Button type=\"default\" onClick={this.toggleModal}>Chiudi</Button>\r\n            ]}>\r\n                <div className=\"text-center\">\r\n                    <p>Salva il codice sottostante e condividilo con <strong>{docente.nome} {docente.cognome}.</strong></p>\r\n                    <div className=\"my-2\">\r\n                        <QRCode id=\"qr-code-image\" value={this.getQRCode()} size={200} imageSettings={{ src: avocadoUrl, height: 50, width: 50, excavate: true }} />\r\n                    </div>\r\n                </div>\r\n            </Modal>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, Icon, Spin, Checkbox, message } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { siteUrl, adminRoute } from \"../../utilities\"\r\nimport { IDocente } from \"../../models/IDocente\"\r\nimport Axios from \"axios\"\r\nimport { RouteComponentProps } from \"react-router-dom\"\r\nimport { IMateria } from \"../../models/IMateria\"\r\nimport { ICorso } from \"../../models/ICorso\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IRouteParams{\r\n    readonly id: string\r\n}\r\nexport interface IProps extends RouteComponentProps<IRouteParams>{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly docente: IDocente\r\n    readonly nome: string\r\n    readonly cognome: string\r\n    readonly CF: string\r\n    readonly email: string\r\n    readonly materie: IMateria[]\r\n    readonly corsi: ICorso[]\r\n    readonly materieSel: number[]\r\n    readonly corsiSel: number[]\r\n    readonly loading: boolean\r\n}\r\n\r\nexport default class EditDocente extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            docente: null,\r\n            nome: \"\",\r\n            cognome: \"\",\r\n            CF: \"\",\r\n            email: \"\",\r\n            materie: [],\r\n            materieSel: [],\r\n            corsi: [],\r\n            corsiSel: [],\r\n            loading: false\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let id = Number(this.props.match.params.id)\r\n\r\n        if(isNaN(id))\r\n            routerHistory.push(adminRoute)\r\n\r\n        Axios.get(siteUrl+\"/api/docenti/getdocentibyid/\" + id).then(response => {\r\n            let doc = response.data as IDocente\r\n\r\n            this.setState({\r\n                docente: doc,\r\n                nome: doc.nome,\r\n                cognome: doc.cognome,\r\n                CF: doc.cf,\r\n                email: doc.email,\r\n                materieSel: doc.materie && doc.materie.length ? doc.materie : [],\r\n                corsiSel: doc.corsi && doc.corsi.length ? doc.corsi : []\r\n            })\r\n        })\r\n        \r\n        Axios.get(siteUrl+\"/api/materie/getmateriebycorso/\"+this.props.corso).then(response => {\r\n            let materie = response.data as IMateria[]\r\n            \r\n            this.setState({\r\n                materie\r\n            })\r\n        })\r\n\r\n        Axios.get(siteUrl+\"/api/corsi\").then(response => {\r\n            let corsi = response.data as ICorso[]\r\n            \r\n            this.setState({\r\n                corsi\r\n            })\r\n        })\r\n    }\r\n\r\n    changeNome = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nome\r\n        })\r\n    }\r\n\r\n    changeEmail = (event: any) => {\r\n        let email = event.target.value.trim()\r\n\r\n        this.setState({\r\n            email\r\n        })\r\n    }\r\n\r\n    changeCognome = (event: any) => {\r\n        let cognome = event.target.value\r\n\r\n        this.setState({\r\n            cognome\r\n        })\r\n    }\r\n\r\n    changeCF = (event: any) => {\r\n        let CF = event.target.value.trim()\r\n\r\n        this.setState({\r\n            CF\r\n        })\r\n    }\r\n\r\n    modificaDocente = (e: any) => {\r\n        e.preventDefault()\r\n        \r\n        const { docente, nome, cognome, CF, email, corsiSel, materieSel } = this.state\r\n\r\n        if(nome.trim() === \"\" || cognome.trim() === \"\" || CF === \"\" || email === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(!materieSel.length){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Scegliere almeno una materia.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(!corsiSel.length){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Scegliere almeno un corso.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(CF.length !== 16){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Codice Fiscale non valido.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        this.toggleLoading()\r\n\r\n        askPassword(siteUrl+\"/api/docenti/\" + this.props.match.params.id, \"put\", {\r\n            docente: {\r\n                idDocente: parseInt(this.props.match.params.id),\r\n                nome: nome.trim(),\r\n                cognome: cognome.trim(),\r\n                email,\r\n                cf: CF,\r\n                tenere: corsiSel.map(c => { return { idCorso: c, idDocente: docente.idDocente } }),\r\n                insegnare: materieSel.map(m => { return { idMateria: m, idDocente: docente.idDocente } }),\r\n                ritirato: docente.ritirato\r\n            }\r\n        }, (_: any) => {\r\n            this.toggleLoading()\r\n            message.success(\"Docente modificato con successo!\")\r\n            routerHistory.push(adminRoute+\"/docenti\")\r\n        })\r\n    }\r\n\r\n    toggleLoading = () => {\r\n        this.setState({\r\n            loading: !this.state.loading\r\n        })\r\n    }\r\n\r\n    switchMateria = (materiaId: number) => {\r\n        let find = this.state.materieSel.find(m => m === materiaId),\r\n        newList = find ? this.state.materieSel.filter(m => m !== materiaId) : this.state.materieSel.concat(materiaId)\r\n\r\n        this.setState({\r\n            materieSel: newList\r\n        })\r\n    }\r\n\r\n    switchCorso = (corsoId: number) => {\r\n        let find = this.state.corsiSel.find(m => m === corsoId),\r\n        newList = find ? this.state.corsiSel.filter(m => m !== corsoId) : this.state.corsiSel.concat(corsoId)\r\n\r\n        this.setState({\r\n            corsiSel: newList\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { nome, cognome, CF, docente, email, materie, materieSel, corsi, corsiSel, loading } = this.state\r\n\r\n        if(!docente || !materie.length || !corsi.length){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-2 text-center\">Modifica di un docente</h3>\r\n\r\n            <form onSubmit={this.modificaDocente}>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Nome</label>\r\n                        <input name=\"name\" type=\"text\" className=\"form-control\" value={nome} onChange={this.changeNome} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Cognome</label>\r\n                        <input name=\"surname\" type=\"text\" className=\"form-control\" value={cognome} onChange={this.changeCognome} />\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">E-mail</label>\r\n                        <input name=\"email\" type=\"email\" className=\"form-control\" value={email} onChange={this.changeEmail} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Codice Fiscale</label>\r\n                        <input name=\"cf\" type=\"text\" className=\"form-control\" maxLength={16} value={CF} onChange={this.changeCF} />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Materie insegnate dal docente</label>\r\n                        <div className=\"multiselect form-control p-0\">\r\n                            {\r\n                                materie.map(m => {\r\n                                    let find = materieSel.find(f => f === m.idMateria),\r\n                                    checked = find ? true : false,\r\n                                    classname = checked ? \"checked\" : \"\"\r\n\r\n                                    return <label className={\"option \" + classname}>\r\n                                        <Checkbox className=\"mr-2\" onChange={() => this.switchMateria(m.idMateria)} checked={checked} /> {m.nome}\r\n                                    </label>\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Corsi del docente</label>\r\n                        <div className=\"multiselect form-control p-0\">\r\n                            {\r\n                                corsi.map(m => {\r\n                                    let find = corsiSel.find(f => f === m.idCorso),\r\n                                    checked = find ? true : false,\r\n                                    classname = checked ? \"checked\" : \"\"\r\n\r\n                                    return <label className={\"option \" + classname}>\r\n                                        <Checkbox className=\"mr-2\" onChange={() => this.switchCorso(m.idCorso)} checked={checked} /> {m.nome}\r\n                                    </label>\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <button type=\"submit\" className=\"btn btn-success text-uppercase w-100\" disabled={loading}>\r\n                    {\r\n                        loading && <Icon type=\"loading\" className=\"mr-2 loadable-btn\" spin />\r\n                    }\r\n                    Modifica docente\r\n                </button>\r\n            </form>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, Icon, Spin, message, DatePicker } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { siteUrl, formattaData, formatItalian, adminRoute } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { RouteComponentProps } from \"react-router-dom\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\nimport locale from \"antd/es/date-picker/locale/it_IT\"\r\nimport moment from \"moment\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IRouteParams{\r\n    readonly id: string\r\n}\r\nexport interface IProps extends RouteComponentProps<IRouteParams>{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly studente: IStudent\r\n    readonly nome: string\r\n    readonly cognome: string\r\n    readonly dataNascita: string\r\n    readonly CF: string\r\n    readonly email: string\r\n    readonly loading: boolean\r\n}\r\n\r\nexport default class EditStudente extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            studente: null,\r\n            nome: \"\",\r\n            cognome: \"\",\r\n            dataNascita: \"\",\r\n            CF: \"\",\r\n            email: \"\",\r\n            loading: false\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let id = Number(this.props.match.params.id)\r\n\r\n        if(isNaN(id))\r\n            routerHistory.push(adminRoute)\r\n\r\n        Axios.get(siteUrl+\"/api/studenti/getstudentibyid/\" + id).then(response => {\r\n            let stu = response.data as IStudent\r\n\r\n            this.setState({\r\n                studente: stu,\r\n                nome: stu.nome,\r\n                cognome: stu.cognome,\r\n                CF: stu.cf,\r\n                dataNascita: formatItalian(stu.dataNascita),\r\n                email: stu.email\r\n            })\r\n        })\r\n    }\r\n\r\n    changeNome = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nome\r\n        })\r\n    }\r\n\r\n    changeEmail = (event: any) => {\r\n        let email = event.target.value.trim()\r\n\r\n        this.setState({\r\n            email\r\n        })\r\n    }\r\n\r\n    changeCognome = (event: any) => {\r\n        let cognome = event.target.value\r\n\r\n        this.setState({\r\n            cognome\r\n        })\r\n    }\r\n\r\n    changeData = (data: string) => {\r\n        this.setState({\r\n            dataNascita: data\r\n        })\r\n    }\r\n\r\n    changeCF = (event: any) => {\r\n        let CF = event.target.value.trim()\r\n\r\n        this.setState({\r\n            CF\r\n        })\r\n    }\r\n\r\n    modificaStudente = (e: any) => {\r\n        e.preventDefault()\r\n        \r\n        const { nome, cognome, dataNascita, CF, email, studente } = this.state\r\n\r\n        if(nome.trim() === \"\" || cognome.trim() === \"\" || dataNascita === \"\" || CF === \"\" || email === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(CF.length !== 16){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Codice Fiscale non valido.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        this.toggleLoading()\r\n\r\n        askPassword(siteUrl+\"/api/studenti/\" + studente.idStudente, \"put\", {\r\n            studente: {\r\n                idStudente: studente.idStudente,\r\n                nome: nome.trim(),\r\n                cognome: cognome.trim(),\r\n                email,\r\n                cf: CF,\r\n                idCorso: this.props.corso,\r\n                annoFrequentazione: studente.annoFrequentazione,\r\n                dataNascita: formattaData(dataNascita, true),\r\n                ritirato: studente.ritirato,\r\n                promosso: studente.promosso\r\n            }\r\n        }, (_: any) => {\r\n            this.toggleLoading()\r\n            message.success(\"Studente modificato con successo!\")\r\n            routerHistory.push(adminRoute+\"/studenti\")\r\n        })\r\n        \r\n    }\r\n\r\n    toggleLoading = () => {\r\n        this.setState({\r\n            loading: !this.state.loading\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { nome, cognome, dataNascita, CF, studente, email, loading } = this.state\r\n\r\n        if(!studente){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-2 text-center\">Modifica di uno studente</h3>\r\n\r\n            <form onSubmit={this.modificaStudente}>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Nome</label>\r\n                        <input name=\"name\" type=\"text\" className=\"form-control\" value={nome} onChange={this.changeNome} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Cognome</label>\r\n                        <input name=\"surname\" type=\"text\" className=\"form-control\" value={cognome} onChange={this.changeCognome} />\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Data di nascita</label>\r\n                        <DatePicker locale={locale} className=\"w-100 select-date\" onChange={(_, d2) => this.changeData(d2)} format=\"DD-MM-YYYY\" defaultValue={moment(dataNascita, \"DD-MM-YYYY\")} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">E-mail</label>\r\n                        <input name=\"email\" type=\"email\" className=\"form-control\" value={email} onChange={this.changeEmail} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Codice Fiscale</label>\r\n                        <input name=\"cf\" type=\"text\" className=\"form-control\" maxLength={16} value={CF} onChange={this.changeCF} />\r\n                    </div>\r\n                </div>\r\n\r\n                <button type=\"submit\" className=\"btn btn-success text-uppercase w-100\" disabled={loading}>\r\n                    {\r\n                        loading && <Icon type=\"loading\" className=\"mr-2 loadable-btn\" spin />\r\n                    }\r\n                    Modifica studente\r\n                </button>\r\n            </form>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport Dragger from \"antd/lib/upload/Dragger\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\nimport { Modal, Tooltip, Icon, message } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { formattaData, capitalizeFirst, siteUrl, resizePopup, formatItalian, adminRoute } from \"../../utilities\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IProps{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly addList: IStudent[]\r\n    readonly fileContent: string\r\n    readonly fields: any\r\n    readonly loading: boolean\r\n}\r\n\r\nconst fields = [{\r\n    label: \"Nome\",\r\n    field: \"nome\"\r\n},{\r\n    label: \"Cognome\",\r\n    field: \"cognome\"\r\n},{\r\n    label: \"Codice Fiscale\",\r\n    field: \"cf\"\r\n},{\r\n    label: \"Data di nascita\",\r\n    field: \"dataNascita\"\r\n},{\r\n    label: \"E-mail\",\r\n    field: \"email\"\r\n}]\r\n\r\nexport default class StudentsImport extends React.PureComponent<IProps, IState>{\r\n    \r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            addList: [],\r\n            fileContent: \"\",\r\n            fields: {\r\n                nome: 0,\r\n                cognome: 0,\r\n                cf: 0,\r\n                dataNascita: 0,\r\n                email: 0,\r\n                annoFrequentazione: 1\r\n            },\r\n            loading: false\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        resizePopup()\r\n    }\r\n\r\n    splitCSV = (data: string) => {\r\n        let regex = /([\"'])(?:(?=(\\\\?))\\2.)*?\\1/g,\r\n        pieces = data.match(regex)\r\n\r\n        return pieces.map(p => { return p.replace(/[\"]/g, '') })\r\n    }\r\n\r\n    renderOptions = () => {\r\n        let rows = this.state.fileContent.split(\"\\n\"),\r\n        cells = this.splitCSV(rows[0]),\r\n        options = cells.map((c, i) => {\r\n            if(c === \"\")\r\n                return null\r\n\r\n            return <option value={i}>{c}</option>\r\n        })\r\n\r\n        return options\r\n    }\r\n\r\n    changeVarPos = (e: any, varName: string) => {\r\n        let value = e.target.value,\r\n        obj = this.state.fields\r\n\r\n        obj[varName] = value\r\n\r\n        this.setState({\r\n            fields: obj\r\n        })\r\n    }\r\n\r\n    readFile = (file: any) => {\r\n        const reader = new FileReader()\r\n\r\n        reader.onload = e => {\r\n            this.setState({\r\n                fileContent: String(e.target.result).trim()\r\n            })\r\n\r\n            Modal.info({\r\n                width: 500,\r\n                centered: true,\r\n                title: \"Selezionare i campi da abbinare\",\r\n                icon: <Icon type=\"api\" style={{ color: \"var(--success)\" }} />,\r\n                maskClosable: true,\r\n                content: <div style={{ marginLeft: -38 }}>\r\n                    <div className=\"row mt-3 px-0\">\r\n                        <div className=\"col-4\">\r\n                            <label className=\"mt-2\">Classe: </label>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                            <select className=\"custom-select pointer\" style={{ height: 35 }} onChange={(e) => this.changeVarPos(e, \"annoFrequentazione\")}>\r\n                                <option value=\"1\">Primo anno</option>\r\n                                <option value=\"2\">Secondo anno</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    {\r\n                        fields.map(f => {\r\n                            return <div className=\"row mt-3 px-0\">\r\n                                <div className=\"col-4\">\r\n                                    <label className=\"mt-2\">{f.label}: </label>\r\n                                </div>\r\n                                <div className=\"col\">\r\n                                    <select className=\"custom-select pointer\" style={{ height: 35 }} onChange={(e) => this.changeVarPos(e, f.field)}>\r\n                                        {this.renderOptions()}\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                        })\r\n                    }\r\n                </div>,\r\n                onOk: this.showImportPreview,\r\n                okText: \"Prosegui\"\r\n            })\r\n        }\r\n\r\n        reader.readAsText(file, \"ISO-8859-1\")\r\n\r\n        return false\r\n    }\r\n\r\n    showImportPreview = () => {\r\n        const { fileContent, fields} = this.state\r\n\r\n        let rows = fileContent.split(\"\\n\"),\r\n        list: IStudent[] = [],\r\n        popup = document.getElementById(\"popup\")\r\n\r\n        rows.forEach(r => {\r\n            let cells = this.splitCSV(r)\r\n\r\n            let student: IStudent = {\r\n                idCorso: this.props.corso,\r\n                nome: capitalizeFirst(cells[fields['nome']]),\r\n                cognome: capitalizeFirst(cells[fields['cognome']]),\r\n                annoFrequentazione: parseInt(fields['annoFrequentazione']),\r\n                cf: cells[fields['cf']],\r\n                dataNascita: formattaData(cells[fields['dataNascita']], true),\r\n                email: cells[fields['email']],\r\n                password: cells[fields['cf']]\r\n            }\r\n\r\n            list.push(student)\r\n        })\r\n\r\n        this.setState({\r\n            addList: list\r\n        })\r\n\r\n        popup.classList.add(\"show\")\r\n    }\r\n\r\n    hidePopup = () => {\r\n        let popup = document.getElementById(\"popup\")\r\n\r\n        this.setState({\r\n            addList: [],\r\n            fields: {\r\n                nome: 0,\r\n                cognome: 0,\r\n                cf: 0,\r\n                dataNascita: 0,\r\n                email: 0,\r\n                annoFrequentazione: 0\r\n            }\r\n        })\r\n\r\n        popup.classList.remove(\"show\")\r\n    }\r\n\r\n    confirmImport = () => {\r\n        this.toggleLoading()\r\n\r\n        askPassword(siteUrl+\"/api/studenti\", \"post\", {\r\n            studenti: this.state.addList\r\n        }, (_: any) => {\r\n            this.toggleLoading()\r\n            message.success(\"Importazione eseguita con successo!\")\r\n            routerHistory.push(adminRoute+\"/studenti\")\r\n        })\r\n    }\r\n\r\n    toggleLoading = () => {\r\n        this.setState({\r\n            loading: !this.state.loading\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { addList, loading } = this.state\r\n\r\n        return <div className=\"col p-5 right-block\" id=\"mainBlock\" style={{flexDirection: \"column\"}}>\r\n            <h3 className=\"text-center w-100\">Importa studenti da CSV</h3>\r\n\r\n            <label>\r\n                Prima di proseguire, esportare il CSV da <strong>Sifer</strong>.\r\n            </label>\r\n\r\n            <div className=\"uploader mt-2 w-100\">\r\n                <Dragger accept=\".csv\" beforeUpload={file => this.readFile(file)}>\r\n                    <p className=\"ant-upload-drag-icon\">\r\n                        <i className=\"fa fa-file-csv fa-5x\"></i>\r\n                    </p>\r\n                    <p className=\"ant-upload-text\">Clicca o trascina un file su quest'aerea</p>\r\n                    <p className=\"ant-upload-hint\">\r\n                        Assicurati che il file abbia l'estensione <strong>.csv</strong>.\r\n                    </p>\r\n                </Dragger>\r\n            </div>\r\n\r\n            <div id=\"popup\" className=\"preview px-0\">\r\n                <div className=\"w-100 h-100 inner overflow-auto px-5 py-4\">\r\n                    <h3 className=\"mb-3 text-center\">Anteprima dati da importare</h3>\r\n                    {\r\n                        addList.length && <table className=\"table table-bordered text-center\">\r\n                            <tbody>\r\n                                <tr>\r\n                                    <th>Nome</th>\r\n                                    <th>Cognome</th>\r\n                                    <th>Anno</th>\r\n                                    <th>Codice Fiscale</th>\r\n                                    <th>Data di Nascita</th>\r\n                                    <th style={{width: \"25%\"}}>E-mail</th>\r\n                                </tr>\r\n\r\n                                {\r\n                                    addList.map(s => {                \r\n                                        return <tr>\r\n                                            <Tooltip title={s.nome}>\r\n                                                <td style={{maxWidth: 0}} className=\"text-truncate\">{s.nome}</td>\r\n                                            </Tooltip>\r\n                                            <Tooltip title={s.cognome}>\r\n                                                <td style={{maxWidth: 0}} className=\"text-truncate\">{s.cognome}</td>\r\n                                            </Tooltip>\r\n                                            <td style={{maxWidth: 0}} className=\"text-truncate\">{s.annoFrequentazione}</td>\r\n                                            <Tooltip title={s.cf}>\r\n                                                <td style={{maxWidth: 0}} className=\"text-truncate\">{s.cf}</td>\r\n                                            </Tooltip>\r\n                                            <td style={{maxWidth: 0}} className=\"text-truncate\">{formatItalian(s.dataNascita)}</td>\r\n                                            <Tooltip title={s.email}>\r\n                                                <td style={{maxWidth: 0}} className=\"text-truncate\">{s.email}</td>\r\n                                            </Tooltip>\r\n                                        </tr>\r\n                                    })\r\n                                }\r\n                            </tbody>\r\n                        </table>\r\n                    }\r\n                </div>\r\n\r\n                <div className=\"bottom-side p-3 text-right\">\r\n                    <button className=\"btn btn-danger mr-2\" onClick={this.hidePopup} disabled={loading}>Annulla</button>\r\n                    <button className=\"btn btn-success\" onClick={this.confirmImport} disabled={loading}>\r\n                        {\r\n                            loading && <Icon type=\"loading\" className=\"mr-2 loadable-btn\" spin />\r\n                        }\r\n                        Conferma importazione\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Tooltip, Spin, Icon, Modal, message, Button } from \"antd\"\r\nimport Axios from \"axios\"\r\nimport { siteUrl } from \"../../utilities\"\r\nimport { IMateria } from \"../../models/IMateria\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IProps{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly materie: IMateria[]\r\n    readonly showModal: boolean\r\n    readonly nomeMateria: string\r\n    readonly showEditModal: boolean\r\n    readonly materiaEdit: IMateria\r\n    readonly nomeEdit: string\r\n}\r\n\r\nexport default class MaterieList extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            materie: null,\r\n            showModal: false,\r\n            nomeMateria: \"\",\r\n            showEditModal: false,\r\n            materiaEdit: null,\r\n            nomeEdit: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Axios.get(siteUrl+\"/api/materie/getmateriebycorso/\" + this.props.corso).then(response => {\r\n            this.setState({\r\n                materie: response.data as IMateria[]\r\n            })\r\n        })\r\n    }\r\n\r\n    showHideModal = () => {\r\n        this.setState({\r\n            showModal: !this.state.showModal,\r\n            nomeMateria: \"\"\r\n        })\r\n    }\r\n\r\n    hideEditModal = () => {\r\n        this.setState({\r\n            showEditModal: false,\r\n            nomeEdit: \"\",\r\n            materiaEdit: null\r\n        })\r\n    }\r\n\r\n    showEditModal = (materia: IMateria) => {\r\n        this.setState({\r\n            showEditModal: true,\r\n            nomeEdit: materia.nome,\r\n            materiaEdit: materia\r\n        })\r\n    }\r\n\r\n    aggiungiMateria = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { nomeMateria } = this.state\r\n\r\n        if(nomeMateria.trim() === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n           return\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/materie/\" + this.props.corso, \"post\", {\r\n            materia: {\r\n                nome: nomeMateria.trim()\r\n            }\r\n        }, (response: any) => {\r\n            let materie = response.data as IMateria[]\r\n\r\n            this.setState({\r\n                materie\r\n            })\r\n\r\n            message.success(\"Materia aggiunta con successo!\")\r\n        }, () => {\r\n            this.setState({\r\n                materie: null,\r\n                showModal: false\r\n            })\r\n        })\r\n    }\r\n\r\n    modificaMateria = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { nomeEdit, materiaEdit } = this.state\r\n\r\n        if(nomeEdit === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n           return\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/materie/\" + materiaEdit.idMateria, \"put\", {\r\n            materia: {\r\n                idMateria: materiaEdit.idMateria,\r\n                nome: nomeEdit.trim()\r\n            }\r\n        }, (response: any) => {\r\n            let materie = response.data as IMateria[]\r\n\r\n            this.setState({\r\n                materie,\r\n                materiaEdit: null,\r\n                nomeEdit: \"\",\r\n            })\r\n\r\n            message.success(\"Materia modificata con successo!\")\r\n        }, () => {\r\n            this.setState({\r\n                materie: null,\r\n                showEditModal: false\r\n            })\r\n        })\r\n    }\r\n\r\n    changeNome = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nomeMateria: nome\r\n        })\r\n    }\r\n\r\n    changeNomeEdit = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nomeEdit: nome\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { materie, nomeMateria, showModal, showEditModal, materiaEdit, nomeEdit } = this.state\r\n        \r\n        if(!materie){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-3 text-center\">Lista delle materie</h3>\r\n\r\n            <button className=\"btn btn-success float-right mb-3\" type=\"button\" onClick={this.showHideModal}>\r\n                <i className=\"fal fa-plus fa-fw\"></i> Aggiungi materia\r\n            </button>\r\n\r\n            <div className=\"clearfix\"></div>\r\n\r\n            <div className=\"row mx-0\">\r\n                {\r\n                    materie.map(m => {    \r\n                        return <div className=\"col-12 col-md-3 col-lg-3 p-0 p-md-1 mb-1\">\r\n                            <div className=\"border rounded p-2\">\r\n                                <Tooltip title=\"Modifica\">\r\n                                    <span onClick={() => this.showEditModal(m)} className=\"float-right link-warning ml-2\">\r\n                                        <i className=\"fa fa-pen\"></i>\r\n                                    </span>\r\n                                </Tooltip>\r\n\r\n                                <div className=\"text-truncate\">{m.nome}</div>\r\n                            </div>\r\n                        </div>\r\n                    })\r\n                }\r\n            </div>\r\n\r\n            <Modal title=\"Aggiungi una materia\" visible={showModal} footer={[\r\n                <Button type=\"primary\" onClick={this.aggiungiMateria}>Aggiungi</Button>,\r\n                <Button type=\"default\" onClick={this.showHideModal}>Annulla</Button>\r\n            ]} onCancel={this.showHideModal}>\r\n                <form onSubmit={this.aggiungiMateria}>\r\n                    <div className=\"form-group mb-0\">\r\n                        <label className=\"text-secondary\">Nome della materia</label>\r\n                        <input type=\"text\" value={nomeMateria} onChange={this.changeNome} className=\"form-control\" />\r\n                    </div>\r\n\r\n                    <input type=\"submit\" className=\"d-none\" />\r\n                </form>\r\n            </Modal>\r\n\r\n            {\r\n                materiaEdit && <Modal title=\"Modifica di una materia\" visible={showEditModal} footer={[\r\n                    <Button type=\"primary\" onClick={this.modificaMateria}>Modifica</Button>,\r\n                    <Button type=\"default\" onClick={this.hideEditModal}>Annulla</Button>\r\n                ]} onCancel={this.hideEditModal}>\r\n                    <form onSubmit={this.modificaMateria}>\r\n                        <div className=\"form-group mb-0\">\r\n                            <label className=\"text-secondary\">Nome della materia</label>\r\n                            <input type=\"text\" value={nomeEdit} onChange={this.changeNomeEdit} className=\"form-control\" />\r\n                        </div>\r\n\r\n                        <input type=\"submit\" className=\"d-none\" />\r\n                    </form>\r\n                </Modal>\r\n            }\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Tooltip } from \"antd\"\r\n\r\nexport interface IProps{\r\n    readonly src: string\r\n    readonly width?: number | string\r\n    readonly height?: number | string\r\n    readonly scalable?: boolean\r\n    readonly style?: React.CSSProperties\r\n}\r\nexport interface IState{\r\n    readonly scaled: boolean\r\n    readonly coords: number[]\r\n}\r\n\r\nexport default class ImageScale extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            scaled: false,\r\n            coords: [0, 0]\r\n        }\r\n    }\r\n\r\n    scaleImage = () => {\r\n        if(!this.props.scalable) return\r\n\r\n        this.setState({\r\n            scaled: !this.state.scaled\r\n        })\r\n        \r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { src, width, height, scalable, style } = this.props\r\n        const { scaled } = this.state\r\n        let firstclass = scalable ? \"scalable \" : \"\",\r\n        classname = scaled ? \"scaled\" : \"\",\r\n        title = scalable ? \"Cliccare per \" + (scaled ? \"rimpicciolire\" : \"ingrandire\") : null\r\n\r\n        return <Tooltip title={title}>\r\n            <img alt=\"scale\" style={style} className={\"imagescale \"+firstclass+classname} src={src} width={width} height={height} onClick={this.scaleImage} />\r\n        </Tooltip>\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, message, Icon, Spin, Collapse } from \"antd\"\r\nimport Axios from \"axios\"\r\nimport { siteUrl, formatItalian } from \"../../utilities\"\r\nimport { ICalendar } from \"../../models/ICalendar\"\r\nimport Calendario from \"../Calendario\"\r\nimport { askPassword } from \"../AskConferma\"\r\nimport { ICalendarEvent } from \"../../models/ICalendarEvent\"\r\n\r\nexport interface IProps{\r\n    readonly anno: number\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly calendarId: string\r\n    readonly calendar: ICalendar\r\n    readonly actualId: string\r\n}\r\n\r\nexport default class ConfigForm extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            calendarId: null,\r\n            calendar: null,\r\n            actualId: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        const { corso, anno } = this.props\r\n\r\n        Axios.get(siteUrl+\"/api/calendari/\"+corso+\"/\"+anno).then(response => {\r\n            let calendar = response.data as ICalendar\r\n\r\n            this.setState({\r\n                calendarId: calendar.idCalendario,\r\n                actualId: calendar.idCalendario,\r\n                calendar\r\n            })\r\n        })\r\n    }\r\n\r\n    changeID = (e: any) => {\r\n        let calendarId = e.target.value\r\n\r\n        this.setState({\r\n            calendarId\r\n        })\r\n    }\r\n\r\n    saveConfig = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { corso, anno } = this.props\r\n        const { calendarId } = this.state\r\n\r\n        if(calendarId === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n        \r\n        askPassword(siteUrl+\"/api/calendari\", \"post\", {\r\n            calendario: {\r\n                idCalendario: calendarId,\r\n                idCorso: corso,\r\n                anno\r\n            }\r\n        }, (response: any) => {\r\n            let eventiScartati = response.data as ICalendarEvent[],\r\n            { Panel } = Collapse\r\n\r\n            if(eventiScartati.length){\r\n                Modal.warning({\r\n                    title: \"Attenzione!\",\r\n                    content: <div style={{ marginLeft: -38 }}>\r\n                        <p className=\"text-muted\">I seguenti eventi sono stati scartati durante l'inserimento. Assicurati che siano scritti nel giusto modo (<strong>LUOGO: DOCENTE - MATERIA</strong>), che le materie e i docenti siano stati creati, e che la materia sia effettivamente assegnata al docente.</p>\r\n\r\n                        <Collapse bordered={false}>\r\n                            <Panel header=\"Espandi per visualizzare gli eventi\" key={1}>\r\n                                { \r\n                                    eventiScartati.map(e => {\r\n                                        return <span className=\"d-block\">\r\n                                            <strong>{formatItalian(e.date)} ({e.inizio} - {e.fine})</strong>: {e.summary}\r\n                                        </span>\r\n                                    })\r\n                                }\r\n                            </Panel>\r\n                        </Collapse>\r\n                    </div>\r\n                })\r\n            }\r\n            \r\n            this.setState({\r\n                actualId: calendarId\r\n            })\r\n\r\n            message.success(\"Configurazione calendario salvata!\")\r\n        }, () => {\r\n            this.setState({\r\n                actualId: null\r\n            })\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { calendarId, actualId } = this.state\r\n\r\n        if(calendarId === null){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"text-center\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <form onSubmit={this.saveConfig}>\r\n            <div className=\"form-group row mx-1\">\r\n                <div className=\"col px-0\">\r\n                    <label className=\"text-secondary\">ID Calendario</label>\r\n                    <input name=\"calendarID\" type=\"text\" className=\"form-control\" value={calendarId} onChange={this.changeID} />\r\n                </div>\r\n            </div>\r\n\r\n            <button type=\"submit\" className=\"btn btn-success float-right mr-1 mb-3\">\r\n                {\r\n                    actualId === null && <Icon type=\"loading\" className=\"mr-2 loadable-btn\" spin />\r\n                }\r\n                Salva configurazione\r\n            </button>\r\n\r\n            <div className=\"clearfix\"></div>\r\n\r\n            <div className=\"p-1\">\r\n                <h4>Anteprima visualizzazione</h4>\r\n                <Calendario calendarId={actualId} />\r\n            </div> \r\n        </form>\r\n    }\r\n}","import React from \"react\"\r\nimport { Icon, Modal, Tooltip, Tabs } from \"antd\"\r\nimport ImageScale from \"../ImageScale\"\r\nimport ConfigForm from \"./ConfigForm\"\r\n\r\nexport interface IProps{\r\n    readonly corso: number\r\n}\r\nexport interface IState{}\r\n\r\nexport default class ConfigCalendar extends React.PureComponent<IProps, IState>{\r\n    showHelp = () => {\r\n        Modal.info({\r\n            width: 700,\r\n            style: { top: 24 },\r\n            centered: false,\r\n            maskClosable: true,\r\n            icon: <Icon type=\"question-circle\" style={{ marginTop: 6, fontSize: 28, color: \"orange\" }} />,\r\n            okText: \"Ho capito\",\r\n            content: <div className=\"text-justify\">\r\n                <strong>Dove mi trovo?</strong>\r\n                <p>In questa pagina potrai configurare il calendario dal quale verranno caricate le lezioni del corso.</p>\r\n                <strong>Come si configura il calendario?</strong>\r\n                <p>Per configurare il calendario avrai bisogno di un codice univoco, che ti permetterà di collegare il calendario al sito.</p>\r\n                <strong>ID del calendario</strong>\r\n                <p>Per trovare l'ID (identificativo) del calendario, basterà effettuare l'accesso su <a href=\"https://calendar.google.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Google Calendar <i className=\"far fa-external-link\"></i></a> con un account che abbia integrato il calendario del corso. Bisognerà poi premere sul simbolo <i className=\"far fa-cog\"></i> in alto a destra e successivamente su <strong>Impostazioni</strong> nel menu che comparirà. Scorrere quindi la lista a sinistra della pagina, e cliccare sul calendario che si desidera integrare. Recarsi sotto la voce <strong>Integra calendario</strong> e copiare (subito in basso) il codice identificativo del calendario (<strong>ID calendario</strong>), per poi incollarlo in questa pagina di configurazione.</p>\r\n                <p><u>Assicurati che il calendario sia <strong>pubblico</strong>, altrimenti non sarà possibile visualizzarlo.</u></p>\r\n                <strong className=\"d-block mb-2\">Galleria immagini</strong>\r\n                <ImageScale src=\"https://i.imgur.com/e3H0hXX.png\" height={100} scalable />\r\n            </div>\r\n        })\r\n\r\n        setTimeout(() => document.getElementsByClassName(\"ant-modal-wrap\")[0].scrollTo(0, 0), 100)\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { TabPane } = Tabs\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-2 text-center\">\r\n                Configurazione calendario\r\n                <Tooltip title=\"Informazioni\">\r\n                    <button type=\"button\" className=\"btn btn-outline-info circle-btn float-right\" onClick={this.showHelp}>\r\n                        <i className=\"fa fa-question\"></i>\r\n                    </button>\r\n                </Tooltip>\r\n                <div className=\"clearfix\"></div>\r\n            </h3>\r\n\r\n            <Tabs>\r\n                <TabPane tab=\"Primo anno\" key=\"1\">\r\n                    <ConfigForm anno={1} corso={this.props.corso} />\r\n                </TabPane>\r\n                <TabPane tab=\"Secondo anno\" key=\"2\">\r\n                    <ConfigForm anno={2} corso={this.props.corso} />\r\n                </TabPane>\r\n            </Tabs>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { routerHistory } from \"..\"\r\n\r\nexport interface IProps{\r\n    readonly goTo: string\r\n}\r\nexport interface IState{}\r\n\r\nexport default class Page404 extends React.PureComponent<IProps, IState>{\r\n    render(): JSX.Element{\r\n        return <div id=\"mainBlock\" className=\"col\">\r\n            <div className=\"text-center text-grey w-100\">\r\n                <i className=\"fal fa-exclamation-triangle mb-2\" style={{ fontSize: 150}}></i>\r\n                <h1 className=\"mb-2 text-grey font-weight-normal\">Errore 404</h1>\r\n                <p style={{ fontSize: 20 }}>La pagina che stati cercando non esiste.</p>\r\n                <button onClick={() => routerHistory.push(this.props.goTo)} type=\"button\" className=\"btn btn-blue btn-lg text-uppercase\">\r\n                    <i className=\"fa fa-shield-check fa-lg fa-fw mr-2\"></i>\r\n                    Torna al sicuro\r\n                </button>\r\n            </div>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal } from \"antd\"\r\nimport { siteUrl } from \"../../utilities\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{}\r\n\r\nexport default class EditCodiceFirma extends React.PureComponent<IProps, IState>{\r\n    requestCodeChange = (anno: number) => {\r\n        askPassword(siteUrl+\"/api/corsi/generacodiceanno\", \"post\", {\r\n            anno\r\n        }, (response: any) => {\r\n            let codice = response.data\r\n\r\n            Modal.info({\r\n                title: \"Codice generato\",\r\n                content: <span>\r\n                    Il nuovo codice è: <strong>{codice}</strong>\r\n                </span>\r\n            })\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-4 text-center\">Gestione firma da casa</h3>\r\n\r\n            <div className=\"py-4 px-3 text-justify border rounded shadow-sm mb-4\">\r\n                <div className=\"row mx-0\">\r\n                    <div className=\"col-1 text-left\">\r\n                        <i className=\"fal fa-question-circle fa-3x text-warning\"></i>\r\n                    </div>\r\n\r\n                    <div className=\"col\">\r\n                        <p>Nel caso in cui ce ne fosse bisogno, è possibile dare agli studenti la possibilità di firmare le loro presenze da casa.</p>\r\n                        <p>Tramite <a href={siteUrl+\"/#/firmacasa\"} target=\"_blank\" rel=\"noopener noreferrer\">questo url</a> (da condividere con gli studenti) è possibile eseguire tale operazione, ma per farlo è necessario generare, tramite la pagina corrente, un codice univoco che permetta l'accesso alla schermata. Basterà quindi digitarlo nell'apposito campo di testo e si accederà alla lista degli studenti presenti nella classe.</p>\r\n                        <p>Lo studente sarà poi libero di scegliere il proprio nome nella lista, e confermando la propria identità tramite password avrà la possibilità di firmare.</p>\r\n                        <p className=\"mb-0\">Il codice sarà differente in base all'anno di appartenenza.</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <strong className=\"mr-2\">Genera codice:</strong>\r\n            <button className=\"btn btn-blue mr-2\" onClick={() => this.requestCodeChange(1)}>Primo anno</button>\r\n            <button className=\"btn btn-danger\" onClick={() => this.requestCodeChange(2)}>Secondo anno</button>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { IAdmin } from \"../../models/IAdmin\"\r\nimport { ILezioneCorrente } from \"../../models/ILezioneCorrente\"\r\nimport Axios from \"axios\"\r\nimport { siteUrl, convertFromUTC } from \"../../utilities\"\r\nimport { Tabs, Icon, Spin, Tooltip } from \"antd\"\r\n\r\nexport interface IProps{\r\n    readonly coordinatore: IAdmin\r\n}\r\nexport interface IState{\r\n    readonly lezioneCorrente1: ILezioneCorrente\r\n    readonly noLezione1: boolean\r\n    readonly lezioneCorrente2: ILezioneCorrente\r\n    readonly noLezione2: boolean\r\n}\r\n\r\nexport default class Home extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            lezioneCorrente1: null,\r\n            noLezione1: false,\r\n            lezioneCorrente2: null,\r\n            noLezione2: false\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        const { coordinatore } = this.props\r\n\r\n        Axios.get(siteUrl+\"/api/lezioni/getstudentiatlezione/\"+coordinatore.idCorso+\"/1\").then(response => {\r\n            if(typeof(response.data) === \"string\"){\r\n                this.setState({\r\n                    noLezione1: true\r\n                })\r\n            }else{\r\n                let data = response.data as ILezioneCorrente\r\n\r\n                this.setState({\r\n                    lezioneCorrente1: data\r\n                })\r\n            }\r\n        }).catch(_ => {\r\n            this.setState({\r\n                noLezione1: true\r\n            })\r\n        })\r\n\r\n        Axios.get(siteUrl+\"/api/lezioni/getstudentiatlezione/\"+coordinatore.idCorso+\"/2\").then(response => {\r\n            if(typeof(response.data) === \"string\"){\r\n                this.setState({\r\n                    noLezione2: true\r\n                })\r\n            }else{\r\n                let data = response.data as ILezioneCorrente\r\n\r\n                this.setState({\r\n                    lezioneCorrente2: data\r\n                })\r\n            }\r\n        }).catch(_ => {\r\n            this.setState({\r\n                noLezione2: true\r\n            })\r\n        })\r\n    }\r\n\r\n    getContenuto = (lezione: ILezioneCorrente) => {\r\n        return <div>\r\n            <div className=\"col-12 col-md-6 mb-2 px-2\">\r\n                <div className=\"p-3 bg-white border rounded\">\r\n                    <Tooltip title={lezione.lezione.titolo}>\r\n                        <h4 className=\"text-uppercase mb-2 text-truncate\">{lezione.lezione.titolo}</h4>\r\n                    </Tooltip>\r\n                    <span className=\"text-muted\">{convertFromUTC(lezione.lezione.oraInizio)} - {convertFromUTC(lezione.lezione.oraFine)}</span>\r\n                </div>\r\n            </div>\r\n\r\n            <h6 className=\"mt-3 mb-2 ml-2\">Studenti presenti</h6>\r\n            <div className=\"row mx-0\">\r\n                {\r\n                    lezione.studenti.map(s => {\r\n                        return <div className=\"col-12 col-md-3 mb-md-0 p-1 p-md-2\">\r\n                            <div className=\"border rounded p-2 text-truncate\">\r\n                                <div>{s.nome} {s.cognome}</div>\r\n                                <span className=\"text-muted\">Entrata: {convertFromUTC(s.oraIngresso)}</span>\r\n                            </div>\r\n                        </div>\r\n                    })\r\n                }\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { coordinatore } = this.props,\r\n        { lezioneCorrente1, lezioneCorrente2, noLezione1, noLezione2 } = this.state,\r\n        { TabPane } = Tabs,\r\n        icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-3 text-center\">Home coordinatore</h3>\r\n\r\n            <div className=\"col-12 col-md-6 mb-2 mb-md-0 p-3 bg-white border rounded\">\r\n                <span className=\"border-text\">Dati personali</span>\r\n                <h4 className=\"text-uppercase mb-2 text-truncate\">{coordinatore.nome} {coordinatore.cognome}</h4>\r\n\r\n                Codice di accesso alla firma: <strong>{coordinatore.codiceCorso}</strong>\r\n            </div>\r\n\r\n            <h4 className=\"mt-3 mb-2\">Lezioni in corso</h4>\r\n\r\n            <Tabs>\r\n                <TabPane tab=\"Primo anno\" key=\"1\">\r\n                    {\r\n                        !lezioneCorrente1 && !noLezione1 && <div className=\"text-center\">\r\n                            <Spin indicator={icon} />\r\n                        </div>\r\n                    }\r\n                    {\r\n                        !lezioneCorrente1 && noLezione1 && <div className=\"text-center\">\r\n                            Non ci sono lezioni in corso.\r\n                        </div>\r\n                    }\r\n                    {\r\n                        lezioneCorrente1 && !noLezione1 && this.getContenuto(lezioneCorrente1)\r\n                    }\r\n                </TabPane>\r\n                <TabPane tab=\"Secondo anno\" key=\"2\">\r\n                {\r\n                        !lezioneCorrente2 && !noLezione2 && <div className=\"text-center\">\r\n                            <Spin indicator={icon} />\r\n                        </div>\r\n                    }\r\n                    {\r\n                        !lezioneCorrente2 && noLezione2 && <div className=\"text-center\">\r\n                            Non ci sono lezioni in corso.\r\n                        </div>\r\n                    }\r\n                    {\r\n                        lezioneCorrente2 && !noLezione2 && this.getContenuto(lezioneCorrente2)\r\n                    }\r\n                </TabPane>\r\n            </Tabs>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { NavLink, Route, Router, Switch } from \"react-router-dom\"\r\nimport { routerHistory } from \"../..\"\r\nimport LoginTutor from \"./LoginTutor\"\r\nimport StudentsList from \"./StudentsList\"\r\nimport AddNewStudent from \"./AddNewStudent\"\r\nimport StudentDetails from \"./StudentDetails\"\r\nimport DocentiList from \"./DocentiList\"\r\nimport AddNewDocente from \"./AddNewDocente\"\r\nimport DocenteDetails from \"./DocenteDetails\"\r\nimport EditDocente from \"./EditDocente\"\r\nimport EditStudente from \"./EditStudente\"\r\nimport StudentsImport from \"./StudentsImport\"\r\nimport MaterieList from \"./MaterieList\"\r\nimport ConfigCalendar from \"./ConfigCalendar\"\r\nimport { IAdmin } from \"../../models/IAdmin\"\r\nimport LogoCorso from \"../LogoCorso\"\r\nimport Page404 from \"../Page404\"\r\nimport { adminRoute } from \"../../utilities\"\r\nimport EditCodiceFirma from \"./EditCodiceFirma\"\r\nimport Footer from \"../Footer\"\r\nimport Home from \"./Home\"\r\n\r\nexport default class Dashboard extends React.Component{\r\n\r\n    componentWillUnmount = () => {\r\n        sessionStorage.removeItem(\"adminSession\")\r\n    }\r\n\r\n    render(): JSX.Element{\r\n\r\n        let session = sessionStorage.getItem(\"adminSession\")\r\n        \r\n        if(!session)\r\n            return <LoginTutor />\r\n\r\n        let admin = JSON.parse(session) as IAdmin\r\n\r\n        return <div className=\"container-fluid\">\r\n            <Router history={routerHistory}>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3 bg-blue p-0 menu\">\r\n                        \r\n                        <LogoCorso idCorso={admin.idCorso} />\r\n\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(adminRoute+\"/home\")} to={adminRoute+\"/home\"}>\r\n                            <span><i className=\"fal fa-home-alt fa-fw mr-1\"></i> Home</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(adminRoute+\"/studenti\")} to={adminRoute+\"/studenti\"}>\r\n                            <span><i className=\"fal fa-users-class fa-fw mr-1\"></i> Studenti</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(adminRoute+\"/docenti\")} to={adminRoute+\"/docenti\"}>\r\n                            <span><i className=\"fal fa-chalkboard-teacher fa-fw mr-1\"></i> Docenti</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(adminRoute+\"/materie\")} to={adminRoute+\"/materie\"}>\r\n                            <span><i className=\"fal fa-list-alt fa-fw mr-1\"></i> Materie</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(adminRoute+\"/config\")} to={adminRoute+\"/config\"}>\r\n                            <span><i className=\"fal fa-calendar-edit fa-fw mr-1\"></i> Configura calendario</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(adminRoute+\"/codicefirma\")} to={adminRoute+\"/codicefirma\"}>\r\n                            <span><i className=\"fal fa-house-signal fa-fw mr-1\"></i> Firma da casa</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => {\r\n                            sessionStorage.removeItem(\"adminSession\")\r\n                            routerHistory.push(adminRoute)\r\n                        }} exact to={adminRoute+\"/login\"}>\r\n                            <span><i className=\"fal fa-power-off fa-fw mr-1\"></i> Esci</span>\r\n                        </NavLink>\r\n\r\n                        <Footer inMenu />\r\n                    </div>\r\n  \r\n                    <Switch>\r\n                        <Route exact path={adminRoute} render={() => {\r\n                            routerHistory.push(adminRoute+\"/home\")\r\n\r\n                            return null\r\n                        }} />\r\n\r\n                        <Route exact path={adminRoute+\"/home\"} render={() => (\r\n                            <Home coordinatore={admin} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/studenti\"} render={() => (\r\n                            <StudentsList corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/studenti/new\"} render={() => (\r\n                            <AddNewStudent corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/studenti/import\"} render={() => (\r\n                            <StudentsImport corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/studenti/:id\"} render={(routeProps) => (\r\n                            <StudentDetails {...routeProps} corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/studenti/edit/:id\"} render={(routeProps) => (\r\n                            <EditStudente {...routeProps} corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/docenti\"} render={() => (\r\n                            <DocentiList corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/docenti/new\"} render={() => (\r\n                            <AddNewDocente corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/docenti/:id\"} render={(routeProps) => (\r\n                            <DocenteDetails {...routeProps} corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/docenti/edit/:id\"} render={(routeProps) => (\r\n                            <EditDocente {...routeProps} corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/materie\"} render={() => (\r\n                            <MaterieList corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/config\"} render={() => (\r\n                            <ConfigCalendar corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/codicefirma\"} render={() => (\r\n                            <EditCodiceFirma />\r\n                        )} />\r\n\r\n                        <Route render={() => <Page404 goTo={adminRoute} />} />\r\n\r\n                    </Switch>\r\n                        \r\n                </div>\r\n            </Router>\r\n        </div>\r\n    }\r\n}\r\n","import React from \"react\"\r\nimport { ICorso } from \"../../models/ICorso\"\r\nimport Axios from \"axios\"\r\nimport { siteUrl, superAdminRoute } from \"../../utilities\"\r\nimport { Icon, Spin, Tooltip } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly corsi: ICorso[]\r\n}\r\n\r\nexport default class CorsiList extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            corsi: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Axios.get(siteUrl+\"/api/corsi\").then(response => {\r\n            let corsi = response.data as ICorso[]\r\n\r\n            this.setState({\r\n                corsi\r\n            })\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { corsi } = this.state\r\n        \r\n        if(!corsi){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-3 text-center\">Lista dei corsi</h3>\r\n\r\n            <button className=\"btn btn-success float-right mb-3\" type=\"button\" onClick={() => routerHistory.push(superAdminRoute+\"/corsi/new\")}>\r\n                <i className=\"fal fa-plus fa-fw\"></i> Aggiungi corso\r\n            </button>\r\n\r\n            <table className=\"table table-bordered text-center\">\r\n                <tbody>\r\n                    <tr>\r\n                        <th style={{width: \"15%\"}}>Logo</th>\r\n                        <th>Nome</th>\r\n                        <th>Luogo</th>\r\n                        <th style={{width: \"10%\"}}>Azioni</th>\r\n                    </tr>\r\n\r\n                    {\r\n                        corsi.map(c => {        \r\n                            return <tr>\r\n                                <td><img width=\"55\" src={c.logo} alt=\"logo\" /></td>\r\n                                <td style={{maxWidth: 0}} className=\"text-truncate\">{c.nome}</td>\r\n                                <td style={{maxWidth: 0}} className=\"text-truncate\">{c.luogo}</td>\r\n                                <td>\r\n                                    <Tooltip title=\"Modifica\">\r\n                                        <button type=\"button\" className=\"btn btn-warning text-white circle-btn\" onClick={() => routerHistory.push(superAdminRoute+\"/corsi/edit/\" + c.idCorso)}>\r\n                                            <i className=\"fa fa-pen\"></i>\r\n                                        </button>\r\n                                    </Tooltip>\r\n                                </td>\r\n                            </tr>\r\n                        })\r\n                    }\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, Upload, Icon, message } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { imageFileToBase64, superAdminRoute, siteUrl } from \"../../utilities\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly nome: string\r\n    readonly luogo: string\r\n    readonly logo: string\r\n}\r\n\r\nexport default class AddNewCorso extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            nome: \"\",\r\n            luogo: \"\",\r\n            logo: null\r\n        }\r\n    }\r\n\r\n    changeNome = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nome\r\n        })\r\n    }\r\n\r\n    changeLuogo = (event: any) => {\r\n        let luogo = event.target.value\r\n\r\n        this.setState({\r\n            luogo\r\n        })\r\n    }\r\n\r\n    aggiungiCorso = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { nome, luogo, logo } = this.state\r\n\r\n        if(nome.trim() === \"\" || luogo.trim() === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/corsi\", \"post\", {\r\n            corso: {\r\n                nome: nome.trim(),\r\n                luogo: luogo.trim(),\r\n                logo: logo ? logo.trim() : \"\"\r\n            }\r\n        }, (_: any) => {\r\n            message.success(\"Corso creato con successo!\")\r\n            routerHistory.push(superAdminRoute+\"/corsi\")\r\n        })\r\n    }\r\n\r\n    convertImage = (file: any) => {\r\n        imageFileToBase64(file).then(result => {\r\n            this.setState({\r\n                logo: String(result)\r\n            })\r\n        })\r\n\r\n        return false\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { nome, luogo, logo } = this.state,\r\n        uploadButton = (\r\n            <div>\r\n                <Icon type=\"plus\" style={{ fontSize: 30, marginBottom: 5 }} />\r\n                <div className=\"ant-upload-text\">Carica immagine</div>\r\n            </div>\r\n        )\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-2 text-center\">Aggiungi un nuovo corso</h3>\r\n\r\n            <form className=\"row\" onSubmit={this.aggiungiCorso}>\r\n\r\n                <div className=\"form-group mr-3\">\r\n                    <label className=\"text-secondary d-block\">Logo</label>\r\n                    <Upload listType=\"picture-card\" showUploadList={false} beforeUpload={(file) => this.convertImage(file)} className=\"logo-upload\" accept=\"image/*\">\r\n                        {logo ? <img src={logo} alt=\"logo\" style={{ width: \"100%\" }} /> : uploadButton}\r\n                    </Upload>\r\n                </div>\r\n                \r\n                <div className=\"col pr-0\">\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-secondary\">Nome</label>\r\n                        <input name=\"nomecorso\" type=\"text\" className=\"form-control\" value={nome} onChange={this.changeNome} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-secondary\">Luogo</label>\r\n                        <input name=\"luogo\" type=\"text\" className=\"form-control\" value={luogo} onChange={this.changeLuogo} />\r\n                    </div>\r\n                </div>\r\n                <button type=\"submit\" className=\"btn btn-success text-uppercase w-100\">Aggiungi corso</button>\r\n            </form>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { routerHistory } from \"../..\"\r\nimport { message, Modal } from \"antd\"\r\nimport { mountLogin, unmountLogin, siteUrl, logoUrl, superAdminRoute } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { Cipher } from \"../../models/Cipher\"\r\nimport { isSuperAdmin } from \"../../models/IAdmin\"\r\nimport Footer from \"../Footer\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly adminName: string\r\n    readonly adminPsw: string\r\n}\r\n\r\nexport default class LoginAdmin extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            adminName: \"\",\r\n            adminPsw: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        mountLogin()\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        unmountLogin()\r\n    }\r\n\r\n    changeInputName = (event: any) => {\r\n        let name = event.target.value\r\n\r\n        this.setState({\r\n            adminName: name\r\n        })\r\n    }\r\n\r\n    changeInputPassword = (event: any) => {\r\n        let psw = event.target.value\r\n\r\n        this.setState({\r\n            adminPsw: psw\r\n        })\r\n    }\r\n\r\n    tryLogin = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { adminName, adminPsw } = this.state\r\n        let cipher = new Cipher(),\r\n        password = cipher.encode(adminPsw)\r\n\r\n        Axios.post(siteUrl+\"/api/amministratori/loginamministratori\", {\r\n            username: adminName.trim(),\r\n            password\r\n        }).then(response => {\r\n            let data = response.data\r\n\r\n            if(isSuperAdmin(data)){\r\n                data.password = password\r\n                sessionStorage.setItem(\"superSession\", JSON.stringify(data))\r\n                routerHistory.push(superAdminRoute)\r\n                message.success(\"Login effettuato con successo!\")\r\n            }\r\n            else{\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: \"Username o Password errati!\",\r\n                    centered: true,\r\n                    maskClosable: true\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { adminName, adminPsw } = this.state\r\n\r\n        return <div className=\"col-11 col-lg-5 mx-auto\" id=\"loginBlock\">\r\n            <div className=\"w-100\">\r\n                <form className=\"w-100 bg-white p-3 rounded shadow\" onSubmit={this.tryLogin}>\r\n                    <h3 className=\"d-inline-block\">Accesso amministratori</h3>\r\n                    <img src={logoUrl} height=\"40\" className=\"float-right logo\" alt=\"logo\" />\r\n\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-secondary\">Utente di accesso</label>\r\n                        <input name=\"username\" type=\"text\" className=\"form-control\" value={adminName} onChange={this.changeInputName} />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-secondary\">Password di accesso</label>\r\n                        <input name=\"password\" type=\"password\" className=\"form-control\" value={adminPsw} onChange={this.changeInputPassword} />\r\n                    </div>\r\n\r\n                    <input type=\"submit\" value=\"Accedi\" className=\"btn btn-lg btn-success w-100 text-uppercase\"/>\r\n                </form>\r\n\r\n                <Footer />\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n}","import React from \"react\"\r\nimport { Modal, Icon, Spin, Upload, message } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { siteUrl, imageFileToBase64, superAdminRoute } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { RouteComponentProps } from \"react-router-dom\"\r\nimport { ICorso } from \"../../models/ICorso\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IRouteParams{\r\n    readonly id: string\r\n}\r\nexport interface IProps extends RouteComponentProps<IRouteParams>{}\r\nexport interface IState{\r\n    readonly corso: ICorso\r\n    readonly nome: string\r\n    readonly luogo: string\r\n    readonly logo: string\r\n}\r\n\r\nexport default class EditCorso extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            corso: null,\r\n            nome: \"\",\r\n            luogo: \"\",\r\n            logo: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let id = Number(this.props.match.params.id)\r\n\r\n        if(isNaN(id))\r\n            routerHistory.push(superAdminRoute)\r\n\r\n        Axios.get(siteUrl+\"/api/corsi/\" + id).then(response => {\r\n            let corso = response.data as ICorso\r\n\r\n            this.setState({\r\n                corso,\r\n                nome: corso.nome,\r\n                luogo: corso.luogo,\r\n                logo: corso.logo\r\n            })\r\n        })\r\n    }\r\n\r\n    changeNome = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nome\r\n        })\r\n    }\r\n\r\n    changeLuogo = (event: any) => {\r\n        let luogo = event.target.value\r\n\r\n        this.setState({\r\n            luogo\r\n        })\r\n    }\r\n\r\n    modificaCorso = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { nome, luogo, corso, logo } = this.state\r\n\r\n        if(nome.trim() === \"\" || luogo.trim() === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/corsi/\" + corso.idCorso, \"put\", {\r\n            corso: {\r\n                idCorso: corso.idCorso,\r\n                nome: nome.trim(),\r\n                luogo: luogo.trim(),\r\n                logo: logo ? logo.trim() : \"\"\r\n            }\r\n        }, (_: any) => {\r\n            message.success(\"Corso modificato con successo!\")\r\n            routerHistory.push(superAdminRoute+\"/corsi\")\r\n        })\r\n    }\r\n\r\n    convertImage = (file: any) => {\r\n        imageFileToBase64(file).then(result => {\r\n            this.setState({\r\n                logo: String(result)\r\n            })\r\n        })\r\n\r\n        return false\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { nome, luogo, corso, logo } = this.state,\r\n        uploadButton = (\r\n            <div>\r\n                <Icon type=\"plus\" style={{ fontSize: 30, marginBottom: 5 }} />\r\n                <div className=\"ant-upload-text\">Carica immagine</div>\r\n            </div>\r\n        )\r\n\r\n        if(!corso){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-2 text-center\">Modifica di un corso</h3>\r\n\r\n            <form className=\"row\" onSubmit={this.modificaCorso}>\r\n                <div className=\"form-group mr-3\">\r\n                    <label className=\"text-secondary d-block\">Logo</label>\r\n                    <Upload listType=\"picture-card\" showUploadList={false} beforeUpload={(file) => this.convertImage(file)} className=\"logo-upload\" accept=\"image/*\">\r\n                        {logo ? <img src={logo} alt=\"logo\" style={{ width: \"100%\" }} /> : uploadButton}\r\n                    </Upload>\r\n                </div>\r\n\r\n                <div className=\"col pr-0\">\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-secondary\">Nome</label>\r\n                        <input name=\"nomecorso\" type=\"text\" className=\"form-control\" value={nome} onChange={this.changeNome} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-secondary\">Luogo</label>\r\n                        <input name=\"luogo\" type=\"text\" className=\"form-control\" value={luogo} onChange={this.changeLuogo} />\r\n                    </div>\r\n                </div>\r\n\r\n                <button type=\"submit\" className=\"btn btn-success text-uppercase w-100\">Modifica corso</button>\r\n            </form>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport Axios from \"axios\"\r\nimport { siteUrl, superAdminRoute } from \"../../utilities\"\r\nimport { Icon, Spin, Tooltip } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { ITutor } from \"../../models/ITutor\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly tutor: ITutor[]\r\n}\r\n\r\nexport default class TutorList extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            tutor: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Axios.get(siteUrl+\"/api/coordinatori\").then(response => {\r\n            let tutor = response.data as ITutor[]\r\n\r\n            this.setState({\r\n                tutor\r\n            })\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { tutor } = this.state\r\n        \r\n        if(!tutor){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-3 text-center\">Lista dei coordinatori</h3>\r\n\r\n            <button className=\"btn btn-success float-right mb-3\" type=\"button\" onClick={() => routerHistory.push(superAdminRoute+\"/tutor/new\")}>\r\n                <i className=\"fal fa-plus fa-fw\"></i> Aggiungi coordinatore\r\n            </button>\r\n\r\n            <table className=\"table table-bordered text-center\">\r\n                \r\n                    <tbody>\r\n                        <tr>\r\n                            <th>Nome</th>\r\n                            <th>Cognome</th>\r\n                            <th style={{width: \"30%\"}}>Corso</th>\r\n                            <th style={{width: \"10%\"}}>Azioni</th>\r\n                        </tr>\r\n\r\n                        {\r\n                            tutor.map(t => {        \r\n                                return <tr>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{t.nome}</td>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{t.cognome}</td>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{t.corso}</td>\r\n                                    <td>\r\n                                        <Tooltip title=\"Modifica\">\r\n                                            <button type=\"button\" className=\"btn btn-warning text-white circle-btn\" onClick={() => routerHistory.push(superAdminRoute+\"/tutor/edit/\" + t.idCoordinatore)}>\r\n                                                <i className=\"fa fa-pen\"></i>\r\n                                            </button>\r\n                                        </Tooltip>\r\n                                    </td>\r\n                                </tr>\r\n                            })\r\n                        }\r\n                    </tbody>\r\n            </table>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, Icon, message, Spin } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { siteUrl, superAdminRoute } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { ICorso } from \"../../models/ICorso\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly nome: string\r\n    readonly cognome: string\r\n    readonly email: string\r\n    readonly listaCorsi: ICorso[]\r\n    readonly corso: number\r\n}\r\n\r\nexport default class AddNewTutor extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            nome: \"\",\r\n            cognome: \"\",\r\n            email: \"\",\r\n            listaCorsi: null,\r\n            corso: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Axios.get(siteUrl+\"/api/corsi\").then(response => {\r\n            let corsi = response.data as ICorso[]\r\n\r\n            this.setState({\r\n                listaCorsi: corsi,\r\n                corso: corsi.length ? corsi[0].idCorso : 0\r\n            })\r\n        })\r\n    }\r\n\r\n    changeNome = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nome\r\n        })\r\n    }\r\n\r\n    changeCognome = (event: any) => {\r\n        let cognome = event.target.value\r\n\r\n        this.setState({\r\n            cognome\r\n        })\r\n    }\r\n\r\n    changeEmail = (event: any) => {\r\n        let email = event.target.value.trim()\r\n\r\n        this.setState({\r\n            email\r\n        })\r\n    }\r\n\r\n    changeCorso = (event: any) => {\r\n        let corso = parseInt(event.target.value)\r\n\r\n        this.setState({\r\n            corso\r\n        })\r\n    }\r\n\r\n    isExistingCorso = (corso: number) => {\r\n        return this.state.listaCorsi.find(c => c.idCorso === corso)\r\n    }\r\n\r\n    aggiungiTutor = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { nome, cognome, email, corso } = this.state\r\n\r\n        if(nome.trim() === \"\" || cognome.trim() === \"\" || email === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(!this.isExistingCorso(corso)){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Corso non valido.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/coordinatori\", \"post\", {\r\n            coordinatore: {\r\n                nome: nome.trim(),\r\n                cognome: cognome.trim(),\r\n                email,\r\n                idCorso: corso\r\n            }\r\n        }, (_: any) => {\r\n            message.success(\"Tutor creato con successo!\")\r\n            routerHistory.push(superAdminRoute+\"/tutor\")\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { nome, cognome, email, listaCorsi } = this.state\r\n\r\n        if(!listaCorsi){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        if(!listaCorsi.length){\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                È necessario creare almeno un corso per poter inserire un nuovo coordinatore.\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-2 text-center\">Aggiungi un nuovo coordinatore</h3>\r\n\r\n            <form onSubmit={this.aggiungiTutor}>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Nome</label>\r\n                        <input name=\"name\" type=\"text\" className=\"form-control\" value={nome} onChange={this.changeNome} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Cognome</label>\r\n                        <input name=\"surname\" type=\"text\" className=\"form-control\" value={cognome} onChange={this.changeCognome} />\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">E-mail</label>\r\n                        <input name=\"email\" type=\"email\" className=\"form-control\" value={email} onChange={this.changeEmail} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Corso gestito</label>\r\n                        <select name=\"anno\" onChange={this.changeCorso} className=\"custom-select\">\r\n                            {\r\n                                listaCorsi.map(c => {\r\n                                    return <option value={c.idCorso}>{c.nome}</option>\r\n                                })\r\n                            }\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <button type=\"submit\" className=\"btn btn-success text-uppercase w-100\">Aggiungi coordinatore</button>\r\n            </form>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, Icon, message, Spin } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { siteUrl, superAdminRoute } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { ICorso } from \"../../models/ICorso\"\r\nimport { RouteComponentProps } from \"react-router-dom\"\r\nimport { ITutor } from \"../../models/ITutor\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IRouteParams{\r\n    readonly id: string\r\n}\r\nexport interface IProps extends RouteComponentProps<IRouteParams>{}\r\nexport interface IState{\r\n    readonly nome: string\r\n    readonly cognome: string\r\n    readonly email: string\r\n    readonly listaCorsi: ICorso[]\r\n    readonly corso: number\r\n}\r\n\r\nexport default class EditTutor extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            nome: \"\",\r\n            cognome: \"\",\r\n            email: \"\",\r\n            listaCorsi: null,\r\n            corso: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let id = Number(this.props.match.params.id)\r\n\r\n        if(isNaN(id))\r\n            routerHistory.push(superAdminRoute)\r\n\r\n        Axios.get(siteUrl+\"/api/coordinatori/\"+id).then(response => {\r\n            let tutor = response.data as ITutor\r\n\r\n            this.setState({\r\n                nome: tutor.nome,\r\n                cognome: tutor.cognome,\r\n                email: tutor.email,\r\n                corso: tutor.idCorso\r\n            })\r\n        })\r\n\r\n        Axios.get(siteUrl+\"/api/corsi\").then(response => {\r\n            let corsi = response.data as ICorso[]\r\n\r\n            this.setState({\r\n                listaCorsi: corsi\r\n            })\r\n        })\r\n    }\r\n\r\n    changeNome = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nome\r\n        })\r\n    }\r\n\r\n    changeCognome = (event: any) => {\r\n        let cognome = event.target.value\r\n\r\n        this.setState({\r\n            cognome\r\n        })\r\n    }\r\n\r\n    changeEmail = (event: any) => {\r\n        let email = event.target.value.trim()\r\n\r\n        this.setState({\r\n            email\r\n        })\r\n    }\r\n\r\n    changeCorso = (event: any) => {\r\n        let corso = parseInt(event.target.value)\r\n\r\n        this.setState({\r\n            corso\r\n        })\r\n    }\r\n\r\n    isExistingCorso = (corso: number) => {\r\n        return this.state.listaCorsi.find(c => c.idCorso === corso)\r\n    }\r\n\r\n    modificaTutor = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { nome, cognome, email, corso } = this.state\r\n        const idCoordinatore = this.props.match.params.id\r\n\r\n        if(nome.trim() === \"\" || cognome.trim() === \"\" || email === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(!this.isExistingCorso(corso)){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Corso non valido.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/coordinatori/\" + idCoordinatore, \"put\", {\r\n            coordinatore: {\r\n                idCoordinatore,\r\n                nome: nome.trim(),\r\n                cognome: cognome.trim(),\r\n                email,\r\n                idCorso: corso\r\n            }\r\n        }, (_: any) => {\r\n            message.success(\"Tutor modificato con successo!\")\r\n            routerHistory.push(superAdminRoute+\"/tutor\")\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { nome, cognome, email, listaCorsi, corso } = this.state\r\n\r\n        if(!listaCorsi){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-2 text-center\">Modifica di un coordinatore</h3>\r\n\r\n            <form onSubmit={this.modificaTutor}>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Nome</label>\r\n                        <input name=\"name\" type=\"text\" className=\"form-control\" value={nome} onChange={this.changeNome} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Cognome</label>\r\n                        <input name=\"surname\" type=\"text\" className=\"form-control\" value={cognome} onChange={this.changeCognome} />\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">E-mail</label>\r\n                        <input name=\"email\" type=\"email\" className=\"form-control\" value={email} onChange={this.changeEmail} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Corso gestito</label>\r\n                        <select name=\"anno\" onChange={this.changeCorso} className=\"custom-select\">\r\n                            {\r\n                                listaCorsi.map(c => {\r\n                                    let selected = corso === c.idCorso\r\n\r\n                                    return <option value={c.idCorso} selected={selected}>{c.nome}</option>\r\n                                })\r\n                            }\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <button type=\"submit\" className=\"btn btn-success text-uppercase w-100\">Modifica coordinatore</button>\r\n            </form>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { NavLink, Route, Router, Switch } from \"react-router-dom\"\r\nimport { routerHistory } from \"../..\"\r\nimport LogoCorso from \"../LogoCorso\"\r\nimport Page404 from \"../Page404\"\r\nimport { superAdminRoute } from \"../../utilities\"\r\nimport CorsiList from \"./CorsiList\"\r\nimport AddNewCorso from \"./AddNewCorso\"\r\nimport LoginAdmin from \"./LoginAdmin\"\r\nimport EditCorso from \"./EditCorso\"\r\nimport TutorList from \"./TutorList\"\r\nimport AddNewTutor from \"./AddNewTutor\"\r\nimport EditTutor from \"./EditTutor\"\r\nimport Footer from \"../Footer\"\r\n\r\nexport default class SuperDashboard extends React.Component{\r\n\r\n    componentWillUnmount = () => {\r\n        sessionStorage.removeItem(\"superSession\")\r\n    }\r\n\r\n    render(): JSX.Element{\r\n\r\n        let session = sessionStorage.getItem(\"superSession\")\r\n        \r\n        if(!session)\r\n            return <LoginAdmin />\r\n\r\n        return <div className=\"container-fluid\">\r\n            <Router history={routerHistory}>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3 bg-blue p-0 menu\">\r\n                        \r\n                        <LogoCorso idCorso={0} />\r\n\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(superAdminRoute+\"/studenti\")} to={superAdminRoute+\"/tutor\"}>\r\n                            <span><i className=\"fal fa-users-crown fa-fw mr-1\"></i> Coordinatori</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(superAdminRoute+\"/corsi\")} to={superAdminRoute+\"/corsi\"}>\r\n                            <span><i className=\"fal fa-list-alt fa-fw mr-1\"></i> Corsi</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => {\r\n                            sessionStorage.removeItem(\"superSession\")\r\n                            routerHistory.push(superAdminRoute)\r\n                        }} exact to={superAdminRoute+\"/login\"}>\r\n                            <span><i className=\"fal fa-power-off fa-fw mr-1\"></i> Esci</span>\r\n                        </NavLink>\r\n\r\n                        <Footer inMenu />\r\n                    </div>\r\n  \r\n                    <Switch>\r\n                        <Route exact path={superAdminRoute} render={() => {\r\n                            routerHistory.push(superAdminRoute+\"/tutor\")\r\n\r\n                            return null\r\n                        }} />\r\n\r\n                        <Route exact path={superAdminRoute+\"/tutor\"} render={() => (\r\n                            <TutorList />\r\n                        )} />\r\n\r\n                        <Route exact path={superAdminRoute+\"/tutor/new\"} render={() => (\r\n                            <AddNewTutor />\r\n                        )} />\r\n\r\n                        <Route exact path={superAdminRoute+\"/tutor/edit/:id\"} render={(routeProps) => (\r\n                            <EditTutor {...routeProps} />\r\n                        )} />\r\n\r\n                        <Route exact path={superAdminRoute+\"/corsi\"} render={() => (\r\n                            <CorsiList />\r\n                        )} />\r\n\r\n                        <Route exact path={superAdminRoute+\"/corsi/new\"} render={() => (\r\n                            <AddNewCorso />\r\n                        )} />\r\n\r\n                        <Route exact path={superAdminRoute+\"/corsi/edit/:id\"} render={(routeProps) => (\r\n                            <EditCorso {...routeProps} />\r\n                        )} />\r\n\r\n                        <Route render={() => <Page404 goTo={superAdminRoute} />} />\r\n\r\n                    </Switch>\r\n                        \r\n                </div>\r\n            </Router>\r\n        </div>\r\n    }\r\n}\r\n","import React from \"react\"\r\nimport { Modal, Icon } from \"antd\"\r\nimport { mountLogin, unmountLogin, siteUrl } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { routerHistory } from \"../..\"\r\nimport { areStudent } from \"../../models/IStudent\"\r\nimport LogoCorso from \"../LogoCorso\"\r\nimport Footer from \"../Footer\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly codice: string\r\n    readonly loading: boolean\r\n}\r\n\r\nexport default class CodiceSegreto extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            codice: \"\",\r\n            loading: false\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        mountLogin()\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        unmountLogin()\r\n    }\r\n\r\n    changeCodice = (event: any) => {\r\n        let code = event.target.value\r\n\r\n        this.setState({\r\n            codice: code.trim()\r\n        })\r\n    }\r\n\r\n    inviaCodice = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { codice } = this.state\r\n\r\n        if(codice === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire il campo.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        this.toggleLoading()\r\n\r\n        Axios.post(siteUrl+\"/api/firmaremota/accessoremoto\", codice, {\r\n            headers: {\"Content-Type\": \"application/json\"}\r\n        }).then(response => {\r\n            let data = response.data\r\n\r\n            if(areStudent(data)){\r\n                sessionStorage.removeItem(\"adminSession\")\r\n                sessionStorage.removeItem(\"superSession\")\r\n                sessionStorage.setItem(\"confermaCasa\", JSON.stringify(data))\r\n                routerHistory.push(\"/firmacasa\")\r\n            }else{\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: \"Il codice non corrisponde a nessun corso/classe, oppure è scaduto (chiedi al tuo coordinatore di cambiarlo).\",\r\n                    centered: true,\r\n                    maskClosable: true\r\n                })\r\n            }\r\n\r\n            this.toggleLoading()\r\n        }).catch(_ => {\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Il codice non è valido.\",\r\n                centered: true,\r\n                maskClosable: true\r\n            })\r\n\r\n            this.toggleLoading()\r\n        })\r\n    }\r\n\r\n    toggleLoading = () => {\r\n        this.setState({\r\n            loading: !this.state.loading\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { codice, loading } = this.state\r\n\r\n        return <div className=\"col-11 col-lg-5 mx-auto\" id=\"loginBlock\">\r\n            <div className=\"w-100\">\r\n                <form className=\"w-100 bg-white p-3 rounded shadow\" onSubmit={this.inviaCodice}>\r\n                    <h3 className=\"d-inline-block\">Accesso firma da casa</h3>\r\n                    <LogoCorso forLogin />\r\n\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-secondary\">Codice segreto</label>\r\n                        <input name=\"username\" type=\"text\" className=\"form-control\" value={codice} onChange={this.changeCodice} />\r\n                    </div>\r\n\r\n                    <p className=\"text-muted\">Chiedi al tuo coordinatore il codice segreto per accedere alla firma da casa.</p>\r\n\r\n                    <button type=\"submit\" className=\"btn btn-lg btn-success w-100 text-uppercase\" disabled={loading}>\r\n                        {\r\n                            loading && <Icon type=\"loading\" className=\"mr-2 loadable-btn\" spin />\r\n                        }\r\n                        Prosegui\r\n                    </button>\r\n                </form>\r\n\r\n                <Footer />\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n}","export interface IStudent{\r\n    readonly idStudente?: number\r\n    readonly email: string\r\n    readonly idCorso: number\r\n    readonly nome: string\r\n    readonly cognome: string\r\n    readonly annoFrequentazione: number\r\n    readonly cf: string\r\n    readonly password?: string\r\n    readonly dataNascita: string\r\n    readonly codice?: string\r\n    readonly ritirato?: boolean\r\n    readonly dataRitiro?: string\r\n    readonly giornate?: number\r\n    readonly frequenza?: number\r\n    readonly promosso?: boolean\r\n    readonly firmato?: boolean\r\n}\r\n\r\nexport const isStudent = (obj: any) => {\r\n    try{\r\n        return \"nome\" in obj && \"cognome\" in obj && \"idStudente\" in obj\r\n    }\r\n    catch{\r\n        return false\r\n    }\r\n}\r\n\r\nexport const isAccessStudent = (obj: any) => {\r\n    try{\r\n        return \"nome\" in obj && \"cognome\" in obj && \"idStudente\" in obj && \"password\" in obj && \"idCorso\" in obj && \"annoFrequentazione\" in obj && \"codice\" in obj\r\n    }\r\n    catch{\r\n        return false\r\n    }\r\n}\r\n\r\nexport const areStudent = (obj: any) => {\r\n    try{\r\n        obj.forEach((s: any) => {\r\n            if(!isStudent(s))\r\n                return false\r\n        })\r\n\r\n        return true\r\n    }\r\n    catch{\r\n        return false\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, Radio, Icon, Tooltip, Spin } from \"antd\"\r\nimport { mountLogin, unmountLogin, siteUrl, convertFromUTC } from \"../../utilities\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\nimport LogoCorso from \"../LogoCorso\"\r\nimport { IMessage } from \"../../models/IMessage\"\r\nimport { askPassword } from \"../AskConferma\"\r\nimport Axios from \"axios\"\r\nimport { ILezione } from \"../../models/ILezione\"\r\nimport Footer from \"../Footer\"\r\nimport { routerHistory } from \"../..\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly studenti: IStudent[]\r\n    readonly selectedStudente: IStudent\r\n    readonly lezione: ILezione\r\n    readonly noLezione: boolean\r\n}\r\n\r\nexport default class FirmaCasa extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            studenti: null,\r\n            selectedStudente: null,\r\n            lezione: null,\r\n            noLezione: false\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        mountLogin()\r\n        this.caricaLezione()\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        unmountLogin()\r\n    }\r\n\r\n    inviaFirma = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { selectedStudente, lezione } = this.state\r\n\r\n        if(!selectedStudente){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Selezionare uno studente.\",\r\n                maskClosable: true\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/firmaremota/firmaremotastudente\", \"post\", {\r\n            idStudente: selectedStudente.idStudente,\r\n            idLezione: lezione.idLezione\r\n        }, (response: any) => {\r\n            let popup = response.data as IMessage\r\n\r\n            Modal.info({\r\n                title: popup.title,\r\n                content: <div style={{ marginLeft: 38 }}>{popup.message}</div>,\r\n                icon: <i className={\"float-left mr-3 far \"+popup.icon} style={{ color: popup.iconColor, fontSize: 22 }}/>,\r\n                maskClosable: false,\r\n                onOk: () => routerHistory.push(\"/\")\r\n            })\r\n        }, null, \"Inserisci la tua password\")\r\n    }\r\n\r\n    firmaDocente = () => {\r\n        const { lezione, studenti } = this.state\r\n\r\n        Axios.post(siteUrl+\"/api/docenti/richiestacodice\", lezione.idDocente, {\r\n            headers: {\"Content-Type\": \"application/json\"}\r\n        }).then(_ => {\r\n            askPassword(siteUrl+\"/api/firmaremota/firmaremotadocente\", \"post\", {\r\n                idDocente: lezione.idDocente,\r\n                idCorso: studenti[0].idCorso,\r\n                anno: studenti[0].annoFrequentazione,\r\n                idLezione: lezione.idLezione\r\n            }, (response: any) => {\r\n                let popup = response.data as IMessage\r\n    \r\n                Modal.info({\r\n                    title: popup.title,\r\n                    content: <div style={{ marginLeft: 38 }}>{popup.message}</div>,\r\n                    icon: <i className={\"float-left mr-3 far \" + popup.icon} style={{ color: popup.iconColor, fontSize: 22 }}/>,\r\n                    maskClosable: false,\r\n                    onOk: () => routerHistory.push(\"/\")\r\n                })\r\n            }, null, \"Inserisci il codice che ti abbiamo inviato per e-mail\")\r\n        })\r\n    }\r\n\r\n    scegliStudente = (s: IStudent) => {\r\n        this.setState({\r\n            selectedStudente: s\r\n        })\r\n    }\r\n\r\n    caricaLezione = () => {\r\n        let studenti = JSON.parse(sessionStorage.getItem(\"confermaCasa\")) as any[],\r\n        temp = studenti[0]\r\n\r\n        Axios.get(siteUrl+\"/api/lezioni/\"+temp.idCorso+\"/\"+temp.annoFrequentazione).then(response => {\r\n            if(typeof(response.data) === \"string\"){\r\n                this.setState({\r\n                    noLezione: true,\r\n                    studenti: studenti as IStudent[]\r\n                })\r\n            }else{\r\n                let lezione = response.data as ILezione\r\n\r\n                studenti.forEach((s, i) => {\r\n                    Axios.get(siteUrl+\"/api/presenze/checkentrata/\" + lezione.idLezione+\"/\"+s.idStudente).then(response => {\r\n                        let firmato = response.data as boolean\r\n        \r\n                        s.firmato = firmato\r\n\r\n                        if(i === studenti.length - 1){\r\n                            this.setState({\r\n                                lezione,\r\n                                studenti: studenti as IStudent[]\r\n                            })\r\n                        }\r\n                    })\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { studenti, selectedStudente, lezione, noLezione } = this.state\r\n\r\n        if(!studenti){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50, color: \"#fff\" }} spin />\r\n\r\n            return <div className=\"col-12 px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        if(!studenti.length){\r\n            return <div className=\"col-11 col-lg-4 mx-auto\" id=\"loginBlock\">\r\n                <div className=\"w-100 bg-white p-3 rounded shadow\">\r\n                    <p className=\"text-muted m-0 text-center\">\r\n                        <i className=\"fa fa-ban fa-fw fa-lg text-danger\"></i> Non è stato trovato nessuno studente.</p>\r\n                </div>\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col-11 col-lg-5 mx-auto\" id=\"loginBlock\">\r\n            <div className=\"w-100\">\r\n                <div className=\"bg-white p-3 rounded shadow mx-auto mb-3 col-12 col-md-6 pos-lg-fixed\">\r\n                    {\r\n                        lezione || (!lezione && noLezione) ? <div>\r\n                            {\r\n                                !noLezione ? <Tooltip title={lezione.titolo}>\r\n                                    <h5 className=\"mb-0 text-truncate\">{lezione.titolo}</h5>\r\n                                </Tooltip> : <h5 className=\"mb-0 text-truncate\">Non c'è lezione.</h5>\r\n                            }\r\n                            {\r\n                                !noLezione && <small className=\"text-muted\">{convertFromUTC(lezione.oraInizio)} - {convertFromUTC(lezione.oraFine)}</small>\r\n                            }\r\n                            \r\n                            <button type=\"button\" className=\"btn btn-blue w-100 text-uppercase mt-2\" disabled={lezione === null && noLezione} onClick={this.firmaDocente}>\r\n                                {\r\n                                    lezione === null && !noLezione && <Icon type=\"loading\" className=\"mr-2 loadable-btn\" spin />\r\n                                }\r\n\r\n                                Firma docente\r\n                            </button>\r\n                        </div> : <Icon type=\"loading\" spin style={{ fontSize: 23 }} />\r\n                    }\r\n                </div>\r\n\r\n                <form className=\"w-100 bg-white p-3 rounded shadow\" onSubmit={this.inviaFirma}>\r\n                    <h3 className=\"d-inline-block\">Firma studente</h3>\r\n                    <LogoCorso idCorso={studenti[0].idCorso} forLogin />\r\n\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-secondary\">Scegli lo studente</label>\r\n                        <div className=\"multiselect form-control p-0\">\r\n                            {\r\n                                studenti.map(s => {            \r\n                                    let checked = selectedStudente === s,\r\n                                    classname = checked ? \"checked\" : \"\"\r\n                                    \r\n                                    return <label className={\"option \"+classname}>\r\n                                        <Radio className=\"mr-2\" onChange={() => this.scegliStudente(s)} checked={checked} /> {s.nome} {s.cognome} {s.firmato && <Tooltip title=\"Devi ancora firmare l'uscita!\">\r\n                                            <i className=\"fa fa-exclamation-circle text-warning float-right\" style={{ transform: \"translateY(25%)\" }}></i>\r\n                                        </Tooltip>}\r\n                                    </label>\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n                    <input type=\"submit\" disabled={lezione === null && noLezione} value=\"Firma\" className=\"btn btn-lg btn-success w-100 text-uppercase\"/>\r\n                </form>\r\n\r\n                <Footer />\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n}","import React from \"react\"\r\nimport CodiceSegreto from \"./CodiceSegreto\"\r\nimport FirmaCasa from \"./FirmaCasa\"\r\n\r\nexport default class DashboardCasa extends React.Component{\r\n\r\n    componentWillUnmount = () => {\r\n        sessionStorage.removeItem(\"confermaCasa\")\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        let session = sessionStorage.getItem(\"confermaCasa\")\r\n        \r\n        if(!session)\r\n            return <CodiceSegreto />\r\n\r\n        return <FirmaCasa />\r\n    }\r\n}\r\n","import React from \"react\"\r\nimport { mountLogin, unmountLogin, siteUrl, adminRoute, superAdminRoute } from \"../utilities\"\r\nimport { routerHistory } from \"..\"\r\n\r\nexport default class Docs extends React.Component{\r\n    componentDidMount = () => {\r\n        mountLogin()\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        unmountLogin()\r\n    }\r\n\r\n    scrollToIndex = (id: string) => {\r\n        let block = document.getElementById(id)\r\n        \r\n        block.scrollIntoView()\r\n        block.classList.add(\"highlight\")\r\n\r\n        setTimeout(() => {\r\n            block.classList.remove(\"highlight\")\r\n        }, 1000)\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        return <div className=\"col-11 col-lg-8 mx-auto\" id=\"loginBlock\">\r\n            <div className=\"w-100 bg-white p-4 rounded shadow text-justify my-4\">\r\n                <span className=\"link-primary float-right\" onClick={() => routerHistory.push(\"/\")}>\r\n                    <i className=\"far fa-arrow-left fa-fw fa-lg\"></i> Torna al registro\r\n                </span>\r\n\r\n                <div className=\"clearfix\"></div>\r\n\r\n                <h4 className=\"mb-1\">Come funziona il sito?</h4>\r\n                <p>Tramite questa semplice pagina andremo ad elencare le varie pagine del sito, nonché la modalità di accesso ad esse, suddividendo per i ruoli principali.</p>\r\n\r\n                <div className=\"ml-4\">\r\n                    <h6>Indice:</h6>\r\n                    <ul>\r\n                        <li><span className=\"link-primary u-hover\" onClick={() => this.scrollToIndex(\"stuDoc\")}>Studenti e docenti</span></li>\r\n                        <li><span className=\"link-primary u-hover\" onClick={() => this.scrollToIndex(\"tutor\")}>Coordinatori</span></li>\r\n                        <li><span className=\"link-primary u-hover\" onClick={() => this.scrollToIndex(\"admin\")}>Amministratori</span></li>\r\n                    </ul>\r\n                </div>\r\n\r\n                <div className=\"pl-4 p-2 rounded overflow-hidden\" id=\"stuDoc\">\r\n                    <h6>Studenti e Docenti</h6>\r\n                    <p>Gli studenti e i docenti avranno la possibilità di firmare la loro entrata/uscita da una lezione tramite <a href={siteUrl+\"/#/\"} target=\"_blank\" rel=\"noopener noreferrer\">questo</a> URL.</p>\r\n                    <p>Una volta scelti il corso e la classe, l'accesso alla firma è possibile <strong>solamente</strong> tramite un codice segreto, fornito dal coordinatore del corso o, eventualmente, dal docente incaricato della lezione.</p>\r\n                    <p className=\"mb-0\">Tramite <a href={siteUrl+\"/#/firmacasa\"} target=\"_blank\" rel=\"noopener noreferrer\">questo</a> URL è possibile firmare da casa qualora sia necessario farlo. L'accesso alla firma è potretto da un codice segreto che il coordinatore del corso può generare su richiesta. Gli studenti dovranno solamente scegliere il loro nome nella lista, verrà quindi inviata un'e-mail con un codice segreto, da inserire per confermare la propria identità. Il procedimento rimane identico anche per i docenti, con la differenza che quest'ultimi potranno firmare tramite un semplice bottone.</p>\r\n                </div>\r\n\r\n                <div className=\"pl-4 p-2 rounded overflow-hidden\" id=\"tutor\">\r\n                    <h6>Coordinatori</h6>\r\n                    <p className=\"mb-2\">I coordinatori avranno la possibilità di gestire il corso a cui sono stati assegnati. Tramite <a href={siteUrl+\"/#\"+adminRoute} target=\"_blank\" rel=\"noopener noreferrer\">questo</a> URL si può accedere al gestionale, inserendo Username e Password ricevuti via e-mail dall'amministratore.</p>\r\n                    <p className=\"mb-2\">\r\n                        Grazie al gestionale, è possibile gestire le seguenti attività:\r\n                    </p>\r\n\r\n                    <ul>\r\n                        <li>Homepage:</li>\r\n                        <ul>\r\n                            <li className=\"bg-transblue\">Visualizzare il codice d'accesso alla firma del corso.</li>\r\n                            <li>Tenere traccia delle lezioni attualmente in corso nelle classi, con la lista degli studenti presenti.</li>\r\n                        </ul>\r\n                        <li>Studenti:</li>\r\n                        <ul>\r\n                            <li>Creazione e modifica di studenti, specificando i dati anagrafici e la classe di appartenenza.</li>\r\n                            <li>Possibilità di importare una classe tramite CSV, per velocizzare il processo.</li>\r\n                            <li>Possibilità di spostare gli studenti dal primo al secondo anno.</li>\r\n                            <li>Visualizzazione del dettaglio di uno studente, con la lista delle lezioni frequentate da quest'ultimo.</li>\r\n                            <li>Possibilità di modificare l'entrata o l'uscita di uno studente (nel caso in cui sia stato commesso un errore) tramite appositi bottoni nella lista delle lezioni frequentate.</li>\r\n                            <li>Possibilità di ritirare uno studente tramite apposito bottone nella lista degli studenti.</li>\r\n                            <li>Possibilità di archiviare uno studente (nel caso in cui quest'ultimo sia stato promosso) tramite apposito bottone nella lista degli studenti.</li>\r\n                        </ul>\r\n                        <li>Docenti:</li>\r\n                        <ul>\r\n                            <li>Creazione e modifica di docenti, specificando i dati anagrafici, le materie insegnate e i corsi di appartenenza.</li>\r\n                            <li>Visualizzazione del dettaglio di un docente, con la lista delle lezioni tenute da quest'ultimo.</li>\r\n                            <li>Possibilità di modificare l'entrata o l'uscita di un docente (nel caso in cui sia stato commesso un errore) tramite appositi bottoni nella lista delle lezioni tenute.</li>\r\n                            <li>Possibilità di ritirare un docente dal corso tramite apposito bottone nella lista dei docenti, con possibilità di annullare l'azione di ritiro in caso di reintegro nel corso.</li>\r\n                        </ul>\r\n                        <li>Materie:</li>\r\n                        <ul>\r\n                            <li>Creazione e modifica di materie del corso, assegnabili poi ai docenti.</li>\r\n                        </ul>\r\n                        <li>Calendario:</li>\r\n                        <ul>\r\n                            <li>\r\n                                <p>Possibilità di configurare il calendario delle classi del corso, caricando così le lezioni nel database del registro.</p>\r\n\r\n                                <p className=\"bg-transblue\">Gli eventi del calendario dovranno <strong>obbligatoriamente</strong> essere scritti nel seguente modo:\r\n                                    <div className=\"text-center\">\r\n                                        <strong>LUOGO: DOCENTE - MATERIA</strong> (esempio: LAB 1 PASCAL: Matteo Mascellani - PHP).\r\n                                    </div>\r\n                                </p>\r\n                                \r\n                                <p className=\"mb-0 bg-transblue\"><strong>ATTENZIONE</strong>: prima di configurare il calendario è necessario creare tutte le materie e i docenti citati nel calendario stesso. Ovviamente, è possibile salvare nuovamente il calendario per aggiornare le lezioni nel caso in cui si aggiungano docenti o materie durante l'anno.</p>\r\n                            </li>\r\n                        </ul>\r\n                        <li>Firma da remoto:</li>\r\n                        <ul>\r\n                            <li>\r\n                                <p>Possibilità di abilitare la firma da casa qualora sia necessario.</p>\r\n\r\n                                <p>Tramite <a href={siteUrl+\"/#\"+adminRoute+\"/codicefirma\"} target=\"_blank\" rel=\"noopener noreferrer\">questo</a> URL è possibile creare un codice segreto per identificare la classe scelta. Il codice andrà condiviso con gli studenti, e <u>varrà solamente per il giorno in cui è stato generato</u>.</p>\r\n                                \r\n                                <p>Da <a href={siteUrl+\"/#/firmacasa\"} target=\"_blank\" rel=\"noopener noreferrer\">questo</a> URL gli studenti saranno in grado di inserire il codice creato e, scegliendo il loro nome e cognome, potranno firmare per la lezione programmata.</p>\r\n\r\n                                <p className=\"mb-0\">Il procedimento rimane identico anche per i docenti, con la differenza che quest'ultimi potranno firmare tramite un semplice bottone.</p>\r\n                            </li>\r\n                        </ul>\r\n                    </ul>\r\n                </div>\r\n                <div className=\"pl-4 p-2 rounded overflow-hidden\" id=\"admin\">\r\n                    <h6>Amministratori</h6>\r\n                    <p className=\"mb-2\">Gli amministratori avranno la possibilità di gestire FITSTIC. Tramite <a href={siteUrl+\"/#\"+superAdminRoute} target=\"_blank\" rel=\"noopener noreferrer\">questo</a> URL si può accedere al gestionale, inserendo Username e Password dell'amministratore.</p>\r\n                    <p className=\"mb-2\">\r\n                        Grazie al gestionale, è possibile gestire le seguenti attività:\r\n                    </p>\r\n\r\n                    <ul>\r\n                        <li>Corsi:</li>\r\n                        <ul>\r\n                            <li>Creazione e modifica di corsi (es: Alan Turing, McLuhan, Hopper, ecc.), con possibilità di inserire nome, luogo e logo del corso.</li>\r\n                            <li>Creazione e modifica di coordinatori, che possono essere assegnati ad un determinato corso per gestirlo di conseguenza. \r\n                                <div className=\"bg-transblue\">Al momento della creazione il nuovo coordinatore riceverà un'e-mail con le credenziali per accedere al gestionale, e il codice per confermare l'accesso all'interfaccia della firma (visualizzabile anche nel gestionale dei coordinatori).</div>\r\n                            </li>\r\n                        </ul>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { routerHistory } from \"../..\"\r\nimport { message, Modal } from \"antd\"\r\nimport { mountLogin, unmountLogin, siteUrl, logoUrl, studentRoute } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport Footer from \"../Footer\"\r\nimport { isAccessStudent } from \"../../models/IStudent\"\r\nimport ForgotPassword from \"../ForgotPassword\"\r\nimport { Cipher } from \"../../models/Cipher\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly userEmail: string\r\n    readonly userCode: string\r\n    readonly showForgot: boolean\r\n}\r\n\r\nexport default class LoginStudent extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            userEmail: \"\",\r\n            userCode: \"\",\r\n            showForgot: false\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        mountLogin()\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        unmountLogin()\r\n    }\r\n\r\n    changeMail = (event: any) => {\r\n        let email = event.target.value.trim()\r\n\r\n        this.setState({\r\n            userEmail: email\r\n        })\r\n    }\r\n\r\n    changeCode = (event: any) => {\r\n        let code = event.target.value\r\n\r\n        this.setState({\r\n            userCode: code\r\n        })\r\n    }\r\n\r\n    switchForgot = () => {\r\n        this.setState({\r\n            showForgot: !this.state.showForgot\r\n        })\r\n    }\r\n\r\n    tryAccess = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { userEmail, userCode } = this.state\r\n\r\n        let cipher = new Cipher(),\r\n        password = cipher.encode(userCode)\r\n\r\n        Axios.post(siteUrl+\"/api/studenti/loginstudente\", {\r\n            email: userEmail,\r\n            password\r\n        }).then(response => {\r\n            let data = response.data\r\n\r\n            if(isAccessStudent(data)){\r\n                sessionStorage.setItem(\"studentSession\", JSON.stringify(data))\r\n                routerHistory.push(studentRoute)\r\n                message.success(\"Login effettuato con successo!\")\r\n            }else{\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: response.data,\r\n                    centered: true,\r\n                    maskClosable: true\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { userCode, userEmail, showForgot } = this.state\r\n\r\n        return <div className=\"col-11 col-lg-5 mx-auto\" id=\"loginBlock\">\r\n            <div className=\"w-100\">\r\n                <form className=\"w-100 bg-white p-3 rounded shadow\" onSubmit={this.tryAccess}>\r\n                    <h3 className=\"d-inline-block\">Accesso studenti</h3>\r\n                    <img src={logoUrl} height=\"40\" className=\"float-right logo\" alt=\"logo\" />\r\n\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-secondary\">E-mail</label>\r\n                        <input name=\"email\" type=\"email\" className=\"form-control\" value={userEmail} onChange={this.changeMail} />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-secondary\">Password</label>\r\n                        <input name=\"code\" type=\"password\" className=\"form-control\" value={userCode} onChange={this.changeCode} />\r\n                    </div>\r\n\r\n                    <input type=\"submit\" value=\"Accedi\" className=\"btn btn-lg btn-success w-100 text-uppercase\"/>\r\n\r\n                    <span className=\"link-blue u-hover d-block mt-3 text-center\" onClick={this.switchForgot}>Hai dimenticato la password?</span>\r\n                </form>\r\n\r\n                <Footer />\r\n\r\n                <ForgotPassword show={showForgot} closeModal={this.switchForgot} forStudent />\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n}","import React from \"react\"\r\nimport Axios from \"axios\"\r\nimport { Modal, Button, DatePicker, TimePicker } from \"antd\"\r\nimport { validateTime, formatItalian, siteUrl, formattaData } from \"../../utilities\"\r\nimport locale from \"antd/es/date-picker/locale/it_IT\"\r\nimport moment from \"moment\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\nimport { IMessage } from \"../../models/IMessage\"\r\n\r\nexport interface IProps{\r\n    readonly studente: IStudent\r\n    readonly visible: boolean\r\n    readonly annullaAggiunta: () => void\r\n    readonly reloadStage: () => void\r\n}\r\nexport interface IState{\r\n    readonly date: string\r\n    readonly oraInizio: string\r\n    readonly oraFine: string\r\n    readonly argomento: string\r\n    readonly loading: boolean\r\n}\r\n\r\nexport default class AddOreStage extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            date: formatItalian(new Date().toString()),\r\n            oraFine: \"\",\r\n            oraInizio: \"\",\r\n            argomento: \"\",\r\n            loading: false\r\n        }\r\n    }\r\n\r\n    changeData = (data: string) => {\r\n        this.setState({\r\n            date: data\r\n        })\r\n    }\r\n\r\n    changeInizio = (_: any, oraInizio: string) => {\r\n        console.log(oraInizio)\r\n        this.setState({\r\n            oraInizio\r\n        })\r\n    }\r\n\r\n    changeFine = (_: any, oraFine: string) => {\r\n        this.setState({\r\n            oraFine\r\n        })\r\n    }\r\n\r\n    changeArgomento = (e: any) => {\r\n        this.setState({\r\n            argomento: e.target.value\r\n        })\r\n    }\r\n\r\n    toggleLoading = () => {\r\n        this.setState({\r\n            loading: !this.state.loading\r\n        })\r\n    }\r\n\r\n    addStage = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { studente } = this.props,\r\n        { oraFine, oraInizio, argomento, date } = this.state,\r\n        currentDate = new Date(),\r\n        data = date.split(\"-\")\r\n\r\n        if(argomento === \"\" || date === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(data[2] !== currentDate.getFullYear().toString()){\r\n\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Anno non valido. Puoi inserire solo l'anno corrente.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(!validateTime(oraFine) || !validateTime(oraInizio)){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Orari non validi. (ore:minuti)\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(oraFine === oraInizio){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Gli orari devono essere diversi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        this.toggleLoading()\r\n\r\n        Axios.post(siteUrl+\"/api/studenti/postorestage/\" + studente.idStudente, {\r\n            password: studente.password,\r\n            argomento,\r\n            data: formattaData(date, true),\r\n            oraInizio: new Date(`${data[2]}-${data[1]}-${data[0]} ${oraInizio}`),\r\n            oraFine: new Date(`${data[2]}-${data[1]}-${data[0]} ${oraFine}`),\r\n        }).then(response => {\r\n            let output = response.data as IMessage\r\n\r\n            this.toggleLoading()\r\n\r\n            if(output.type === \"success\")\r\n                this.props.reloadStage()\r\n            else{\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: output.message\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { date, argomento, loading } = this.state,\r\n        { visible, annullaAggiunta } = this.props\r\n\r\n        return <Modal title=\"Registrazione ore di stage\" visible={visible} footer={[\r\n            <Button type=\"primary\" onClick={this.addStage} loading={loading}>Aggiungi</Button>,\r\n            <Button type=\"default\" onClick={annullaAggiunta}>Annulla</Button>\r\n        ]} onCancel={annullaAggiunta}>\r\n            <form onSubmit={this.addStage}>\r\n                <div className=\"form-group\">\r\n                    <label className=\"text-secondary\">Data</label>\r\n                    <DatePicker locale={locale} className=\"w-100 select-date\" onChange={(_, d2) => this.changeData(d2)} format=\"DD-MM-YYYY\" defaultValue={moment(date, \"DD-MM-YYYY\")} disabled={loading} />\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                    <label className=\"text-secondary\">Mansioni svolte</label>\r\n                    <textarea value={argomento} onChange={this.changeArgomento} className=\"form-control\" disabled={loading}></textarea>\r\n                </div>\r\n\r\n                <div className=\"form-group row mx-0\">\r\n                    <div className=\"col pr-1 pl-0\">\r\n                        <label className=\"text-secondary\">Inizio</label>\r\n                        <TimePicker defaultValue={moment(new Date(), 'HH:mm')} format='HH:mm' onChange={this.changeInizio} className=\"w-100 select-date\" minuteStep={10} placeholder=\"Seleziona una data\" />\r\n                    </div>\r\n\r\n                    <div className=\"col pr-0 pl-1\">\r\n                        <label className=\"text-secondary\">Fine</label>\r\n                        <TimePicker defaultValue={moment(new Date(), 'HH:mm')} format='HH:mm' onChange={this.changeFine} className=\"w-100 select-date\" minuteStep={10} placeholder=\"Seleziona una data\" />\r\n                    </div>\r\n                </div>\r\n\r\n                <input type=\"submit\" className=\"d-none\" />\r\n            </form>\r\n        </Modal>\r\n    }\r\n}","import React from \"react\"\r\nimport Axios from \"axios\"\r\nimport { Spin, Icon, Progress, Tooltip } from \"antd\"\r\nimport { IStage } from \"../../models/IStage\"\r\nimport { siteUrl, formatItalian, convertFromUTC } from \"../../utilities\"\r\nimport AddOreStage from \"./AddOreStage\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\n\r\nexport interface IProps{\r\n    readonly studente: IStudent\r\n}\r\nexport interface IState{\r\n    readonly oreList: IStage[]\r\n    readonly addNew: boolean\r\n    readonly totaleOre: number\r\n    readonly isActive: boolean\r\n}\r\n\r\nexport default class StageList extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            oreList: null,\r\n            addNew: false,\r\n            totaleOre: 0,\r\n            isActive: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.loadOre()\r\n\r\n        const { studente } = this.props\r\n\r\n        Axios.get(siteUrl+\"/api/corsi/getstagevalue/\"+studente.idCorso+\"/\"+studente.annoFrequentazione).then(response => {\r\n            let isActive = response.data as boolean\r\n\r\n            this.setState({\r\n                isActive\r\n            })\r\n        })\r\n    }\r\n\r\n    loadOre = () => {\r\n        this.setState({\r\n            oreList: null,\r\n            addNew: false\r\n        })\r\n\r\n        Axios.get(siteUrl+\"/api/studenti/getorestage/\"+this.props.studente.idStudente).then(response => {\r\n            let ore = response.data as IStage[],\r\n            totale = 0\r\n\r\n            ore.forEach(o => totale += o.totaleRelativo)\r\n\r\n            this.setState({\r\n                oreList: ore,\r\n                totaleOre: totale\r\n            })\r\n        })\r\n    }\r\n\r\n    toggleAdd = () => {\r\n        this.setState({\r\n            addNew: !this.state.addNew\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { oreList, addNew, totaleOre, isActive } = this.state,\r\n        { studente } = this.props,\r\n        icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n        if(!oreList){\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            \r\n            <div className=\"p-3 bg-white border rounded col-4 mb-3\">\r\n                <strong>Ore svolte</strong>: {totaleOre} su 800 totali\r\n                <Progress percent={Math.floor(((100 * totaleOre / 800) + Number.EPSILON) * 100) / 100} />\r\n            </div>\r\n\r\n            <h3 className=\"d-inline-block\">Ore di stage segnate</h3>\r\n\r\n            {\r\n                isActive  && <button className=\"btn btn-success float-right mb-3\" type=\"button\" onClick={this.toggleAdd}>\r\n                    <i className=\"fal fa-plus fa-fw\"></i> Aggiungi ore di stage\r\n                </button>\r\n            }\r\n\r\n            {\r\n                isActive === null && <Spin indicator={icon} />\r\n            }\r\n\r\n            <div className=\"clearfix\"></div>\r\n\r\n            {\r\n                !oreList.length ? <div className=\"text-center\">Non hai ancora segnato ore di stage.</div> : <table className=\"table table-bordered text-center\">\r\n                    <tbody>\r\n                        <tr>\r\n                            <th style={{width: \"15%\"}}>Data</th>\r\n                            <th style={{width: \"25%\"}}>Descrizione</th>\r\n                            <th>Inizio</th>\r\n                            <th>Fine</th>\r\n                            <th>Ore svolte</th>\r\n                        </tr>\r\n\r\n                        {\r\n                            oreList.map(s => {        \r\n                                return <tr>\r\n                                    <td>{formatItalian(s.data)}</td>\r\n                                    <Tooltip title={s.argomento}>\r\n                                        <td style={{maxWidth: 0}} className=\"text-truncate\">{s.argomento}</td>\r\n                                    </Tooltip>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{convertFromUTC(s.oraInizio + \"Z\")}</td>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{convertFromUTC(s.oraFine + \"Z\")}</td>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{s.totaleRelativo}</td>\r\n                                </tr>\r\n                            })\r\n                        }\r\n                    </tbody>\r\n                </table>\r\n            }\r\n\r\n            <AddOreStage studente={studente} annullaAggiunta={this.toggleAdd} visible={addNew} reloadStage={this.loadOre} />\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport Axios from \"axios\"\r\nimport { Button, Progress, Spin, Icon, Statistic, Tooltip } from \"antd\"\r\nimport QRCode from \"qrcode.react\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\nimport { siteUrl, avocadoUrl } from \"../../utilities\"\r\n\r\nexport interface IProps{\r\n    readonly studente: IStudent\r\n}\r\nexport interface IState{\r\n    readonly oreTotali: number\r\n    readonly totPresenze: number\r\n}\r\n\r\nexport default class Home extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            oreTotali: null,\r\n            totPresenze: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Axios.get(siteUrl+\"/api/studenti/gethoursamount/\" + this.props.studente.idStudente).then(response => {\r\n            this.setState({\r\n                totPresenze: response.data as number\r\n            })\r\n        })\r\n\r\n        Axios.get(siteUrl+\"/api/studenti/gettotaleorelezioni/\" + this.props.studente.idStudente).then(response => {\r\n            this.setState({\r\n                oreTotali: response.data as number\r\n            })\r\n        })\r\n    }\r\n\r\n    downloadQR = () => {\r\n        const { studente } = this.props,\r\n        canvas = document.getElementById(\"qr-code-image\") as any,\r\n        pngUrl = canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\")\r\n        let downloadLink = document.createElement(\"a\")\r\n\r\n        downloadLink.href = pngUrl\r\n        downloadLink.download = `qrcode${studente.nome}${studente.cognome}.png`\r\n        document.body.appendChild(downloadLink)\r\n        downloadLink.click()\r\n        document.body.removeChild(downloadLink)\r\n    }\r\n\r\n    render = () => {\r\n        const { studente } = this.props,\r\n        { oreTotali, totPresenze } = this.state\r\n\r\n        let perc = Math.round(100 * totPresenze / oreTotali),\r\n        color = perc >= 80 ? \"var(--success)\" : \"var(--danger)\"\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <div className=\"row mx-0\">\r\n                <div className=\"col-12 col-md-4 pl-md-0 mb-2 mb-md-0\">\r\n                    <div className=\"p-3 bg-white border rounded\">\r\n                        <Tooltip title={studente.nome + \" \" + studente.cognome}>\r\n                            <h4 className=\"text-uppercase mb-2 text-truncate\">{studente.nome} {studente.cognome}</h4>\r\n                        </Tooltip>\r\n\r\n                        <div className=\"text-center\">\r\n                            <QRCode id=\"qr-code-image\" value={studente.codice} size={200} imageSettings={{ src: avocadoUrl, height: 50, width: 50, excavate: true }} />\r\n                        </div>\r\n\r\n                        <Button type=\"primary\" className=\"float-right mt-3\" onClick={this.downloadQR}>\r\n                            <i className=\"far fa-arrow-to-bottom mr-2\"></i> Salva codice\r\n                        </Button>\r\n\r\n                        <div className=\"clearfix\"></div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-5 pr-md-0\">\r\n                    <div className=\"p-3 bg-white border rounded\">\r\n                        {\r\n                            perc !== null ? <Progress type=\"circle\" percent={perc} width={80} className=\"float-left mr-3\" strokeColor={color} format={percent => `${percent}%`}  /> : <Spin indicator={<Icon type=\"loading\" spin />} />\r\n                        }\r\n\r\n                        {\r\n                            oreTotali !== null && totPresenze !== null ? <Statistic title=\"Presenze totali (ore)\" value={totPresenze} suffix={\"/ \"+oreTotali} decimalSeparator=\",\" groupSeparator=\".\" /> : <Spin indicator={<Icon type=\"loading\" spin />} />\r\n                        }\r\n\r\n                        <div className=\"clearfix\"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { NavLink, Route, Router, Switch } from \"react-router-dom\"\r\nimport { routerHistory } from \"../..\"\r\nimport LogoCorso from \"../LogoCorso\"\r\nimport Page404 from \"../Page404\"\r\nimport { studentRoute } from \"../../utilities\"\r\nimport Footer from \"../Footer\"\r\nimport LoginStudent from \"./LoginStudent\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\nimport StageList from \"./StageList\"\r\nimport Home from \"./Home\"\r\n\r\nexport default class StudentDashboard extends React.Component{\r\n\r\n    componentWillUnmount = () => {\r\n        sessionStorage.removeItem(\"studentSession\")\r\n    }\r\n\r\n    render(): JSX.Element{\r\n\r\n        let session = sessionStorage.getItem(\"studentSession\")\r\n        \r\n        if(!session)\r\n            return <LoginStudent />\r\n\r\n        let studente = JSON.parse(session) as IStudent\r\n\r\n        return <div className=\"container-fluid\">\r\n            <Router history={routerHistory}>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3 bg-blue p-0 menu\">\r\n                        \r\n                        <LogoCorso idCorso={0} />\r\n\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(studentRoute+\"/home\")} to={studentRoute+\"/home\"}>\r\n                            <span><i className=\"fal fa-home-alt fa-fw mr-1\"></i> Home</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(studentRoute+\"/stage\")} to={studentRoute+\"/stage\"}>\r\n                            <span><i className=\"fal fa-briefcase fa-fw mr-1\"></i> Stage</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => {\r\n                            sessionStorage.removeItem(\"studentSession\")\r\n                            routerHistory.push(studentRoute)\r\n                        }} exact to={studentRoute+\"/login\"}>\r\n                            <span><i className=\"fal fa-power-off fa-fw mr-1\"></i> Esci</span>\r\n                        </NavLink>\r\n\r\n                        <Footer inMenu />\r\n                    </div>\r\n  \r\n                    <Switch>\r\n                        <Route exact path={studentRoute} render={() => {\r\n                            routerHistory.push(studentRoute+\"/home\")\r\n\r\n                            return null\r\n                        }} />\r\n\r\n                        <Route exact path={studentRoute+\"/home\"} render={() => (\r\n                            <Home studente={studente} />\r\n                        )} />\r\n\r\n                        <Route exact path={studentRoute+\"/stage\"} render={() => (\r\n                            <StageList studente={studente} />\r\n                        )} />\r\n\r\n                        <Route render={() => <Page404 goTo={studentRoute} />} />\r\n\r\n                    </Switch>\r\n                        \r\n                </div>\r\n            </Router>\r\n        </div>\r\n    }\r\n}\r\n","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport { createHashHistory } from \"history\"\r\nimport \"./index.scss\"\r\nimport * as serviceWorker from \"./serviceWorker\"\r\nimport Main from \"./comp/Main\"\r\nimport { Router, Switch, Route } from \"react-router-dom\"\r\nimport Dashboard from \"./comp/admin/Dashboard\"\r\nimport Page404 from \"./comp/Page404\"\r\nimport moment from \"moment\"\r\nimport \"moment/locale/it\"\r\nimport SuperDashboard from \"./comp/superadmin/SuperDashboard\"\r\nimport { superAdminRoute, adminRoute, studentRoute } from \"./utilities\"\r\nimport DashboardCasa from \"./comp/firmacasa/DashboardCasa\"\r\nimport Docs from \"./comp/Docs\"\r\nimport StudentDashboard from \"./comp/studente/StudentDashboard\"\r\n\r\nmoment.locale(\"it\")\r\n\r\nexport const routerHistory = createHashHistory()\r\n\r\nReactDOM.render(<Router history={routerHistory}>\r\n    <Switch>\r\n        <Route exact path=\"/\" render={() => {\r\n            routerHistory.push(\"/firme/\")\r\n\r\n            return null\r\n        }} />\r\n\r\n        <Route path=\"/firme/\" render={() => (\r\n            <Main />\r\n        )} />\r\n\r\n        <Route path={adminRoute} render={() => (\r\n            <Dashboard />\r\n        )} />\r\n\r\n        <Route path={studentRoute} render={() => (\r\n            <StudentDashboard />\r\n        )} />\r\n\r\n        <Route path={superAdminRoute} render={() => (\r\n            <SuperDashboard />\r\n        )} />\r\n\r\n        <Route path=\"/firmacasa\" render={() => (\r\n            <DashboardCasa />\r\n        )} />\r\n\r\n        <Route exact path=\"/documentazione\" render={() => (\r\n            <Docs />\r\n        )} />\r\n\r\n        <Route render={() => <Page404 goTo=\"/\" />} />\r\n    </Switch>\r\n</Router>, document.getElementById(\"root\"))\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister()\r\n"],"sourceRoot":""}