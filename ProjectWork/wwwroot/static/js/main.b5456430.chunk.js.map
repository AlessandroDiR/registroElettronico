{"version":3,"sources":["utilities.ts","serviceWorker.ts","models/IMessage.ts","comp/Firma.tsx","comp/Calendario.tsx","comp/LessonsCalendar.tsx","comp/SceltaCorso.tsx","comp/SceltaClasse.tsx","comp/LogoCorso.tsx","comp/CodiceAccesso.tsx","comp/Main.tsx","models/Cipher.ts","comp/ForgotPassword.tsx","comp/admin/LoginTutor.tsx","models/IAdmin.ts","comp/AskConferma.tsx","comp/admin/StudentsList.tsx","comp/admin/AddNewStudent.tsx","comp/admin/PresenzeTable.tsx","comp/admin/StudentDetails.tsx","comp/admin/DocentiList.tsx","comp/admin/AddNewDocente.tsx","comp/admin/LezioniDocenteTable.tsx","comp/admin/DocenteDetails.tsx","comp/admin/EditDocente.tsx","comp/admin/EditStudente.tsx","comp/admin/StudentsImport.tsx","comp/admin/MaterieList.tsx","comp/ImageScale.tsx","comp/admin/ConfigForm.tsx","comp/admin/ConfigCalendar.tsx","comp/Page404.tsx","comp/admin/EditCodiceFirma.tsx","comp/admin/Dashboard.tsx","comp/mobile/QRCodeScreen.tsx","comp/mobile/UserCalendar.tsx","comp/mobile/UserApplication.tsx","comp/superadmin/CorsiList.tsx","comp/superadmin/AddNewCorso.tsx","comp/superadmin/LoginAdmin.tsx","comp/superadmin/EditCorso.tsx","comp/superadmin/TutorList.tsx","comp/superadmin/AddNewTutor.tsx","comp/superadmin/EditTutor.tsx","comp/superadmin/SuperDashboard.tsx","comp/firmacasa/CodiceSegreto.tsx","models/IStudent.ts","comp/firmacasa/FirmaCasa.tsx","comp/firmacasa/DashboardCasa.tsx","index.tsx"],"names":["siteUrl","logoUrl","adminRoute","superAdminRoute","Digits2","n","validateTime","time","test","formattaData","d","convert","from","split","date","Date","Number","getFullYear","getMonth","getDate","formatItalian","capitalizeFirst","name","splitStr","capitalizeQuote","toLowerCase","i","length","charAt","toUpperCase","substring","join","mountLogin","document","getElementsByTagName","classList","add","unmountLogin","remove","imageFileToBase64","file","readImageFile","a","Promise","resolve","reject","reader","FileReader","onload","e","base64Img","Buffer","target","result","toString","onerror","readAsArrayBuffer","resizePopup","mainBlock","getElementById","popup","width","clientWidth","style","checkEnter","callback","keyCode","window","addEventListener","Boolean","location","hostname","match","genericError","title","icon","iconColor","message","Firma","props","maxLength","componentDidMount","id","parseInt","sessionStorage","getItem","Axios","get","then","response","corso","data","setState","changeCode","event","code","value","tryToLog","switchInput","idCorso","anno","axios","post","showMessagePopup","catch","_","disable","input","setAttribute","removeAttribute","focus","setTimeout","state","cambiaCorso","removeItem","routerHistory","push","switchFocus","this","type","spin","className","autoFocus","onChange","onFocus","onBlur","nome","indicator","height","placement","onClick","color","React","PureComponent","Calendario","calendarId","plugins","googleCalendarPlugin","dayGridPlugin","events","googleCalendarId","googleCalendarApiKey","defaultView","fixedWeekCount","firstDay","themeSystem","eventTimeFormat","hour","minute","meridiem","buttonText","today","header","right","locale","eventClick","info","jsEvent","preventDefault","Modal","maskClosable","centered","content","fontSize","start","getHours","getMinutes","end","extendedProps","LessonsCalendar","classe","calendar","idGoogleCalendar","SceltaCorso","corsi","componentWillUnmount","chooseCorso","setItem","map","c","src","logo","alt","SceltaClasse","chooseClasse","Component","LogoCorso","catchNull","forLogin","CodiceAccesso","cambiaCodice","codice","cambiaScelta","inviaCodice","trim","error","onSubmit","Main","focusInput","confermaTutor","history","activeClassName","exact","to","path","render","Cipher","maximum","msg","shift","finalMessage","letter","charInt","charCodeAt","newInt","String","fromCharCode","ForgotPassword","cancelRecover","currentStep","email","newPassword","newPasswordConfirm","idCoordinatore","loading","closeModal","changeMail","changePassword","pass","changePasswordConfirm","increaseStep","decreaseStep","switchLoading","confirmFirstStep","isNaN","confirmSecondStep","savePassword","password","encode","success","onOk","show","Step","Steps","steps","disabled","htmlType","visible","onCancel","footer","size","current","item","key","LoginTutor","changeInputName","adminName","changeInputPassword","psw","adminPsw","tryLogin","username","obj","isAdmin","JSON","stringify","switchForgot","showForgot","askPassword","url","callType","body","preAction","customText","cipher","tutor","parse","admin","sendForm","authAdmin","idAdmin","idAmministratore","authCoordinatore","put","modal","confirm","marginLeft","ref","r","onKeyUp","destroy","okText","cancelText","StudentsList","students","showConfirm","student","cognome","d2","format","okType","theme","dataRitiro","studente","ritirato","idStudente","stu","currentList","indexOf","changeSelection","newList","selection","find","s","filter","concat","selectAll","selectionList","checked","annoFrequentazione","showHideModal","confirmModal","moveStudents","select","studenti","allRetired","group","forEach","sortbyId","b","promuoviStudent","changeFilter","filterStudentsByFilter","Panel","Collapse","TabPane","Tabs","groups","promosso","sort","ritirati","defaultActiveKey","tab","g","checkedAll","tabTitle","element","bg","maxWidth","cf","frequenza","bordered","AddNewStudent","changeNome","changeCognome","changeEmail","changeData","dataNascita","changeAnnoScolastico","annoS","annoScolastico","changeCF","CF","aggiungiStudente","PresenzeTable","presenze","changeEntrata","idPresenza","entrata","editingList","p","ingresso","changeUscita","uscita","startTimeEdit","animateTds","td1","td2","confirmEdit","presenza","idLezione","output","newPresenze","reloadTotali","getCategorie","categorie","lezione","Option","Select","presences","defaultValue","showSearch","l","presenzaEdit","pre","StudentDetails","params","oreTotali","roundToTwo","loadTotali","totPresenze","toggleModal","downloadQR","pngUrl","toDataURL","replace","downloadLink","createElement","href","download","appendChild","click","removeChild","getQRCode","total","Math","round","perc","percent","strokeColor","suffix","decimalSeparator","groupSeparator","DocentiList","docenti","switchList","showAll","showDeleteConfirm","docente","ritiraOAnnulla","idDocente","backRetire","doc","isInCorso","docs","transform","monteOre","orePrimo","oreSecondo","AddNewDocente","materie","aggiungiDocente","corsiSel","materieSel","tenere","insegnare","m","idMateria","switchMateria","materiaId","switchCorso","corsoId","f","classname","LezioniDocenteTable","canEdit","editPresenza","DocenteDetails","display","alignItems","justifyContent","EditDocente","modificaDocente","EditStudente","modificaStudente","moment","fields","label","field","StudentsImport","splitCSV","renderOptions","rows","fileContent","changeVarPos","varName","readFile","showImportPreview","readAsText","list","cells","addList","hidePopup","confirmImport","flexDirection","accept","beforeUpload","MaterieList","showModal","nomeMateria","hideEditModal","showEditModal","nomeEdit","materiaEdit","materia","aggiungiMateria","modificaMateria","changeNomeEdit","ImageScale","scaleImage","scalable","scaled","coords","firstclass","ConfigForm","actualId","changeID","saveConfig","calendario","idCalendario","eventiScartati","warning","inizio","fine","summary","ConfigCalendar","showHelp","top","marginTop","rel","getElementsByClassName","scrollTo","Page404","goTo","EditCodiceFirma","requestCodeChange","Dashboard","session","routeProps","QRCodeScreen","setInterval","reloadCode","studentId","UserCalendar","UserApplication","localStorage","CorsiList","luogo","AddNewCorso","changeLuogo","aggiungiCorso","convertImage","uploadButton","marginBottom","listType","showUploadList","LoginAdmin","isSuperAdmin","EditCorso","modificaCorso","TutorList","t","AddNewTutor","listaCorsi","changeCorso","isExistingCorso","aggiungiTutor","coordinatore","EditTutor","modificaTutor","selected","SuperDashboard","CodiceSegreto","changeCodice","headers","isStudent","areStudent","FirmaCasa","caricaLezione","inviaFirma","selectedStudente","firmaDocente","scegliStudente","temp","titolo","oraInizio","slice","oraFine","DashboardCasa","createHashHistory","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b5456430.chunk.js","sourcesContent":["//export const siteUrl = \"https://localhost:44336\"\r\nexport const siteUrl = \"https://registrofitstic.azurewebsites.net\"\r\nexport const logoUrl = \"fitstic_logo.png\"\r\n\r\nexport const adminRoute = \"/adminpanel\"\r\nexport const superAdminRoute = \"/superpanel\"\r\nexport const docentiRoute = \"/docentipanel\"\r\n\r\nexport const Digits2 = (n: number) => {\r\n    return n < 10 ? \"0\" + n : n\r\n}\r\n\r\nexport const validateTime = (time: string) => {\r\n    return /^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])$/.test(time)\r\n}\r\n\r\nexport const formattaData = (d: string, convert?: boolean) => {\r\n    let from = d.split(/[/-]/g),\r\n    date = convert ? new Date(Number(from[2]), Number(from[1]) - 1, Number(from[0])) : new Date(d)\r\n\r\n    return `${date.getFullYear()}-${Digits2(date.getMonth() + 1)}-${Digits2(date.getDate())}`\r\n}\r\n\r\nexport const formatItalian = (d: string) => {\r\n    let date = new Date(d)\r\n\r\n    return `${Digits2(date.getDate())}-${Digits2(date.getMonth() + 1)}-${date.getFullYear()}` \r\n}\r\n\r\nexport const getDateDay = (d: string) => {\r\n    let date = new Date(d)\r\n\r\n    return Digits2(date.getDate()).toString()\r\n}\r\n\r\nexport const getDateMonth = (d: string) => {\r\n    let date = new Date(d)\r\n\r\n    return Digits2(date.getMonth() + 1).toString()\r\n}\r\n\r\nexport const getDateYear = (d: string) => {\r\n    let date = new Date(d)\r\n\r\n    return date.getFullYear().toString()\r\n}\r\n\r\nexport const capitalizeFirst = (name: string) => {\r\n    let splitStr = capitalizeQuote(name.toLowerCase()).split(\" \")\r\n\r\n    for (let i = 0; i < splitStr.length; i++) {\r\n        splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1) \r\n    }\r\n   \r\n    return splitStr.join(\" \")\r\n}\r\n\r\nexport const capitalizeQuote = (name: string) => {\r\n    let splitStr = name.toLowerCase().split(\"'\")\r\n\r\n    for (let i = 0; i < splitStr.length; i++) {\r\n        splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1)\r\n    }\r\n   \r\n    return splitStr.join(\"'\")\r\n}\r\n\r\nexport const mountLogin = () => {\r\n    let body = document.getElementsByTagName(\"body\")[0]\r\n\r\n    body.classList.add(\"login\")\r\n}\r\nexport const unmountLogin = () => {\r\n    let body = document.getElementsByTagName(\"body\")[0]\r\n\r\n    body.classList.remove(\"login\")\r\n}\r\n\r\nexport const imageFileToBase64 = async (file: any) => {\r\n    function readImageFile(file: any){\r\n        return new Promise((resolve, reject) => {\r\n            let reader = new FileReader()\r\n        \r\n            reader.onload = e => {\r\n                let base64Img = new Buffer(e.target.result as any, \"binary\").toString(\"base64\"),\r\n                src = \"data:image/png;base64,\" + base64Img\r\n\r\n                resolve(src)\r\n            }\r\n        \r\n            reader.onerror = reject\r\n        \r\n            reader.readAsArrayBuffer(file)\r\n        })     \r\n    }\r\n\r\n    return readImageFile(file)\r\n}\r\n\r\nexport const resizePopup = () => {\r\n    let mainBlock = document.getElementById(\"mainBlock\"),\r\n    popup = document.getElementById(\"popup\"),\r\n    width = mainBlock ? mainBlock.clientWidth : 0\r\n\r\n    if(mainBlock && popup)\r\n        popup.style.width = width + \"px\"\r\n}\r\n\r\nexport const checkEnter = (e: any, callback: any) => {\r\n    if(e.keyCode === 13)\r\n        callback()\r\n}\r\n\r\nwindow.addEventListener(\"load\", resizePopup)\r\nwindow.addEventListener(\"resize\", resizePopup)","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","export interface IMessage{\r\n    readonly title: string\r\n    readonly icon: string\r\n    readonly iconColor: string\r\n    readonly message: string\r\n    readonly time: number\r\n}\r\n\r\nexport const genericError = {\r\n    title: \"Ops!\",\r\n    icon: \"fa-times-circle\",\r\n    iconColor: \"#de1e30\",\r\n    message: \"È stato riscontrato un errore durante l'accesso.\",\r\n    time: 3000\r\n}","import React from \"react\"\r\nimport axios from \"axios\"\r\nimport { IMessage, genericError } from \"../models/IMessage\"\r\nimport { siteUrl, resizePopup } from \"../utilities\"\r\nimport { routerHistory } from \"..\"\r\nimport { Divider, Tooltip, Spin, Icon } from \"antd\"\r\nimport { ICorso } from \"../models/ICorso\"\r\nimport Axios from \"axios\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly code: string\r\n    readonly popup: IMessage\r\n    readonly corso: ICorso\r\n    readonly focus: boolean\r\n}\r\n\r\nexport default class Firma extends React.PureComponent<IProps, IState>{\r\n    maxLength = 16\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            code: \"\",\r\n            popup: genericError,\r\n            corso: null,\r\n            focus: false\r\n        }\r\n    }\r\n    \r\n    componentDidMount = () => {\r\n        let id = parseInt(sessionStorage.getItem(\"corso\"))\r\n\r\n        Axios.get(siteUrl+\"/api/corsi/\"+id).then(response => {\r\n            let corso = response.data as ICorso\r\n\r\n            this.setState({\r\n                corso: corso\r\n            })\r\n        })\r\n\r\n        resizePopup()\r\n    }\r\n\r\n    changeCode = (event: any) => {\r\n        let code = event.target.value\r\n\r\n        this.setState({\r\n            code: code\r\n        })\r\n\r\n        this.tryToLog(code)\r\n    }\r\n\r\n    tryToLog = (code: string) => {\r\n        if(code.length < this.maxLength) return false\r\n\r\n        this.switchInput(true)\r\n\r\n        let idCorso = parseInt(sessionStorage.getItem(\"corso\")),\r\n        anno = parseInt(sessionStorage.getItem(\"classe\"))\r\n        \r\n        axios.post(siteUrl + \"/api/firma\", {\r\n            code: code,\r\n            idCorso: idCorso,\r\n            anno: anno\r\n        }).then((response) => {\r\n            this.setState({\r\n                popup: response.data as IMessage\r\n            })\r\n\r\n            this.showMessagePopup()\r\n        }).catch((_) => {\r\n            this.setState({\r\n                popup: genericError\r\n            })\r\n\r\n            this.showMessagePopup()\r\n        })\r\n    }\r\n\r\n    switchInput = (disable: boolean) => {\r\n        let input = document.getElementById(\"mainInput\") as HTMLInputElement\r\n\r\n        if(!input) return\r\n\r\n        if(disable)\r\n            input.setAttribute(\"disabled\", \"disabled\")\r\n        else{\r\n            input.value = \"\"\r\n            input.removeAttribute(\"disabled\")\r\n            input.focus()\r\n        }\r\n    }\r\n\r\n    showMessagePopup = () => {\r\n        let popup = document.getElementById(\"popup\")\r\n\r\n        if(!popup) return\r\n\r\n        popup.classList.add(\"show\")\r\n\r\n        setTimeout(() => {\r\n            popup.classList.remove(\"show\")\r\n            this.switchInput(false)\r\n        }, this.state.popup.time)\r\n    }\r\n\r\n    cambiaCorso = () => {\r\n        sessionStorage.removeItem(\"corso\")\r\n        sessionStorage.removeItem(\"classe\")\r\n        sessionStorage.removeItem(\"confermaTutor\")\r\n\r\n        routerHistory.push(\"/\")\r\n    }\r\n\r\n    switchFocus = () => {\r\n        this.setState({\r\n            focus: !this.state.focus\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { popup, corso, focus } = this.state\r\n        let icon = <Icon type=\"loading\" spin />\r\n\r\n        return <div className=\"col\" id=\"mainBlock\">\r\n            <div className=\"text-center w-100\">\r\n                <h2 className=\"mb-1 font-weight-normal\">Scannerizza il codice</h2>\r\n                <h6 className=\"mb-1 text-muted font-weight-normal\">(alza la luminosità del dispositivo)</h6>\r\n                <input autoFocus type=\"password\" value={this.state.code} onChange={this.changeCode} maxLength={this.maxLength} id=\"mainInput\" onFocus={this.switchFocus} onBlur={this.switchFocus}/>\r\n\r\n                <Icon type=\"scan\" className=\"fa-9x d-block text-blue\" />\r\n\r\n                {\r\n                    !focus ? <div className=\"text-danger text-center mt-2\">Clicca sulla pagina per ristabilire il focus e firmare.</div>  : \"\"\r\n                }\r\n\r\n                <div className=\"top-info\">\r\n                    {\r\n                        corso ? corso.nome : <Spin indicator={icon} />\r\n                    }\r\n                        <Divider type=\"vertical\" style={{ height: 20 }} />\r\n                    {\r\n                        parseInt(sessionStorage.getItem(\"classe\")) === 1 ? \"Primo anno\" : \"Secondo anno\"\r\n                    }\r\n                        <Divider type=\"vertical\" style={{ height: 20 }} />\r\n                    <Tooltip placement=\"bottomRight\" title=\"Cambia il corso o la classe per firmare\">\r\n                        <button type=\"button\" className=\"btn btn-sm btn-blue\" onClick={this.cambiaCorso}>\r\n                            <i className=\"far fa-repeat-alt fa-fw mr-1\"></i>\r\n                            Cambia\r\n                        </button>\r\n                    </Tooltip>\r\n                </div>\r\n            </div>\r\n\r\n            <div id=\"popup\">\r\n                <div className=\"w-100\">\r\n                    <i className={\"fal fa-fw fa-lg fa-6x \" + popup.icon} style={{ color: popup.iconColor}}></i>\r\n                    <h2 className=\"mt-5\">{popup.title}</h2>\r\n                    <div className=\"mt-2\">{popup.message}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport FullCalendar from \"@fullcalendar/react\"\r\nimport dayGridPlugin from \"@fullcalendar/daygrid\"\r\nimport googleCalendarPlugin from \"@fullcalendar/google-calendar\"\r\nimport { Modal } from \"antd\"\r\nimport { Digits2 } from \"../utilities\"\r\nimport \"@fullcalendar/core/main.css\"\r\nimport \"@fullcalendar/timegrid/main.css\"\r\n\r\nexport interface IProps{\r\n    readonly calendarId: string\r\n}\r\nexport interface IState{}\r\n\r\nexport default class Calendario extends React.PureComponent<IProps, IState>{\r\n    render(): JSX.Element{\r\n        const { calendarId } = this.props\r\n\r\n        return <FullCalendar\r\n            plugins={[ googleCalendarPlugin, dayGridPlugin ]}\r\n            events={{ googleCalendarId: calendarId }}\r\n            googleCalendarApiKey={\"AIzaSyCEEaAbHOYhofQs-iLdHd_J8-KyD_IlRbE\"}\r\n            defaultView=\"dayGridMonth\"\r\n            fixedWeekCount={false}\r\n            firstDay={1}\r\n            themeSystem={\"bootstrap\"}\r\n            eventTimeFormat={{\r\n                hour: \"2-digit\",\r\n                minute: \"2-digit\",\r\n                meridiem: false\r\n            }}\r\n            buttonText={{\r\n                today: \"Mese corrente\"\r\n            }}\r\n            header={{\r\n                right: \"prev, next\"\r\n            }}\r\n            locale={\"it\"}\r\n            eventClick={\r\n                function(info){\r\n                    info.jsEvent.preventDefault()\r\n                    let event = info.event\r\n                    \r\n                    Modal.info({\r\n                        maskClosable: true,\r\n                        centered: true,\r\n                        icon: null,\r\n                        title: event.title,\r\n                        content: <div className=\"mt-3\" style={{ fontSize: 20 }}>\r\n                            <div className=\"row\">\r\n                                <div className=\"col-3 pr-0\">\r\n                                    <span className=\"label\">Inizio</span>\r\n                                </div>\r\n                                <div className=\"col\">\r\n                                    <span className=\"desc\">\r\n                                        { Digits2(event.start.getHours()) }:{ Digits2(event.start.getMinutes()) }\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"row\">\r\n                                <div className=\"col-3 pr-0\">\r\n                                    <span className=\"label\">Fine</span>\r\n                                </div>\r\n                                <div className=\"col\">\r\n                                    <span className=\"desc\">\r\n                                        { Digits2(event.end.getHours()) }:{ Digits2(event.end.getMinutes()) }\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                            {  \r\n                                event.extendedProps.location && <div className=\"row\">\r\n                                    <div className=\"col-3 pr-0\">\r\n                                        <span className=\"label\">Luogo</span>\r\n                                    </div>\r\n                                    <div className=\"col-9\" style={{ fontSize: 15 }}>\r\n                                        {event.extendedProps.location}\r\n                                    </div>\r\n                                </div>\r\n                            }\r\n                        </div>\r\n                    })\r\n                }\r\n            }\r\n        />\r\n    }\r\n}","import React from \"react\"\r\nimport { siteUrl } from \"../utilities\"\r\nimport { Icon, Spin } from \"antd\"\r\nimport { ICalendar } from \"../models/ICalendar\"\r\nimport Axios from \"axios\"\r\nimport Calendario from \"./Calendario\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly calendar: ICalendar\r\n}\r\n\r\nexport default class LessonsCalendar extends React.PureComponent<IProps, IState> {\r\n    constructor(props: IProps){\r\n        super(props)\r\n        \r\n        this.state = {\r\n            calendar: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let idCorso = parseInt(sessionStorage.getItem(\"corso\")),\r\n        classe = parseInt(sessionStorage.getItem(\"classe\"))\r\n        \r\n        Axios.get(siteUrl+\"/api/calendari/\"+idCorso+\"/\"+classe).then(response => {\r\n            let calendar = response.data as ICalendar\r\n\r\n            this.setState({\r\n                calendar: calendar\r\n            })\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { calendar } = this.state\r\n    \r\n        if(!calendar){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-3\" id=\"mainBlock\">\r\n            <Calendario calendarId={calendar.idGoogleCalendar} />\r\n        </div>\r\n    }\r\n  \r\n  }","import React from \"react\"\r\nimport { siteUrl, mountLogin, unmountLogin } from \"../utilities\"\r\nimport { ICorso } from \"../models/ICorso\"\r\nimport Axios from \"axios\"\r\nimport { Spin, Icon } from \"antd\"\r\nimport { routerHistory } from \"..\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly corsi: ICorso[]\r\n}\r\n\r\nexport default class SceltaCorso extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            corsi: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Axios.get(siteUrl+\"/api/corsi\").then(response => {\r\n            let corsi = response.data as ICorso[]\r\n\r\n            this.setState({\r\n                corsi: corsi\r\n            })\r\n        })\r\n\r\n        mountLogin()\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        unmountLogin()\r\n    }\r\n\r\n    chooseCorso = (id: number) => {\r\n        sessionStorage.setItem(\"corso\", id.toString())\r\n        routerHistory.push(\"/\")\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { corsi } = this.state\r\n\r\n        if(!corsi){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50, color: \"#fff\" }} spin />\r\n\r\n            return <div className=\"col-12 px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col-11 col-lg-5 mx-auto\" id=\"loginBlock\">\r\n            <div className=\"w-100 bg-white py-3 rounded shadow px-2 text-center\">\r\n                <h3 className=\"text-center\">Scegli il corso</h3>\r\n\r\n                {\r\n                    corsi.map(c => {\r\n                        return <div className=\"p-3 mx-2 text-center pointer corso-item d-inline-block rounded\" onClick={() => this.chooseCorso(c.idCorso)}>\r\n                            <img src={c.logo} alt=\"logo\" height=\"60\" />\r\n                        </div>\r\n                    })\r\n                }\r\n            </div>\r\n        </div>\r\n\r\n    }\r\n}","import React from \"react\"\r\nimport { mountLogin, unmountLogin } from \"../utilities\"\r\nimport { routerHistory } from \"..\"\r\n\r\nexport default class SceltaClasse extends React.Component{\r\n\r\n    componentDidMount = () => {\r\n        mountLogin()\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        unmountLogin()\r\n    }\r\n\r\n    chooseClasse = (id: number) => {\r\n        sessionStorage.setItem(\"classe\", id.toString())\r\n        routerHistory.push(\"/\")\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        return <div className=\"col-11 col-lg-5 mx-auto\" id=\"loginBlock\">\r\n            <div className=\"w-100 bg-white py-3 rounded shadow\">\r\n                <h3 className=\"text-center\">Scegli la classe</h3>\r\n\r\n                <div className=\"py-2 text-center pointer corso-item\" onClick={() => this.chooseClasse(1)}>\r\n                    Primo anno\r\n                </div>\r\n                <div className=\"py-2 text-center pointer corso-item\" onClick={() => this.chooseClasse(2)}>\r\n                    Secondo anno\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    }\r\n}","import React from \"react\"\r\nimport { Icon, Spin } from \"antd\"\r\nimport Axios from \"axios\"\r\nimport { siteUrl, logoUrl } from \"../utilities\"\r\nimport { ICorso } from \"../models/ICorso\"\r\n\r\nexport interface IProps{\r\n    readonly idCorso?: string | number\r\n    readonly forLogin?: boolean\r\n}\r\nexport interface IState{\r\n    readonly logo: string\r\n}\r\n\r\nexport default class LogoCorso extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            logo: null\r\n        }\r\n    }\r\n\r\n    catchNull = () => {\r\n        this.setState({\r\n            logo: logoUrl\r\n        })\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        if(!this.props.idCorso){\r\n            this.catchNull()\r\n            return\r\n        }\r\n        \r\n        Axios.get(siteUrl+\"/api/corsi/\"+this.props.idCorso).then(response => {\r\n            let corso = response.data as ICorso\r\n\r\n            if(!corso.logo){\r\n                this.catchNull()\r\n                return\r\n            }\r\n\r\n            this.setState({\r\n                logo: corso.logo\r\n            })\r\n        }).catch(_ =>{\r\n            this.catchNull()\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { logo } = this.state\r\n        \r\n        if(!logo){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50, color: \"#fff\" }} spin />\r\n\r\n            return <div className=\"text-center py-4\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        if(this.props.forLogin){\r\n            return <img src={logo} height=\"40\" className=\"float-right logo\" alt=\"logo\" />\r\n        }else{\r\n            return <div className=\"logo-block px-3 py-4\">\r\n                <img src={logo} height=\"100\" className=\"mx-auto d-block logo\" alt=\"logo\" />\r\n            </div>\r\n        }\r\n    }\r\n}","import React from \"react\"\r\nimport { mountLogin, unmountLogin, siteUrl } from \"../utilities\"\r\nimport { routerHistory } from \"..\"\r\nimport Axios from \"axios\"\r\nimport { Modal } from \"antd\"\r\n\r\nexport interface IProps{\r\n    readonly idCorso: number\r\n}\r\nexport interface IState{\r\n    readonly codice: string\r\n}\r\nexport default class CodiceAccesso extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            codice: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        mountLogin()\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        unmountLogin()\r\n    }\r\n\r\n    cambiaCodice = (e: any) => {\r\n        let codice = e.target.value\r\n\r\n        this.setState({\r\n            codice: codice\r\n        })\r\n    }\r\n\r\n    cambiaScelta = () => {\r\n        sessionStorage.removeItem(\"corso\")\r\n        sessionStorage.removeItem(\"classe\")\r\n\r\n        routerHistory.push(\"/\")\r\n    }\r\n\r\n    inviaCodice = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        if(this.state.codice === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire il campo.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        Axios.post(siteUrl+\"/api/firma/accedi\", {\r\n            idCorso: this.props.idCorso,\r\n            codice: this.state.codice\r\n        }).then(response => {\r\n\r\n            if(response.data.trim() === \"success\"){\r\n                sessionStorage.setItem(\"confermaTutor\", \"true\")\r\n                routerHistory.push(\"/\")\r\n            }else{\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: \"Codice non valido.\"\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        return <div className=\"col-11 col-lg-5 mx-auto\" id=\"loginBlock\">\r\n            <form className=\"w-100 bg-white p-3 rounded shadow\" onSubmit={this.inviaCodice}>\r\n                <h3 className=\"text-center\">Conferma del coordinatore</h3>\r\n\r\n                <div className=\"form-group\">\r\n                    <label className=\"text-secondary\">Codice di conferma</label>\r\n                    <input name=\"codice\" type=\"password\" className=\"form-control\" value={this.state.codice} onChange={this.cambiaCodice} />\r\n                </div>\r\n\r\n                <div className=\"row\">\r\n                    <div className=\"pr-1 col-6\">\r\n                        <input type=\"button\" value=\"Annulla scelta\" className=\"btn btn-lg btn-link text-danger w-100 text-uppercase\" onClick={this.cambiaScelta} />\r\n                    </div>\r\n                    <div className=\"pl-1 col\">\r\n                        <input type=\"submit\" value=\"Prosegui\" className=\"btn btn-lg btn-success w-100 text-uppercase\"/>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n\r\n    }\r\n}","import React from \"react\"\r\nimport { NavLink, Route, Router, Switch } from \"react-router-dom\"\r\nimport { routerHistory } from \"..\"\r\nimport Firma from \"./Firma\"\r\nimport LessonsCalendar from \"./LessonsCalendar\"\r\nimport SceltaCorso from \"./SceltaCorso\"\r\nimport SceltaClasse from \"./SceltaClasse\"\r\nimport LogoCorso from \"./LogoCorso\"\r\nimport CodiceAccesso from \"./CodiceAccesso\"\r\n\r\nexport default class Main extends React.Component{\r\n\r\n    focusInput = () => {\r\n        let input = document.getElementById(\"mainInput\") as HTMLInputElement\r\n\r\n        if(input)\r\n            input.focus()\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        let idCorso = sessionStorage.getItem(\"corso\"),\r\n        classe = sessionStorage.getItem(\"classe\"),\r\n        confermaTutor = sessionStorage.getItem(\"confermaTutor\")\r\n\r\n        if(!idCorso)\r\n            return <SceltaCorso />\r\n\r\n        if(!classe)\r\n            return <SceltaClasse />\r\n\r\n        if(!confermaTutor)\r\n            return <CodiceAccesso idCorso={parseInt(idCorso)} />\r\n\r\n        return <div className=\"container-fluid\" onClick={this.focusInput}>\r\n\r\n            <Router history={routerHistory}>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3 bg-blue p-0 menu\">\r\n                        \r\n                        <LogoCorso idCorso={sessionStorage.getItem(\"corso\")} />\r\n\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(\"/\")} exact to=\"/firme/\">\r\n                            <span><i className=\"fal fa-home-alt fa-fw mr-1\"></i> Home</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(\"/calendar\")} exact to=\"/firme/calendar\">\r\n                            <span><i className=\"fal fa-calendar-alt fa-fw mr-1\"></i> Calendario</span>\r\n                        </NavLink>\r\n\r\n                        <div className=\"copyright\">\r\n                            {(new Date()).getFullYear()} Copyright FITSTIC\r\n                        </div>\r\n                    </div>\r\n\r\n                    <Switch>\r\n                        <Route exact path=\"/firme/\" render={() => (\r\n                            <Firma />\r\n                        )} />\r\n\r\n                        <Route exact path=\"/firme/calendar\" render={() => (\r\n                            <LessonsCalendar />\r\n                        )} />\r\n                    </Switch>\r\n                        \r\n                </div>\r\n            </Router>\r\n        </div>\r\n    }\r\n}","export class Cipher{\r\n    private maximum = 65535\r\n\r\n    public encode(msg: string, shift: number = -4){\r\n        let finalMessage = \"\"\r\n    \r\n        if(shift < 0)\r\n            shift = -shift\r\n    \r\n        for(let i = 0; i < msg.length; i++){\r\n            let letter = msg[i],\r\n            charInt = letter.charCodeAt(0),\r\n            newInt = charInt + shift\r\n\r\n            if(newInt > this.maximum)\r\n                newInt = newInt - (this.maximum + 1)\r\n\r\n            letter = String.fromCharCode(newInt)\r\n\r\n            finalMessage += letter\r\n        }\r\n        \r\n        return finalMessage\r\n    }\r\n\r\n    public decode(msg: string, shift: number = -4){\r\n        let finalMessage = \"\"\r\n    \r\n        if(shift < 0)\r\n            shift = -shift\r\n    \r\n        for(let i = 0; i < msg.length; i++){\r\n            let letter = msg[i],\r\n            charInt = letter.charCodeAt(0),\r\n            newInt = charInt - shift\r\n\r\n            if(newInt < 0)\r\n                newInt = this.maximum + (newInt + 1)\r\n\r\n            letter = String.fromCharCode(newInt)\r\n\r\n            finalMessage += letter\r\n        }\r\n        \r\n        return finalMessage\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, Steps, Button } from \"antd\"\r\nimport Axios from \"axios\"\r\nimport { siteUrl } from \"../utilities\"\r\nimport { Cipher } from \"../models/Cipher\"\r\n\r\nexport interface IProps{\r\n    readonly show: boolean\r\n    readonly closeModal: () => void\r\n}\r\nexport interface IState{\r\n    readonly currentStep: number\r\n    readonly email: string\r\n    readonly code: string\r\n    readonly newPassword: string\r\n    readonly newPasswordConfirm: string\r\n    readonly idCoordinatore: number\r\n    readonly loading: boolean\r\n}\r\n\r\nexport default class ForgotPassword extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            currentStep: 0,\r\n            email: \"\",\r\n            code: \"\",\r\n            newPassword: \"\",\r\n            newPasswordConfirm: \"\",\r\n            idCoordinatore: null,\r\n            loading: false\r\n        }\r\n    }\r\n\r\n    cancelRecover = () => {\r\n        this.setState({\r\n            currentStep: 0,\r\n            email: \"\",\r\n            code: \"\",\r\n            newPassword: \"\",\r\n            newPasswordConfirm: \"\",\r\n            idCoordinatore: null,\r\n            loading: false\r\n        })\r\n\r\n        this.props.closeModal()\r\n    }\r\n\r\n    changeMail = (e: any) => {\r\n        let email = e.target.value.trim()\r\n\r\n        this.setState({\r\n            email: email\r\n        })\r\n    }\r\n\r\n    changeCode = (e: any) => {\r\n        let code = e.target.value.trim()\r\n\r\n        this.setState({\r\n            code: code\r\n        })\r\n    }\r\n\r\n    changePassword = (e: any) => {\r\n        let pass = e.target.value\r\n\r\n        this.setState({\r\n            newPassword: pass\r\n        })\r\n    }\r\n\r\n    changePasswordConfirm = (e: any) => {\r\n        let pass = e.target.value\r\n\r\n        this.setState({\r\n            newPasswordConfirm: pass\r\n        })\r\n    }\r\n\r\n    increaseStep = () => {\r\n        this.setState({\r\n            currentStep: this.state.currentStep + 1\r\n        })\r\n    }\r\n\r\n    decreaseStep = () => {\r\n        this.setState({\r\n            currentStep: this.state.currentStep - 1\r\n        })\r\n    }\r\n\r\n    switchLoading = () => {\r\n        this.setState({\r\n            loading: !this.state.loading\r\n        })\r\n    }\r\n\r\n    confirmFirstStep = (e: any) => {\r\n        e.preventDefault()\r\n        \r\n        const { email } = this.state\r\n\r\n        if(email === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\",\r\n                maskClosable: true\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        this.switchLoading()\r\n\r\n        Axios.post(siteUrl+\"/api/coordinatori/recuperocoordinatori\", {\r\n            email: email\r\n        }).then(response => {\r\n            let data = response.data,\r\n            idCoordinatore = parseInt(data)\r\n\r\n            if(!isNaN(idCoordinatore)){\r\n                this.setState({\r\n                    idCoordinatore: idCoordinatore,\r\n                    loading: false\r\n                })\r\n\r\n                this.increaseStep()\r\n            }else{\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: \"Questa e-mail non corrisponde a nessun coordinatore.\",\r\n                    maskClosable: true\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    confirmSecondStep = (e: any) => {\r\n        e.preventDefault()\r\n        \r\n        if(this.state.code === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire il campo.\",\r\n                maskClosable: true\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        this.increaseStep()\r\n    }\r\n\r\n    savePassword = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { newPassword, newPasswordConfirm, idCoordinatore, code } = this.state\r\n\r\n        if(newPassword === \"\" || newPasswordConfirm === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\",\r\n                maskClosable: true\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(newPassword.length < 8){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"La password deve avere almeno 8 caratteri.\",\r\n                maskClosable: true\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(newPassword !== newPasswordConfirm){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Le password non corrispondono.\",\r\n                maskClosable: true\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        this.switchLoading()\r\n\r\n        let cipher = new Cipher(),\r\n        password = cipher.encode(newPassword)\r\n\r\n        Axios.post(siteUrl+\"/api/coordinatori/cambiopassword\", {\r\n            idCoordinatore: idCoordinatore,\r\n            password: password,\r\n            codice: code\r\n        }).then(response => {\r\n            let msg = response.data\r\n\r\n            if(msg.trim() === \"success\"){\r\n                Modal.success({\r\n                    title: \"Complimenti!\",\r\n                    content: \"Password modificata con successo.\",\r\n                    centered: true,\r\n                    onOk: this.cancelRecover\r\n                })\r\n            }else{\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: \"Non è stato possibile completare l'operazione.\",\r\n                    onOk: () => {\r\n                        this.setState({\r\n                            loading: false\r\n                        })\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { show } = this.props\r\n        const { currentStep, email, code, newPassword, newPasswordConfirm, loading } = this.state\r\n        const { Step } = Steps\r\n\r\n        const steps = [{\r\n            title: \"E-mail\",\r\n            content: <form onSubmit={this.confirmFirstStep}>\r\n                <div className=\"form-group my-3\">\r\n                    <label className=\"text-muted\">Inserisci la tua e-mail</label>\r\n                    <input type=\"email\" name=\"email\" value={email} className=\"form-control\" onChange={this.changeMail} disabled={loading} />\r\n                </div>\r\n\r\n                <Button htmlType=\"submit\" className=\"float-right\" type=\"primary\" loading={loading}>Prosegui</Button>\r\n\r\n                <div className=\"clearfix\"></div>\r\n            </form>\r\n        },\r\n        {\r\n            title: \"Codice\",\r\n            content: <form onSubmit={this.confirmSecondStep}>\r\n                <div className=\"form-group my-3\">\r\n                    <label className=\"text-muted\">Inserisci il codice ricevuto via e-mail</label>\r\n                    <input type=\"text\" name=\"code\" value={code} className=\"form-control\" onChange={this.changeCode} disabled={loading} />\r\n                </div>\r\n\r\n                <div className=\"float-right\">\r\n                    <Button className=\"mr-2\" onClick={this.decreaseStep}>Indietro</Button>\r\n\r\n                    <Button htmlType=\"submit\" type=\"primary\" loading={loading}>Prosegui</Button>\r\n                </div>\r\n\r\n                <div className=\"clearfix\"></div>\r\n            </form>\r\n        },\r\n        {\r\n            title: \"Nuova password\",\r\n            content: <form onSubmit={this.savePassword}>\r\n                <div className=\"form-group my-3\">\r\n                    <label className=\"text-muted\">Crea la tua nuova password</label>\r\n                    <input type=\"password\" name=\"newpassword\" value={newPassword} className=\"form-control\" onChange={this.changePassword} disabled={loading} />\r\n                </div>\r\n\r\n                <div className=\"form-group my-3\">\r\n                    <label className=\"text-muted\">Conferma la nuova password</label>\r\n                    <input type=\"password\" name=\"newpassword_conf\" value={newPasswordConfirm} className=\"form-control\" onChange={this.changePasswordConfirm} disabled={loading} />\r\n                </div>\r\n\r\n                <div className=\"float-right\">\r\n                    <Button className=\"mr-2\" onClick={this.decreaseStep}>Indietro</Button>\r\n\r\n                    <Button htmlType=\"submit\" type=\"primary\" loading={loading}>Salva la password</Button>\r\n                </div>\r\n\r\n                <div className=\"clearfix\"></div>\r\n            </form>\r\n        }]\r\n\r\n        return <Modal visible={show} title=\"Recupero della password\" onCancel={this.cancelRecover} footer={null} maskClosable={false}>\r\n            <Steps size=\"small\" current={currentStep}>\r\n                {\r\n                    steps.map(item => {\r\n                        return <Step key={item.title} title={item.title} />\r\n                    })\r\n                }\r\n            </Steps>\r\n\r\n            <div className=\"steps-content\">\r\n                {steps[currentStep].content}\r\n            </div>\r\n        </Modal>\r\n    }\r\n}","import React from \"react\"\r\nimport { routerHistory } from \"../..\"\r\nimport { message, Modal } from \"antd\"\r\nimport { mountLogin, unmountLogin, siteUrl, logoUrl, adminRoute } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { Cipher } from \"../../models/Cipher\"\r\nimport { isAdmin } from \"../../models/IAdmin\"\r\nimport ForgotPassword from \"../ForgotPassword\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly adminName: string\r\n    readonly adminPsw: string\r\n    readonly showForgot: boolean\r\n}\r\n\r\nexport default class LoginTutor extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            adminName: \"\",\r\n            adminPsw: \"\",\r\n            showForgot: false\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        mountLogin()\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        unmountLogin()\r\n    }\r\n\r\n    changeInputName = (event: any) => {\r\n        let name = event.target.value\r\n\r\n        this.setState({\r\n            adminName: name\r\n        })\r\n    }\r\n\r\n    changeInputPassword = (event: any) => {\r\n        let psw = event.target.value\r\n\r\n        this.setState({\r\n            adminPsw: psw\r\n        })\r\n    }\r\n\r\n    tryLogin = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { adminName, adminPsw } = this.state\r\n        let cipher = new Cipher(),\r\n        password = cipher.encode(adminPsw)\r\n\r\n        Axios.post(siteUrl+\"/api/coordinatori/logincoordinatore\", {\r\n            username: adminName.trim(),\r\n            password: password\r\n        }).then(response => {\r\n            let data = response.data\r\n\r\n            if(isAdmin(data)){\r\n                sessionStorage.setItem(\"adminSession\", JSON.stringify(data))\r\n                routerHistory.push(adminRoute)\r\n                message.success(\"Login effettuato con successo!\")\r\n            }\r\n            else{\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: \"Username o Password errati!\",\r\n                    centered: true,\r\n                    maskClosable: true\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    switchForgot = () => {\r\n        this.setState({\r\n            showForgot: !this.state.showForgot\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { adminName, adminPsw, showForgot } = this.state\r\n\r\n        return <div className=\"col-11 col-lg-5 mx-auto\" id=\"loginBlock\">\r\n            <form className=\"w-100 bg-white p-3 rounded shadow\" onSubmit={this.tryLogin}>\r\n                <h3 className=\"d-inline-block\">Accesso coordinatori</h3>\r\n                <img src={logoUrl} height=\"40\" className=\"float-right logo\" alt=\"logo\" />\r\n\r\n                <div className=\"form-group\">\r\n                    <label className=\"text-secondary\">Utente di accesso</label>\r\n                    <input name=\"username\" type=\"text\" className=\"form-control\" value={adminName} onChange={this.changeInputName} />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label className=\"text-secondary\">Password di accesso</label>\r\n                    <input name=\"password\" type=\"password\" className=\"form-control\" value={adminPsw} onChange={this.changeInputPassword} />\r\n                </div>\r\n\r\n                <input type=\"submit\" value=\"Accedi\" className=\"btn btn-lg btn-success w-100 text-uppercase\"/>\r\n\r\n                <span className=\"link-blue u-hover d-block mt-3 text-center\" onClick={this.switchForgot}>Hai dimenticato la password?</span>\r\n            </form>\r\n\r\n            <ForgotPassword show={showForgot} closeModal={this.switchForgot} />\r\n        </div>\r\n    }\r\n\r\n}","export interface IAdmin{\r\n    readonly idCoordinatore?: number\r\n    readonly idAmministratore?: number\r\n    readonly idCorso: number\r\n    readonly nome: string\r\n    readonly cognome: string\r\n}\r\nexport const isAdmin = (obj: any) => {\r\n    try{\r\n        return \"idCorso\" in obj && \"nome\" in obj && \"cognome\" in obj\r\n    }catch{\r\n        return false\r\n    }\r\n}\r\nexport const isSuperAdmin = (obj: any) => {\r\n    try{\r\n        return \"nome\" in obj && \"cognome\" in obj\r\n    }catch{\r\n        return false\r\n    }\r\n}","import React from \"react\"\r\nimport { Cipher } from \"../models/Cipher\"\r\nimport Axios from \"axios\"\r\nimport { Modal, Icon } from \"antd\"\r\nimport { IAdmin } from \"../models/IAdmin\"\r\nimport { checkEnter } from \"../utilities\"\r\n\r\nexport const askPassword = (url: string, callType: string, body?: any, callback?: any, preAction?: any, customText?: string) => {\r\n    let input: HTMLInputElement,\r\n    cipher = new Cipher(),\r\n    tutor = JSON.parse(sessionStorage.getItem(\"adminSession\")) as IAdmin,\r\n    admin = JSON.parse(sessionStorage.getItem(\"superSession\")) as IAdmin\r\n\r\n    const sendForm = () => {\r\n\r\n        if(input.value === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire il campo.\",\r\n                centered: true,\r\n                maskClosable: true\r\n            })\r\n            \r\n            return true\r\n        }\r\n\r\n        if(preAction)\r\n            preAction()\r\n        \r\n        let password = input.value\r\n\r\n        if(admin){\r\n            body.authAdmin = {\r\n                idAdmin: admin.idAmministratore,\r\n                password: cipher.encode(password)\r\n            }\r\n        }\r\n        else if(tutor){\r\n            body.authCoordinatore = {\r\n                idCoordinatore: tutor.idCoordinatore,\r\n                password: cipher.encode(password)\r\n            }\r\n        }else{\r\n            body.password = password\r\n        }\r\n\r\n        if(callType === \"post\"){\r\n            Axios.post(url, body).then(callback).catch(_ => {\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: \"Password errata.\"\r\n                })\r\n            })\r\n        }else if(callType === \"put\"){\r\n            Axios.put(url, body).then(callback).catch(_ => {\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: \"Password errata.\"\r\n                })\r\n            })\r\n        }\r\n    }\r\n\r\n    let modal = Modal.confirm({\r\n        title: \"Prima di procedere...\",\r\n        content: <div style={{ marginLeft: -38 }}>\r\n            <div className=\"form-group mb-0\">\r\n                <label className=\"text-secondary\">\r\n                    {customText ? customText : \"Inserisci la tua password per confermare l'identità\"}\r\n                </label>\r\n                <input type=\"password\" ref={r => input = r} className=\"form-control\" onKeyUp={(e) => checkEnter(e, () => {\r\n                    if(!sendForm())\r\n                        modal.destroy()\r\n                })} />\r\n            </div>\r\n        </div>,\r\n        okText: \"Conferma identità\",\r\n        cancelText: \"Annulla\",\r\n        onOk: sendForm,\r\n        icon: <Icon type=\"lock\" style={{ color: \"var(--danger)\" }} />,\r\n        centered: true\r\n    })\r\n\r\n    setTimeout(() => {\r\n        input.focus()\r\n    }, 300)\r\n}","import React from \"react\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\nimport { routerHistory } from \"../..\"\r\nimport { Modal, Tooltip, Spin, Icon, Checkbox, Collapse, DatePicker, message, Tabs, Input } from \"antd\"\r\nimport Axios from \"axios\"\r\nimport { siteUrl, formattaData, adminRoute } from \"../../utilities\"\r\nimport locale from \"antd/es/date-picker/locale/it_IT\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IProps{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly students: IStudent[]\r\n    readonly selection: IStudent[]\r\n    readonly confirmModal: boolean\r\n    readonly filter: string\r\n}\r\n\r\nexport default class StudentsList extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            students: null,\r\n            selection: [],\r\n            confirmModal: false,\r\n            filter: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Axios.get(siteUrl+\"/api/studenti/\"+this.props.corso).then((response) => {\r\n            this.setState({\r\n                students: response.data as IStudent[]\r\n            })\r\n        })\r\n    }\r\n\r\n    showConfirm = (student: IStudent) => {\r\n        const { students } = this.state\r\n        let date: string = \"\"\r\n\r\n        Modal.confirm({\r\n            title: `${student.nome} ${student.cognome}`,\r\n            content: <div style={{ marginLeft: -38 }}>\r\n                <p>Confermi di voler ritirare questo studente dal corso?</p>\r\n                <label className=\"text-secondary\">Data di ritiro</label>\r\n                \r\n                <DatePicker locale={locale} className=\"w-100\" onChange={(_, d2) => date = d2} format=\"DD-MM-YYYY\" />\r\n            </div>,\r\n            okText: \"Conferma ritiro\",\r\n            okType: \"danger\",\r\n            cancelText: \"Annulla\",\r\n            icon: <Icon type=\"warning\" className=\"text-danger\" theme=\"filled\" />,\r\n            onOk: () => {\r\n                if(date === \"\"){\r\n                    Modal.error({\r\n                        title: \"Errore!\",\r\n                        content: \"Seleziona una data valida.\"\r\n                    })\r\n\r\n                    return true\r\n                }\r\n\r\n                let dataRitiro = formattaData(date, true),\r\n                studente = student as any\r\n                studente.ritirato = \"true\"\r\n                studente.dataRitiro = dataRitiro\r\n                \r\n                askPassword(siteUrl+\"/api/studenti/\" + student.idStudente, \"put\", {\r\n                    studente: studente\r\n                }, (response: any) => {\r\n\r\n                    let stu = response.data as IStudent,\r\n                    currentList = students as any,\r\n                    editingStudent = students.indexOf(student)\r\n                    \r\n                    currentList[editingStudent] = stu\r\n\r\n                    this.setState({\r\n                        students: currentList as IStudent[]\r\n                    })\r\n\r\n                    message.success(\"Studente ritirato con successo!\")\r\n                }, () => {\r\n                    this.setState({\r\n                        students: null\r\n                    })\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    changeSelection = (student: IStudent) => {\r\n        let find = this.state.selection.find(s => s === student),\r\n        newList = find ? this.state.selection.filter(s => s.idStudente !== student.idStudente) : this.state.selection.concat(student)\r\n\r\n        this.setState({\r\n            selection: newList\r\n        })\r\n    }\r\n\r\n    selectAll = (anno: number, event: any) => {\r\n        let selectionList = event.target.checked ? this.state.students.filter(s => s.annoFrequentazione === anno && !s.ritirato) : this.state.selection.filter(s => s.annoFrequentazione !== anno)\r\n\r\n        this.setState({\r\n            selection: selectionList\r\n        })\r\n    }\r\n\r\n    showHideModal = () => {\r\n        if(!this.state.selection.length){\r\n            Modal.info({\r\n                title: \"Attenzione!\",\r\n                content: \"Devi selezionare almeno uno studente.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        this.setState({\r\n            confirmModal: !this.state.confirmModal\r\n        })\r\n    }\r\n\r\n    moveStudents = () => {\r\n        let select = document.getElementById(\"moveToClass\") as HTMLSelectElement,\r\n        value = parseInt(select.value),\r\n        studenti = this.state.selection.map(s => {\r\n            let stu = s as any\r\n            stu.idCorso = this.props.corso\r\n            stu.annoFrequentazione = value\r\n\r\n            return stu\r\n        })\r\n\r\n        if(value !== 1 && value !== 2){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"L'anno selezionato non è valido.\"\r\n            })\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/studenti\", \"put\", {\r\n            studenti: studenti\r\n        }, (response: any) => {\r\n            this.setState({\r\n                students: response.data as IStudent[],\r\n                confirmModal: false\r\n            })\r\n\r\n            message.success(\"Studenti spostati con successo!\")\r\n        }, () => {\r\n            this.setState({\r\n                students: null,\r\n                selection: []\r\n            })\r\n        })\r\n    }\r\n\r\n    allRetired = (group: IStudent[]) => {\r\n        let allRetired = true\r\n\r\n        group.forEach(s => {\r\n            if(!s.ritirato)\r\n                allRetired = false\r\n        })\r\n\r\n        return !allRetired\r\n    }\r\n\r\n    sortbyId = (a: IStudent, b: IStudent) => { \r\n        if(a.idStudente > b.idStudente)\r\n            return-1\r\n        if(a.idStudente < b.idStudente)\r\n            return 1\r\n\r\n        return 0\r\n    }\r\n\r\n    promuoviStudent = (s: IStudent) => {\r\n        Modal.confirm({\r\n            title: `${s.nome} ${s.cognome}`,\r\n            content: \"Confermi di voler segnare questo studente come archiviato?\",\r\n            okText: \"Conferma\",\r\n            okType: \"primary\",\r\n            cancelText: \"Annulla\",\r\n            onOk: () => {\r\n                askPassword(siteUrl+\"/api/studenti/promuovistudente\", \"put\", {\r\n                    idStudente: s.idStudente\r\n                }, (response: any) => {\r\n                    \r\n                    let studenti = response.data as IStudent[]\r\n        \r\n                    this.setState({\r\n                        students: studenti\r\n                    })\r\n        \r\n                    message.success(\"Studente archiviato con successo!\")\r\n                }, () => {\r\n                    this.setState({\r\n                        students: null\r\n                    })\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    changeFilter = (e: any) => {\r\n        let filter = e.target.value\r\n\r\n        this.setState({\r\n            filter: filter\r\n        })\r\n    }\r\n\r\n    filterStudentsByFilter = () => {\r\n        const { students, filter } = this.state\r\n\r\n        return students.filter(s => s.nome.toLowerCase().indexOf(filter.toLowerCase()) !== -1 || s.cognome.toLowerCase().indexOf(filter.toLowerCase()) !== -1)\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { students, selection, filter } = this.state,\r\n        { Panel } = Collapse,\r\n        { TabPane } = Tabs\r\n        \r\n        if(!students){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n        \r\n        let firstYear = students.filter(s => s.annoFrequentazione === 1 && !s.promosso).sort(this.sortbyId).sort((a, _) => a.ritirato ? 0 : -1),\r\n        secondYear = students.filter(s => s.annoFrequentazione === 2 && !s.promosso).sort(this.sortbyId).sort((a, _) => a.ritirato ? 0 : -1),\r\n        groups = [firstYear, secondYear],\r\n        studentiRitirati = filter.trim() === \"\" ? students : this.filterStudentsByFilter(),\r\n        ritirati = studentiRitirati.filter(s => s.promosso).sort(this.sortbyId).sort((a, _) => a.ritirato ? 0 : -1)\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-3 text-center\">Studenti del corso</h3>\r\n\r\n            <Tabs defaultActiveKey=\"1\">\r\n                <TabPane tab={<span><i className=\"fal fa-user fa-fw mr-1\"></i> Studenti attivi</span>} key=\"1\">\r\n                    <button className=\"btn btn-success float-right mr-1\" type=\"button\" onClick={() => routerHistory.push(adminRoute+\"/studenti/new\")}>\r\n                        <i className=\"fal fa-plus fa-fw\"></i> Aggiungi studente\r\n                    </button>\r\n\r\n                    <button className=\"btn btn-orange float-right mr-2\" type=\"button\" onClick={this.showHideModal}>\r\n                        <i className=\"fa fa-arrows-alt fa-fw\"></i> Sposta studenti\r\n                    </button>\r\n\r\n                    <button className=\"btn btn-blue float-right mr-2\" type=\"button\" onClick={() => routerHistory.push(adminRoute+\"/studenti/import\")}>\r\n                        <i className=\"fa fa-file-csv fa-fw\"></i> Importa da CSV\r\n                    </button>\r\n\r\n                    <div className=\"clearfix\"></div>\r\n\r\n                    <Tabs defaultActiveKey=\"0\">\r\n                        \r\n                        {\r\n                            groups.map((g, i) => {\r\n                                if(!g[0])\r\n                                    return false\r\n                                    \r\n                                let checkedAll = this.allRetired(g),\r\n                                tabTitle = g[0].annoFrequentazione === 1 ? \"Primo\" : \"Secondo\"\r\n\r\n                                g.forEach(element => {\r\n                                    if(selection.indexOf(element) === -1 && !element.ritirato)\r\n                                        checkedAll = false\r\n                                })\r\n\r\n                                return <TabPane tab={tabTitle + \" anno\"} key={i.toString()}>\r\n                                    <table className=\"table table-bordered text-center\">\r\n\r\n                                        <tbody className=\"border-top-0\">\r\n                                            <tr>\r\n                                                <th style={{width: \"5%\"}}>\r\n                                                    <Tooltip title=\"Seleziona tutti\">\r\n                                                        <Checkbox onChange={(e) => this.selectAll(g[0].annoFrequentazione, e)} checked={checkedAll} />\r\n                                                    </Tooltip>\r\n                                                </th>\r\n                                                <th>Nome</th>\r\n                                                <th>Cognome</th>\r\n                                                <th>Codice Fiscale</th>\r\n                                                <th style={{width: \"15%\"}}>Frequenza</th>\r\n                                                <th style={{width: \"26%\"}}>Azioni</th>\r\n                                            </tr>\r\n                                \r\n                                            {\r\n                                                g.map(s => {\r\n                                                    let checked = this.state.selection.find(n => n === s) ? true : false,\r\n                                                    bg = s.ritirato ? \"light font-italic\" : \"white\"\r\n                            \r\n                                                    return <tr className={\"bg-\"+bg}>\r\n                                                        <td>\r\n                                                            {\r\n                                                                s.ritirato ? <Checkbox disabled={true} /> : <Checkbox onChange={() => this.changeSelection(s)} checked={checked} />\r\n                                                            }\r\n                                                        </td>\r\n                                                        <td style={{maxWidth: 0}} className=\"text-truncate\">{s.nome}</td>\r\n                                                        <td style={{maxWidth: 0}} className=\"text-truncate\">{s.cognome}</td>\r\n                                                        <td style={{maxWidth: 0}} className=\"text-truncate\">{s.cf}</td>\r\n                                                        <td style={{maxWidth: 0}} className=\"text-truncate\">{s.frequenza}%</td>\r\n                                                        \r\n                                                        <td>\r\n                                                            <Tooltip title=\"Dettagli\">\r\n                                                                <button type=\"button\" className=\"btn btn-info circle-btn\" onClick={() => routerHistory.push(adminRoute+\"/studenti/\" + s.idStudente)}>\r\n                                                                    <i className=\"fa fa-info\"></i>\r\n                                                                </button>\r\n                                                            </Tooltip>\r\n                                                            \r\n                                                            {\r\n                                                                !s.ritirato && <Tooltip title=\"Modifica\">\r\n                                                                    <button type=\"button\" className=\"btn btn-warning text-white circle-btn ml-2\" onClick={() => routerHistory.push(adminRoute+\"/studenti/edit/\" + s.idStudente)}>\r\n                                                                        <i className=\"fa fa-pen\"></i>\r\n                                                                    </button>\r\n                                                                </Tooltip>\r\n                                                            }\r\n                                                            {\r\n                                                                !s.ritirato && <Tooltip title=\"Segna come ritirato\">\r\n                                                                    <button type=\"button\" className=\"btn btn-danger circle-btn ml-2\" onClick={() => this.showConfirm(s)}>\r\n                                                                        <i className=\"fa fa-user-times\"></i>\r\n                                                                    </button>\r\n                                                                </Tooltip>\r\n                                                            }\r\n\r\n                                                            {\r\n                                                                s.ritirato && <Tooltip title=\"Studente ritirato\">\r\n                                                                    <button type=\"button\" className=\"circle-btn ml-2 border-0\">\r\n                                                                        <i className=\"fa fa-user-slash\"></i>\r\n                                                                    </button>\r\n                                                                </Tooltip>\r\n                                                            }\r\n\r\n                                                            <Tooltip title=\"Archivia studente\">\r\n                                                                <button type=\"button\" className=\"btn btn-success circle-btn ml-2\" onClick={() => this.promuoviStudent(s)}>\r\n                                                                    <i className=\"fa fa-user-check\"></i>\r\n                                                                </button>\r\n                                                            </Tooltip>\r\n                                                            \r\n                                                        </td>\r\n                                                    </tr>\r\n                                                })\r\n                                            }\r\n                                        </tbody>\r\n                                    </table>\r\n                                </TabPane>\r\n                            })\r\n                        }\r\n                    </Tabs>\r\n                </TabPane>\r\n\r\n                <TabPane tab={<span><i className=\"fal fa-user-graduate fa-fw mr-1\"></i> Studenti archiviati</span>} key=\"2\">\r\n                    <div className=\"float-right mr-1 mb-2\">\r\n                        <label className=\"d-inline-block text-secondary mr-2\">Filtra studenti: </label>\r\n                        <Input value={filter} onChange={this.changeFilter} className=\"w-auto\" />\r\n                    </div>\r\n\r\n                    <table className=\"table table-bordered text-center\">\r\n                        <tbody className=\"border-top-0\">\r\n\r\n                            <tr>\r\n                                <th><i className=\"fa fa-check-circle fa-lg text-success\"></i></th>\r\n                                <th>Nome</th>\r\n                                <th>Cognome</th>\r\n                                <th>Codice Fiscale</th>\r\n                                <th style={{width: \"15%\"}}>Frequenza</th>\r\n                                <th style={{width: \"20%\"}}>Azioni</th>\r\n                            </tr>\r\n                            \r\n                            {\r\n                                ritirati.map(s => {\r\n                                    let bg = s.ritirato ? \"light font-italic\" : \"white\"\r\n\r\n                                    return <tr className={\"bg-\"+bg}>\r\n                                        <td>\r\n                                            {\r\n                                                !s.ritirato ? <i className=\"fa fa-check-circle fa-lg text-success\"></i> : <i className=\"fa fa-times-circle fa-lg text-danger\"></i>\r\n                                            }\r\n                                        </td>\r\n                                        <td style={{maxWidth: 0}} className=\"text-truncate\">{s.nome}</td>\r\n                                        <td style={{maxWidth: 0}} className=\"text-truncate\">{s.cognome}</td>\r\n                                        <td style={{maxWidth: 0}} className=\"text-truncate\">{s.cf}</td>\r\n                                        <td style={{maxWidth: 0}} className=\"text-truncate\">{s.frequenza}%</td>\r\n                                        \r\n                                        <td>\r\n                                            <Tooltip title=\"Dettagli\">\r\n                                                <button type=\"button\" className=\"btn btn-info circle-btn\" onClick={() => routerHistory.push(adminRoute+\"/studenti/\" + s.idStudente)}>\r\n                                                    <i className=\"fa fa-info\"></i>\r\n                                                </button>\r\n                                            </Tooltip>                                            \r\n                                        </td>\r\n                                    </tr>\r\n                                })\r\n                            }\r\n                        </tbody>\r\n                    </table>\r\n                </TabPane>\r\n            </Tabs>\r\n\r\n            <Modal title=\"Sposta studenti\" visible={this.state.confirmModal} onCancel={this.showHideModal} cancelText=\"Annulla\" okText=\"Conferma\" onOk={this.moveStudents}>\r\n                <label className=\"text-secondary\">Scegliere l'anno in cui spostare gli studenti</label>\r\n                <select className=\"custom-select\" id=\"moveToClass\">\r\n                    <option value=\"1\">Primo anno</option>\r\n                    <option value=\"2\">Secondo anno</option>\r\n                </select>\r\n\r\n                <Collapse bordered={false}>\r\n                    <Panel header=\"Mostra studenti selezionati\" key={1}>\r\n                        { \r\n                            selection.map(s => {\r\n                                return <span className=\"d-block\">\r\n                                    <strong>{s.nome} {s.cognome}</strong> ({s.annoFrequentazione}° anno)\r\n                                </span>\r\n                            })\r\n                        }\r\n                    </Panel>\r\n                </Collapse>\r\n            </Modal>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, message, DatePicker } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { siteUrl, formattaData, adminRoute } from \"../../utilities\"\r\nimport locale from \"antd/es/date-picker/locale/it_IT\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IProps{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly nome: string\r\n    readonly cognome: string\r\n    readonly dataNascita: string\r\n    readonly cf: string\r\n    readonly email: string\r\n    readonly annoScolastico: number\r\n}\r\n\r\nexport default class AddNewStudent extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            nome: \"\",\r\n            cognome: \"\",\r\n            cf: \"\",\r\n            annoScolastico: 1,\r\n            email: \"\",\r\n            dataNascita: \"\"\r\n        }\r\n    }\r\n\r\n    changeNome = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nome: nome\r\n        })\r\n    }\r\n\r\n    changeCognome = (event: any) => {\r\n        let cognome = event.target.value\r\n\r\n        this.setState({\r\n            cognome: cognome\r\n        })\r\n    }\r\n\r\n    changeEmail = (event: any) => {\r\n        let email = event.target.value.trim()\r\n\r\n        this.setState({\r\n            email: email\r\n        })\r\n    }\r\n    \r\n    changeData = (data: string) => {\r\n        this.setState({\r\n            dataNascita: data\r\n        })\r\n    }\r\n\r\n    changeAnnoScolastico = (event: any) => {\r\n        let annoS = event.target.value\r\n\r\n        this.setState({\r\n            annoScolastico: Number(annoS)\r\n        })\r\n    }\r\n\r\n    changeCF = (event: any) => {\r\n        let CF = event.target.value.trim()\r\n\r\n        this.setState({\r\n            cf: CF\r\n        })\r\n    }\r\n\r\n    aggiungiStudente = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { nome, cognome, dataNascita, cf, annoScolastico, email } = this.state\r\n\r\n        if(nome.trim() === \"\" || cognome.trim() === \"\" || dataNascita === \"\" || cf === \"\" || !annoScolastico || email === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(cf.length !== 16){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Codice Fiscale non valido.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        let students = [{\r\n            nome: nome.trim(),\r\n            cognome: cognome.trim(),\r\n            cf: cf,\r\n            password: cf,\r\n            email: email,\r\n            annoFrequentazione: annoScolastico,\r\n            dataNascita: formattaData(dataNascita, true),\r\n            idCorso: this.props.corso\r\n        }]\r\n\r\n        askPassword(siteUrl+\"/api/studenti\", \"post\", {\r\n            studenti: students\r\n        }, (_: any) => {\r\n            message.success(\"Studente creato con successo!\")\r\n            routerHistory.push(adminRoute+\"/studenti\")\r\n        })\r\n\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { nome, cognome, cf, email } = this.state\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-2 text-center\">Aggiungi un nuovo studente</h3>\r\n\r\n            <form onSubmit={this.aggiungiStudente}>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Nome</label>\r\n                        <input name=\"name\" type=\"text\" className=\"form-control\" value={nome} onChange={this.changeNome} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Cognome</label>\r\n                        <input name=\"surname\" type=\"text\" className=\"form-control\" value={cognome} onChange={this.changeCognome} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Anno frequentato</label>\r\n                        <select name=\"anno\" onChange={this.changeAnnoScolastico} className=\"custom-select\">\r\n                            <option value={1}>Primo anno</option>\r\n                            <option value={2}>Secondo anno</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Data di nascita</label>\r\n                        <DatePicker locale={locale} className=\"w-100 select-date\" onChange={(_, d2) => this.changeData(d2)} format=\"DD-MM-YYYY\" />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">E-mail</label>\r\n                        <input name=\"email\" type=\"email\" className=\"form-control\" value={email} onChange={this.changeEmail} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Codice Fiscale</label>\r\n                        <input name=\"cf\" type=\"text\" className=\"form-control\" maxLength={16} value={cf} onChange={this.changeCF} />\r\n                    </div>\r\n                </div>\r\n\r\n                <button type=\"submit\" className=\"btn btn-success text-uppercase w-100\">Aggiungi studente</button>\r\n            </form>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { IPresenze } from \"../../models/IPresenze\"\r\nimport { Tooltip, Icon, Spin, Modal, Select } from \"antd\"\r\nimport { siteUrl, formatItalian, validateTime, checkEnter } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { askPassword } from \"../AskConferma\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\n\r\nexport interface IProps{\r\n    readonly studente: IStudent\r\n    reloadTotali(): void\r\n}\r\nexport interface IState{\r\n    readonly presenze: IPresenze[]\r\n    readonly editingList: IPresenze[]\r\n    readonly filter: string\r\n}\r\n\r\nexport default class PresenzeTable extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            presenze: null,\r\n            editingList: [],\r\n            filter: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        const { studente } = this.props\r\n\r\n        Axios.get(siteUrl+\"/api/studenti/getdetailedpresences/\"+studente.idStudente).then((response) => {\r\n\r\n            let presenze = response.data as IPresenze[]\r\n\r\n            this.setState({\r\n                presenze: presenze\r\n            })\r\n        })\r\n    }\r\n\r\n    changeEntrata = (e: any, idPresenza: number) => {\r\n        let entrata = e.target.value.trim(),\r\n        presenze = this.state.editingList.map(p => {\r\n            if(p.idPresenza === idPresenza)\r\n                p.ingresso = entrata\r\n\r\n            return p\r\n        }) \r\n\r\n        this.setState({\r\n            editingList: presenze\r\n        })\r\n    }\r\n\r\n    changeUscita = (e: any, idPresenza: number) => {\r\n        let uscita = e.target.value.trim(),\r\n        presenze = this.state.editingList.map(p => {\r\n            if(p.idPresenza === idPresenza)\r\n                p.uscita = uscita\r\n\r\n            return p\r\n        }) \r\n\r\n        this.setState({\r\n            editingList: presenze\r\n        })\r\n    }\r\n\r\n    startTimeEdit = (p: IPresenze) => {\r\n        this.setState({\r\n            editingList: this.state.editingList.concat(p)\r\n        })\r\n    }\r\n\r\n    animateTds = (td1: HTMLElement, td2: HTMLElement) => {\r\n        td1.classList.add(\"edited\")\r\n        td2.classList.add(\"edited\")\r\n\r\n        setTimeout(() => {\r\n            td1.classList.remove(\"edited\")\r\n            td2.classList.remove(\"edited\")\r\n        }, 1000)\r\n    }\r\n\r\n    confirmEdit = (id: number, td1: HTMLElement, td2: HTMLElement) => {\r\n        const { presenze, editingList } = this.state,\r\n        presenza = editingList.find(p => p.idPresenza === id)\r\n\r\n        if(!validateTime(presenza.ingresso) || !validateTime(presenza.uscita)){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Orari non validi! (ore:minuti:secondi)\",\r\n                maskClosable: true\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/presenze/\" + id, \"put\", {\r\n            presenza: {\r\n                idPresenza: presenza.idPresenza,\r\n                idStudente: presenza.idStudente,\r\n                ingresso: presenza.ingresso,\r\n                uscita: presenza.uscita,\r\n                idLezione: presenza.idLezione\r\n            }\r\n        }, (response: any) => {\r\n            let output = response.data\r\n\r\n            if(output.trim() === \"success\"){\r\n                let newPresenze = presenze.map(p => {\r\n                    if(p.idPresenza === id){\r\n                        return presenza\r\n                    }\r\n\r\n                    return p\r\n                })\r\n\r\n                this.setState({\r\n                    presenze: newPresenze,\r\n                    editingList: editingList.filter(p => p.idPresenza !== presenza.idPresenza)\r\n                })\r\n\r\n                this.animateTds(td1, td2)\r\n                this.props.reloadTotali()\r\n            }else{\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: output\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    getCategorie = () => {\r\n        const { presenze } = this.state \r\n        let categorie: string[] = []\r\n\r\n        presenze.forEach(p => {\r\n            if(categorie.indexOf(p.lezione) === -1)\r\n                categorie.push(p.lezione)\r\n        })\r\n\r\n        return categorie\r\n    }\r\n\r\n    changeFilter = (filter: string) => {\r\n        this.setState({\r\n            filter: filter === \"\" ? null : filter\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { presenze, editingList, filter } = this.state,\r\n        { studente } = this.props,\r\n        { Option } = Select\r\n\r\n        if(!presenze){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div>\r\n                <Spin indicator={icon} className=\"mt-3\" />\r\n            </div>\r\n        }\r\n\r\n        let presences = filter ? presenze.filter(p => p.lezione.toLowerCase() === filter.toLowerCase()) : presenze\r\n\r\n        return <div className=\"mt-3\">\r\n\r\n            <h3 className=\"d-inline-block\">Presenze dello studente</h3>\r\n\r\n            <div className=\"float-right\">\r\n                <label className=\"d-inline-block text-secondary mr-2\">Filtra per materia: </label>\r\n                <Select defaultValue=\"\" style={{ width: 150 }} onChange={this.changeFilter} showSearch>\r\n                    <Option value=\"\">Nessuna</Option>\r\n                    {\r\n                        this.getCategorie().map(l =>{\r\n                            return <Option value={l}>{l}</Option>\r\n                        })\r\n                    }\r\n                </Select>\r\n            </div>\r\n            \r\n            <div className=\"clearfix\"></div>\r\n\r\n            <table className=\"table table-bordered text-center\">\r\n                <tbody>\r\n                    <tr>\r\n                        <th>Giorno</th>\r\n                        <th>Entrata</th>\r\n                        <th>Uscita</th>\r\n                        <th>Lezione</th>\r\n                        {\r\n                            !studente.promosso && <th>Azioni</th>\r\n                        }\r\n                    </tr>\r\n\r\n                    {\r\n                        presences.map(p => {\r\n                            let presenzaEdit = editingList.find(pre => pre.idPresenza === p.idPresenza),\r\n                            td1: HTMLElement,\r\n                            td2: HTMLElement\r\n\r\n                            return <tr>\r\n                                <td style={{maxWidth: 0}} className=\"text-truncate\">{formatItalian(p.data)}</td>\r\n                                <td style={{maxWidth: 0}} className=\"text-truncate\" ref={r => td1 = r}>\r\n                                    {\r\n                                        presenzaEdit ? <input type=\"text\" className=\"form-control edit-time\" value={presenzaEdit.ingresso} onChange={(e) => this.changeEntrata(e, p.idPresenza)} onKeyUp={(e) => checkEnter(e, () => this.confirmEdit(p.idPresenza, td1, td2))} /> : <span>{p.ingresso}</span>\r\n                                    }\r\n                                </td>\r\n                                <td style={{maxWidth: 0}} className=\"text-truncate\" ref={r => td2 = r}>\r\n                                    {\r\n                                        presenzaEdit ? <input type=\"text\" className=\"form-control edit-time\" value={presenzaEdit.uscita} onChange={(e) => this.changeUscita(e, p.idPresenza)} onKeyUp={(e) => checkEnter(e, () => this.confirmEdit(p.idPresenza, td1, td2))} /> : <span>{p.uscita}</span>\r\n                                    }\r\n                                </td>\r\n                                <Tooltip title={p.lezione}>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{p.lezione}</td>\r\n                                </Tooltip>\r\n                                {\r\n                                    !studente.promosso && <td>\r\n                                        {\r\n                                            presenzaEdit ? <Tooltip title=\"Conferma modifiche\">\r\n                                                <button type=\"button\" className=\"btn btn-success circle-btn\" onClick={() => this.confirmEdit(p.idPresenza, td1, td2)} >\r\n                                                    <i className=\"fa fa-check\"></i>\r\n                                                </button>\r\n                                            </Tooltip> : <Tooltip title=\"Modifica orari\">\r\n                                                <button type=\"button\" className=\"btn btn-orange circle-btn\" onClick={() => this.startTimeEdit(p)}>\r\n                                                    <i className=\"fa fa-user-edit\"></i>\r\n                                                </button>\r\n                                            </Tooltip>\r\n                                        }\r\n                                    </td>\r\n                                }\r\n                            </tr>\r\n                        })\r\n                    }\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { RouteComponentProps } from \"react-router\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\nimport { routerHistory } from \"../..\"\r\nimport { Icon, Spin, Progress, Statistic, Modal, Button } from \"antd\"\r\nimport PresenzeTable from \"./PresenzeTable\"\r\nimport Axios from \"axios\"\r\nimport { formatItalian, siteUrl, adminRoute } from \"../../utilities\"\r\nimport QRCode from \"qrcode.react\"\r\n\r\nexport interface IRouteParams{\r\n    readonly id: string\r\n}\r\nexport interface IProps extends RouteComponentProps<IRouteParams>{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly student: IStudent\r\n    readonly totPresenze: number\r\n    readonly oreTotali: number\r\n    readonly modal: boolean\r\n}\r\n\r\nexport default class StudentDetails extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            student: null,\r\n            totPresenze: null,\r\n            oreTotali: null,\r\n            modal: false\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let id = Number(this.props.match.params.id)\r\n\r\n        if(isNaN(id))\r\n            routerHistory.push(adminRoute)\r\n\r\n        Axios.get(siteUrl+\"/api/studenti/getstudentibyid/\" + id).then((response) => {\r\n            this.setState({\r\n                student: response.data as IStudent\r\n            })\r\n        })\r\n\r\n        Axios.get(siteUrl+\"/api/studenti/gettotaleorelezioni/\" + id).then((response) => {\r\n            this.setState({\r\n                oreTotali: this.roundToTwo(response.data as number)\r\n            })\r\n        })\r\n\r\n        this.loadTotali()\r\n    }\r\n\r\n    loadTotali = () => {\r\n        this.setState({\r\n            totPresenze: null\r\n        })\r\n\r\n        Axios.get(siteUrl+\"/api/studenti/gethoursamount/\" + this.props.match.params.id).then((response) => {\r\n            this.setState({\r\n                totPresenze: this.roundToTwo(response.data as number)\r\n            })\r\n        })\r\n    }\r\n\r\n    toggleModal = () => {\r\n        this.setState({\r\n            modal: !this.state.modal\r\n        })\r\n    }\r\n\r\n    downloadQR = () => {\r\n        const { student } = this.state,\r\n        canvas = document.getElementById(\"qr-code-image\") as any\r\n        const pngUrl = canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\")\r\n        let downloadLink = document.createElement(\"a\")\r\n        downloadLink.href = pngUrl\r\n        downloadLink.download = `qrcode${student.nome}${student.cognome}.png`\r\n        document.body.appendChild(downloadLink)\r\n        downloadLink.click()\r\n        document.body.removeChild(downloadLink)\r\n    }\r\n\r\n    getQRCode = () => {\r\n        const { student } = this.state\r\n\r\n        return student.codice\r\n    }\r\n\r\n    roundToTwo = (total: number) => {    \r\n        return Math.round(total)\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { student, totPresenze, oreTotali, modal } = this.state\r\n        \r\n        if(!student){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        let perc = student.frequenza !== null ? this.roundToTwo(100 * totPresenze / oreTotali) : null,\r\n        color = perc >= 80 ? \"var(--success)\" : \"var(--danger)\"\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <div className=\"row mx-0\">\r\n                <div className=\"col-12 col-md-6 pl-md-0 mb-2 mb-md-0\">\r\n                    <div className=\"p-3 bg-white border rounded\">\r\n                        <span className=\"border-text\">\r\n                            {\r\n                                student.ritirato ? \"Ritirato: \"+student.dataRitiro : student.annoFrequentazione === 1 ? \"Primo anno\" : \"Secondo anno\"\r\n                            }\r\n                        </span>\r\n                        <h4 className=\"text-uppercase mb-2 text-truncate\">{student.nome} {student.cognome}</h4>\r\n                        <p className=\"mb-0\"><strong>Data di nascita</strong>: {formatItalian(student.dataNascita)}</p>\r\n                        <p className=\"mb-0\"><strong>E-mail</strong>: {student.email}</p>\r\n                        <Button onClick={this.toggleModal} className=\"float-right\" type=\"link\">\r\n                            Mostra codice QR\r\n                        </Button>\r\n                        <div className=\"clearfix\"></div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-12 col-md-6 pr-md-0\">\r\n                    <div className=\"p-3 bg-white border rounded\">\r\n                        {\r\n                            perc !== null ? <Progress type=\"circle\" percent={perc} width={80} className=\"float-left mr-3\" strokeColor={color} format={percent => `${percent}%`}  /> : <Spin indicator={<Icon type=\"loading\" spin />} />\r\n                        }\r\n\r\n                        {\r\n                            oreTotali !== null && totPresenze !== null ? <Statistic title=\"Presenze totali (ore)\" value={totPresenze} suffix={\"/ \"+oreTotali} decimalSeparator=\",\" groupSeparator=\".\" /> : <Spin indicator={<Icon type=\"loading\" spin />} />\r\n                        }\r\n                        \r\n                        <div className=\"clearfix\"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <PresenzeTable studente={student} reloadTotali={this.loadTotali} />\r\n            \r\n            <Modal visible={modal} maskClosable={true} centered title={\r\n                <span>\r\n                    <i className=\"far fa-qrcode fa-fw fa-lg text-primary mr-2\"></i>Codice QR dello studente\r\n                </span>\r\n            } onCancel={this.toggleModal} width={350} onOk={this.downloadQR}\r\n            footer={[\r\n                <Button type=\"primary\" onClick={this.downloadQR}>\r\n                    <i className=\"far fa-arrow-to-bottom mr-2\"></i> Salva codice\r\n                </Button>,\r\n                <Button type=\"default\" onClick={this.toggleModal}>Chiudi</Button>\r\n            ]}>\r\n                <div className=\"text-center\">\r\n                    <p>Salva il codice sottostante e condividilo con <strong>{student.nome} {student.cognome}.</strong></p>\r\n                    <div className=\"my-2\">\r\n                        <QRCode id=\"qr-code-image\" value={this.getQRCode()} size={200} />\r\n                    </div>\r\n                </div>\r\n            </Modal>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { IDocente } from \"../../models/IDocente\"\r\nimport { routerHistory } from \"../..\"\r\nimport { Modal, Tooltip, Spin, Icon, Switch, message } from \"antd\"\r\nimport Axios from \"axios\"\r\nimport { siteUrl, adminRoute } from \"../../utilities\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IProps{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly docenti: IDocente[]\r\n    readonly showAll: boolean\r\n}\r\n\r\nexport default class DocentiList extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            docenti: null,\r\n            showAll: false\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Axios.get(siteUrl+\"/api/docenti\").then((response) => {\r\n            this.setState({\r\n                docenti: response.data as IDocente[]\r\n            })\r\n        })\r\n    }\r\n\r\n    switchList = () => {\r\n        this.setState({\r\n            showAll: !this.state.showAll\r\n        })\r\n    }\r\n\r\n    showDeleteConfirm = (docente: IDocente) => {\r\n        Modal.confirm({\r\n            title: `ATTENZIONE: si sta per ritirare un docente (${docente.nome} ${docente.cognome})`,\r\n            content: \"I dati identificativi del docente, le lezioni e le presenze verranno comunque mantenuti, ma il docente verrà ritirato da tutti i corsi in cui insegna. In seguito sarà possibile reintegrarlo nel corso se necessario.\",\r\n            okText: \"Confermo\",\r\n            okType: \"danger\",\r\n            cancelText: \"Annulla\",\r\n            onOk: () => this.ritiraOAnnulla(docente.idDocente, \"Docente ritirato con successo!\")\r\n        })\r\n    }\r\n\r\n    ritiraOAnnulla = (idDocente: number, msg: string) => {\r\n        askPassword(siteUrl+\"/api/docenti/ritiradocente\", \"put\", {\r\n            idDocente: idDocente\r\n        }, (response: any) => {\r\n\r\n            let docenti = response.data as IDocente[]\r\n\r\n            this.setState({\r\n                docenti: docenti\r\n            })\r\n\r\n            message.success(msg)\r\n        }, () => {\r\n            this.setState({\r\n                docenti: null\r\n            })\r\n        })\r\n    }\r\n\r\n    sortbyId = (a: IDocente, b: IDocente) => { \r\n        if(a.idDocente > b.idDocente)\r\n            return 1\r\n        if(a.idDocente < b.idDocente)\r\n            return -1\r\n\r\n        return 0\r\n    }\r\n\r\n    backRetire = (doc: IDocente) => {\r\n        Modal.confirm({\r\n            title: `${doc.nome} ${doc.cognome}`,\r\n            content: \"Questo docente verrà reintegrato all'interno del corso.\",\r\n            okText: \"Confermo\",\r\n            okType: \"danger\",\r\n            cancelText: \"Annulla\",\r\n            onOk: () => this.ritiraOAnnulla(doc.idDocente, \"Docente reintegrato con successo!\")\r\n        })\r\n    }\r\n\r\n    isInCorso = (doc: IDocente) => {\r\n        return doc.corsi.indexOf(this.props.corso) !== -1\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { docenti, showAll } = this.state\r\n\r\n        if(!docenti){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        let lista = showAll ? docenti : docenti.filter(d => this.isInCorso(d)),\r\n        docs = lista.sort(this.sortbyId).sort((a, _) => a.ritirato ? 0 : -1)\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-3 text-center\">Docenti del corso</h3>\r\n\r\n            <label className=\"pointer\" style={{ transform: \"translateY(50%)\" }}>\r\n                <Switch checked={!showAll} onChange={this.switchList} className=\"mr-1 align-top\" /> Mostra solo i docenti del mio corso\r\n            </label>\r\n\r\n            <button className=\"btn btn-success float-right mb-3\" type=\"button\" onClick={() => routerHistory.push(adminRoute+\"/docenti/new\")}>\r\n                <i className=\"fal fa-plus fa-fw\"></i> Aggiungi docente\r\n            </button>\r\n\r\n            <table className=\"table table-bordered text-center\">\r\n                \r\n                    <tbody>\r\n                        <tr>\r\n                            <th>Nome</th>\r\n                            <th>Cognome</th>\r\n                            <th style={{width: \"15%\"}}>Ore 1° anno</th>\r\n                            <th style={{width: \"15%\"}}>Ore 2° anno</th>\r\n                            <th style={{width: \"20%\"}}>Azioni</th>\r\n                        </tr>\r\n\r\n                        {\r\n                            docs.map(d => {   \r\n                                let bg = d.ritirato ? \"light font-italic\" : !this.isInCorso(d) ? \"transblue\" :\"white\"\r\n\r\n                                return <tr className={\"bg-\"+bg}>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{d.nome}</td>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{d.cognome}</td>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{d.monteOre.orePrimo}</td>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{d.monteOre.oreSecondo}</td>\r\n                                    <td>\r\n                                        <Tooltip title=\"Dettagli\">\r\n                                            <button type=\"button\" className=\"btn btn-info circle-btn\" onClick={() => routerHistory.push(adminRoute+\"/docenti/\" + d.idDocente)}>\r\n                                                <i className=\"fa fa-info\"></i>\r\n                                            </button>\r\n                                        </Tooltip>\r\n\r\n                                        {\r\n                                            !d.ritirato && <Tooltip title=\"Modifica\">\r\n                                                <button type=\"button\" className=\"btn btn-warning text-white circle-btn ml-2\" onClick={() => routerHistory.push(adminRoute+\"/docenti/edit/\" + d.idDocente)}>\r\n                                                    <i className=\"fa fa-pen\"></i>\r\n                                                </button>\r\n                                            </Tooltip>\r\n                                        }\r\n                                        \r\n                                        {\r\n                                            !d.ritirato && <Tooltip title=\"Segna come ritirato\">\r\n                                                <button type=\"button\" className=\"btn btn-danger circle-btn ml-2\" onClick={() => this.showDeleteConfirm(d)}>\r\n                                                    <i className=\"fa fa-user-times\"></i>\r\n                                                </button>\r\n                                            </Tooltip>\r\n                                        }\r\n\r\n                                        {\r\n                                            d.ritirato && <Tooltip title=\"Reintegra nel corso\">\r\n                                                <button type=\"button\" className=\"btn btn-danger circle-btn ml-2\" onClick={() => this.backRetire(d)}>\r\n                                                    <i className=\"fa fa-reply\"></i>\r\n                                                </button>\r\n                                            </Tooltip>\r\n                                        }\r\n                                    </td>\r\n                                </tr>\r\n                            })\r\n                        }\r\n                    </tbody>\r\n            </table>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, message, Icon, Spin, Checkbox } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { siteUrl, adminRoute } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { IMateria } from \"../../models/IMateria\"\r\nimport { ICorso } from \"../../models/ICorso\"\r\nimport { Cipher } from \"../../models/Cipher\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IProps{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly nome: string\r\n    readonly cognome: string\r\n    readonly CF: string\r\n    readonly email: string\r\n    readonly materie: IMateria[]\r\n    readonly corsi: ICorso[]\r\n    readonly materieSel: number[]\r\n    readonly corsiSel: number[] \r\n}\r\n\r\nexport default class AddNewDocente extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            nome: \"\",\r\n            cognome: \"\",\r\n            CF: \"\",\r\n            email: \"\",\r\n            corsi: null,\r\n            materie: null,\r\n            corsiSel: [],\r\n            materieSel: []\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Axios.get(siteUrl+\"/api/corsi\").then(response => {\r\n            let corsi = response.data as ICorso[]\r\n\r\n            this.setState({\r\n                corsi: corsi\r\n            })\r\n        })\r\n\r\n        Axios.get(siteUrl+\"/api/materie/getmateriebycorso/\"+this.props.corso).then(response => {\r\n            let materie = response.data as IMateria[]\r\n\r\n            this.setState({\r\n                materie: materie\r\n            })\r\n        })\r\n    }\r\n\r\n    changeNome = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nome: nome\r\n        })\r\n    }\r\n\r\n    changeEmail = (event: any) => {\r\n        let email = event.target.value.trim()\r\n\r\n        this.setState({\r\n            email: email\r\n        })\r\n    }\r\n\r\n    changeCognome = (event: any) => {\r\n        let cognome = event.target.value\r\n\r\n        this.setState({\r\n            cognome: cognome\r\n        })\r\n    }\r\n\r\n    changeCF = (event: any) => {\r\n        let CF = event.target.value.trim()\r\n\r\n        this.setState({\r\n            CF: CF\r\n        })\r\n    }\r\n\r\n    aggiungiDocente = (e: any) => {\r\n        e.preventDefault()\r\n        \r\n        const { nome, cognome,CF, email, corsiSel, materieSel } = this.state\r\n\r\n        if(nome.trim() === \"\" || cognome.trim() === \"\" || CF === \"\" || email === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(CF.length !== 16){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Codice Fiscale non valido.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(!materieSel.length){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Scegliere almeno una materia.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(!corsiSel.length){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Scegliere almeno un corso.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        let cipher = new Cipher(),\r\n        password = cipher.encode(CF)\r\n\r\n        askPassword(siteUrl+\"/api/docenti\", \"post\", {\r\n            docente: {\r\n                nome: nome.trim(),\r\n                cognome: cognome.trim(),\r\n                cf: CF,\r\n                password: password,\r\n                email: email,\r\n                tenere: corsiSel.map(c => { return { idCorso: c, idDocente: 0 } }),\r\n                insegnare: materieSel.map(m => { return { idMateria: m, idDocente: 0 } }),\r\n            }\r\n        }, (_: any) => {\r\n            message.success(\"Docente creato con successo!\")\r\n            routerHistory.push(adminRoute+\"/docenti\")\r\n        })\r\n    }\r\n\r\n    switchMateria = (materiaId: number) => {\r\n        let find = this.state.materieSel.find(m => m === materiaId),\r\n        newList = find ? this.state.materieSel.filter(m => m !== materiaId) : this.state.materieSel.concat(materiaId)\r\n\r\n        this.setState({\r\n            materieSel: newList\r\n        })\r\n    }\r\n\r\n    switchCorso = (corsoId: number) => {\r\n        let find = this.state.corsiSel.find(m => m === corsoId),\r\n        newList = find ? this.state.corsiSel.filter(m => m !== corsoId) : this.state.corsiSel.concat(corsoId)\r\n\r\n        this.setState({\r\n            corsiSel: newList\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { nome, cognome, CF, email, materie, materieSel, corsi, corsiSel } = this.state\r\n\r\n        if(!materie || !corsi){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        if(!materie.length){\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                È necessario creare almeno una materia per poter inserire un nuovo docente.\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-2 text-center\">Aggiungi un nuovo docente</h3>\r\n\r\n            <form onSubmit={this.aggiungiDocente}>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Nome</label>\r\n                        <input name=\"name\" type=\"text\" className=\"form-control\" value={nome} onChange={this.changeNome} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Cognome</label>\r\n                        <input name=\"surname\" type=\"text\" className=\"form-control\" value={cognome} onChange={this.changeCognome} />\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">E-mail</label>\r\n                        <input name=\"email\" type=\"email\" className=\"form-control\" value={email} onChange={this.changeEmail} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Codice Fiscale</label>\r\n                        <input name=\"cf\" type=\"text\" className=\"form-control\" maxLength={16} value={CF} onChange={this.changeCF} />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Materie insegnate dal docente</label>\r\n                        <div className=\"multiselect form-control p-0\">\r\n                            {\r\n                                materie.map(m => {\r\n                                    let find = materieSel.find(f => f === m.idMateria),\r\n                                    checked = find ? true : false,\r\n                                    classname = checked ? \"checked\" : \"\"\r\n\r\n                                    return <label className={\"option \" + classname}>\r\n                                        <Checkbox className=\"mr-2\" onChange={() => this.switchMateria(m.idMateria)} checked={checked} /> {m.nome}\r\n                                    </label>\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Corsi del docente</label>\r\n                        <div className=\"multiselect form-control p-0\">\r\n                            {\r\n                                corsi.map(m => {\r\n                                    let find = corsiSel.find(f => f === m.idCorso),\r\n                                    checked = find ? true : false,\r\n                                    classname = checked ? \"checked\" : \"\"\r\n\r\n                                    return <label className={\"option \" + classname}>\r\n                                        <Checkbox className=\"mr-2\" onChange={() => this.switchCorso(m.idCorso)} checked={checked} /> {m.nome}\r\n                                    </label>\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <button type=\"submit\" className=\"btn btn-success text-uppercase w-100\">Aggiungi docente</button>\r\n            </form>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Tooltip, Icon, Spin, Modal, Select } from \"antd\"\r\nimport { siteUrl, formatItalian, validateTime, checkEnter } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { IPresenzaDocente } from \"../../models/IPresenzaDocente\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IProps{\r\n    readonly idDocente: number\r\n    readonly canEdit: boolean\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly presenze: IPresenzaDocente[]\r\n    readonly editingList: IPresenzaDocente[]\r\n    readonly filter: string\r\n}\r\n\r\nexport default class LezioniDocenteTable extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            presenze: null,\r\n            editingList: [],\r\n            filter: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        const { corso, idDocente } = this.props\r\n\r\n        Axios.get(siteUrl+\"/api/lezioni/getlezionidocente/\"+idDocente+\"/\"+corso).then(response => {\r\n            let presenze = response.data as IPresenzaDocente[]\r\n\r\n            this.setState({\r\n                presenze: presenze\r\n            })\r\n        })\r\n    }\r\n\r\n    changeEntrata = (e: any, idPresenza: number) => {\r\n        let entrata = e.target.value.trim(),\r\n        presenze = this.state.editingList.map(p => {\r\n            if(p.idPresenza === idPresenza)\r\n                p.ingresso = entrata\r\n            \r\n            return p\r\n        })\r\n\r\n        this.setState({\r\n            editingList: presenze\r\n        })\r\n    }\r\n\r\n    changeUscita = (e: any, idPresenza: number) => {\r\n        let uscita = e.target.value.trim(),\r\n        presenze = this.state.editingList.map(p => {\r\n            if(p.idPresenza === idPresenza)\r\n                p.uscita = uscita\r\n            \r\n            return p\r\n        })\r\n\r\n        this.setState({\r\n            editingList: presenze\r\n        })\r\n    }\r\n\r\n    startTimeEdit = (p: IPresenzaDocente) => {\r\n        this.setState({\r\n            editingList: this.state.editingList.concat(p)\r\n        })\r\n    }\r\n\r\n    animateTds = (td1: HTMLElement, td2: HTMLElement) => {\r\n        td1.classList.add(\"edited\")\r\n        td2.classList.add(\"edited\")\r\n\r\n        setTimeout(() => {\r\n            td1.classList.remove(\"edited\")\r\n            td2.classList.remove(\"edited\")\r\n        }, 1000)\r\n    }\r\n\r\n    confirmEdit = (id: number, td1: HTMLElement, td2: HTMLElement) => {\r\n        const { editingList, presenze } = this.state,\r\n        presenza = editingList.find(p => p.idPresenza === id)\r\n        \r\n        if(!validateTime(presenza.ingresso) || !validateTime(presenza.uscita)){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Orari non validi! (ore:minuti:secondi)\",\r\n                maskClosable: true\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/presenzedocente/\" + id, \"put\", {\r\n            presenza: {\r\n                idPresenza: id,\r\n                ingresso: presenza.ingresso,\r\n                uscita: presenza.uscita,\r\n                idDocente: presenza.idDocente,\r\n                idLezione: presenza.idLezione\r\n            }\r\n        }, (response: any) => {\r\n            let output = response.data\r\n\r\n            if(output.trim() === \"success\"){\r\n                let newPresenze = presenze.map(p => {\r\n                    if(p.idPresenza === id){\r\n                        return presenza\r\n                    }\r\n\r\n                    return p\r\n                })\r\n\r\n                this.setState({\r\n                    presenze: newPresenze,\r\n                    editingList: editingList.filter(p => p.idPresenza !== presenza.idPresenza)\r\n                })\r\n                \r\n                this.animateTds(td1, td2)\r\n            }else{\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: output\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    getCategorie = () => {\r\n        const { presenze } = this.state \r\n        let categorie: string[] = []\r\n\r\n        presenze.forEach(p => {\r\n            if(categorie.indexOf(p.lezione) === -1)\r\n                categorie.push(p.lezione)\r\n        })\r\n\r\n        return categorie\r\n    }\r\n\r\n    changeFilter = (filter: string) => {\r\n        this.setState({\r\n            filter: filter === \"\" ? null : filter\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { presenze, editingList, filter } = this.state,\r\n        { canEdit } = this.props,\r\n        { Option } = Select\r\n\r\n        if(!presenze){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div>\r\n                <Spin indicator={icon} className=\"mt-3\" />\r\n            </div>\r\n        }\r\n\r\n        let presences = filter ? presenze.filter(p => p.lezione.toLowerCase() === filter.toLowerCase()) : presenze\r\n\r\n        return <div className=\"mt-3\">\r\n            <h3 className=\"d-inline-block\">Lezioni tenute dal docente</h3>\r\n\r\n            <div className=\"float-right\">\r\n                <label className=\"d-inline-block text-secondary mr-2\">Filtra per materia: </label>\r\n                <Select defaultValue=\"\" style={{ width: 150 }} onChange={this.changeFilter} showSearch>\r\n                    <Option value=\"\">Nessuna</Option>\r\n                    {\r\n                        this.getCategorie().map(l =>{\r\n                            return <Option value={l}>{l}</Option>\r\n                        })\r\n                    }\r\n                </Select>\r\n            </div>\r\n\r\n            <div className=\"clearfix\"></div>\r\n\r\n            <table className=\"table table-bordered text-center\">\r\n                <tbody>\r\n                    <tr className=\"thead-light\">\r\n                        <th>Giorno</th>\r\n                        <th>Entrata</th>\r\n                        <th>Uscita</th>\r\n                        <th>Lezione</th>\r\n                        {\r\n                            canEdit && <th>Azioni</th>\r\n                        }\r\n                    </tr>\r\n\r\n                    {\r\n                        presences.map(p => {\r\n                            let editPresenza = editingList.find(pre => pre.idPresenza === p.idPresenza),\r\n                            td1: HTMLElement,\r\n                            td2: HTMLElement\r\n\r\n                            return <tr>\r\n                                <td style={{maxWidth: 0}} className=\"text-truncate\">{formatItalian(p.data)}</td>\r\n                                <td style={{maxWidth: 0}} className=\"text-truncate\" ref={r => td1 = r}>\r\n                                    {\r\n                                        editPresenza ? <input type=\"text\" className=\"form-control edit-time\" value={editPresenza.ingresso} onChange={(e) => this.changeEntrata(e, p.idPresenza)} onKeyUp={(e) => checkEnter(e, () => this.confirmEdit(p.idPresenza, td1, td2))} /> : <span>{p.ingresso}</span>\r\n                                    }\r\n                                </td>\r\n                                <td style={{maxWidth: 0}} className=\"text-truncate\" ref={r => td2 = r}>\r\n                                    {\r\n                                        editPresenza ? <input type=\"text\" className=\"form-control edit-time\" value={editPresenza.uscita} onChange={(e) => this.changeUscita(e, p.idPresenza)} onKeyUp={(e) => checkEnter(e, () => this.confirmEdit(p.idPresenza, td1, td2))} /> : <span>{p.uscita}</span>\r\n                                    }\r\n                                </td>\r\n                                <Tooltip title={p.lezione}>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{p.lezione}</td>\r\n                                </Tooltip>\r\n                                {\r\n                                    canEdit && <td>\r\n                                        {\r\n                                            editPresenza ? <Tooltip title=\"Conferma modifiche\">\r\n                                                <button type=\"button\" className=\"btn btn-success circle-btn\" onClick={() => this.confirmEdit(p.idPresenza, td1, td2)}>\r\n                                                    <i className=\"fa fa-check\"></i>\r\n                                                </button>\r\n                                            </Tooltip> : <Tooltip title=\"Modifica orari\">\r\n                                                <button type=\"button\" className=\"btn btn-orange circle-btn\" onClick={() => this.startTimeEdit(p)}>\r\n                                                    <i className=\"fa fa-user-edit\"></i>\r\n                                                </button>\r\n                                            </Tooltip>\r\n                                        }\r\n                                        \r\n                                    </td>\r\n                                }\r\n                            </tr>\r\n                        })\r\n                    }\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { RouteComponentProps } from \"react-router\"\r\nimport { routerHistory } from \"../..\"\r\nimport { Icon, Spin, Modal, Button, Statistic } from \"antd\"\r\nimport Axios from \"axios\"\r\nimport { IDocente } from \"../../models/IDocente\"\r\nimport LezioniDocenteTable from \"./LezioniDocenteTable\"\r\nimport { siteUrl, adminRoute } from \"../../utilities\"\r\nimport { Cipher } from \"../../models/Cipher\"\r\nimport QRCode from \"qrcode.react\"\r\n\r\n\r\nexport interface IRouteParams{\r\n    readonly id: string\r\n}\r\nexport interface IProps extends RouteComponentProps<IRouteParams>{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly docente: IDocente\r\n    readonly modal: boolean\r\n}\r\n\r\nexport default class DocenteDetails extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            docente: null,\r\n            modal: false\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let id = Number(this.props.match.params.id)\r\n\r\n        if(isNaN(id))\r\n            routerHistory.push(adminRoute)\r\n\r\n        Axios.get(siteUrl+\"/api/docenti/getdocentibyid/\" + id).then((response) => {\r\n            this.setState({\r\n                docente: response.data as IDocente\r\n            })\r\n        })\r\n    }\r\n\r\n    toggleModal = () => {\r\n        this.setState({\r\n            modal: !this.state.modal\r\n        })\r\n    }\r\n\r\n    downloadQR = () => {\r\n        const { docente } = this.state,\r\n        canvas = document.getElementById(\"qr-code-image\") as any\r\n        const pngUrl = canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\")\r\n        let downloadLink = document.createElement(\"a\")\r\n        downloadLink.href = pngUrl\r\n        downloadLink.download = `qrcode${docente.nome}${docente.cognome}.png`\r\n        document.body.appendChild(downloadLink)\r\n        downloadLink.click()\r\n        document.body.removeChild(downloadLink)\r\n    }\r\n\r\n    getQRCode = () => {\r\n        const { docente } = this.state\r\n        let cipher = new Cipher(),\r\n        code = cipher.encode(docente.cf)\r\n\r\n        return code\r\n    }\r\n\r\n    isInCorso = (doc: IDocente) => {\r\n        return doc.corsi.indexOf(this.props.corso) !== -1\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { docente, modal } = this.state\r\n\r\n        if(!docente){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <div className=\"row mx-0\">\r\n                <div className=\"col-12 col-md-6 pl-md-0 mb-2 mb-md-0\">\r\n\r\n                    <div className=\"p-3 bg-white border\">\r\n                        {\r\n                            docente.ritirato && <span className=\"border-text\">Ritirato</span>\r\n                        }\r\n\r\n                        <h4 className=\"text-uppercase mb-2 text-truncate\">{docente.nome} {docente.cognome}</h4>\r\n                        <p className=\"mb-0\"><strong>E-mail</strong>: {docente.email}</p>\r\n                        <Button onClick={this.toggleModal} className=\"float-right\" type=\"link\">\r\n                            Mostra codice QR\r\n                        </Button>\r\n                        <div className=\"clearfix\"></div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-3 pr-md-0\">\r\n                    <div className=\"p-3 bg-white border rounded text-center\" style={{ display: \"flex\", height: \"100%\", alignItems: \"center\", justifyContent: \"center\" }}>\r\n                        <Statistic title=\"Ore svolte\" value={docente.monteOre} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <LezioniDocenteTable idDocente={docente.idDocente} canEdit={this.isInCorso(docente)} corso={this.props.corso} />\r\n\r\n            <Modal visible={modal} maskClosable={true} centered title={\r\n                <span>\r\n                    <i className=\"far fa-qrcode fa-fw fa-lg text-primary mr-2\"></i>Codice QR del docente\r\n                </span>\r\n            } onCancel={this.toggleModal} width={350} onOk={this.downloadQR}\r\n            footer={[\r\n                <Button type=\"primary\" onClick={this.downloadQR}>\r\n                    <i className=\"far fa-arrow-to-bottom mr-2\"></i> Salva codice\r\n                </Button>,\r\n                <Button type=\"default\" onClick={this.toggleModal}>Chiudi</Button>\r\n            ]}>\r\n                <div className=\"text-center\">\r\n                    <p>Salva il codice sottostante e condividilo con <strong>{docente.nome} {docente.cognome}.</strong></p>\r\n                    <div className=\"my-2\">\r\n                        <QRCode id=\"qr-code-image\" value={this.getQRCode()} size={200} />\r\n                    </div>\r\n                </div>\r\n            </Modal>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, Icon, Spin, Checkbox, message } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { siteUrl, adminRoute } from \"../../utilities\"\r\nimport { IDocente } from \"../../models/IDocente\"\r\nimport Axios from \"axios\"\r\nimport { RouteComponentProps } from \"react-router-dom\"\r\nimport { IMateria } from \"../../models/IMateria\"\r\nimport { ICorso } from \"../../models/ICorso\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IRouteParams{\r\n    readonly id: string\r\n}\r\nexport interface IProps extends RouteComponentProps<IRouteParams>{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly docente: IDocente\r\n    readonly nome: string\r\n    readonly cognome: string\r\n    readonly CF: string\r\n    readonly email: string\r\n    readonly materie: IMateria[]\r\n    readonly corsi: ICorso[]\r\n    readonly materieSel: number[]\r\n    readonly corsiSel: number[] \r\n}\r\n\r\nexport default class EditDocente extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            docente: null,\r\n            nome: \"\",\r\n            cognome: \"\",\r\n            CF: \"\",\r\n            email: \"\",\r\n            materie: [],\r\n            materieSel: [],\r\n            corsi: [],\r\n            corsiSel: []\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let id = Number(this.props.match.params.id)\r\n\r\n        if(isNaN(id))\r\n            routerHistory.push(adminRoute)\r\n\r\n        Axios.get(siteUrl+\"/api/docenti/getdocentibyid/\" + id).then((response) => {\r\n            let doc = response.data as IDocente\r\n\r\n            this.setState({\r\n                docente: doc,\r\n                nome: doc.nome,\r\n                cognome: doc.cognome,\r\n                CF: doc.cf,\r\n                email: doc.email,\r\n                materieSel: doc.materie && doc.materie.length ? doc.materie : [],\r\n                corsiSel: doc.corsi && doc.corsi.length ? doc.corsi : []\r\n            })\r\n        })\r\n        \r\n        Axios.get(siteUrl+\"/api/materie/getmateriebycorso/\"+this.props.corso).then((response) => {\r\n            let materie = response.data as IMateria[]\r\n            \r\n            this.setState({\r\n                materie: materie\r\n            })\r\n        })\r\n\r\n        Axios.get(siteUrl+\"/api/corsi\").then((response) => {\r\n            let corsi = response.data as ICorso[]\r\n            \r\n            this.setState({\r\n                corsi: corsi\r\n            })\r\n        })\r\n    }\r\n\r\n    changeNome = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nome: nome\r\n        })\r\n    }\r\n\r\n    changeEmail = (event: any) => {\r\n        let email = event.target.value.trim()\r\n\r\n        this.setState({\r\n            email: email\r\n        })\r\n    }\r\n\r\n    changeCognome = (event: any) => {\r\n        let cognome = event.target.value\r\n\r\n        this.setState({\r\n            cognome: cognome\r\n        })\r\n    }\r\n\r\n    changeCF = (event: any) => {\r\n        let CF = event.target.value.trim()\r\n\r\n        this.setState({\r\n            CF: CF\r\n        })\r\n    }\r\n\r\n    modificaDocente = (e: any) => {\r\n        e.preventDefault()\r\n        \r\n        const { docente, nome, cognome, CF, email, corsiSel, materieSel } = this.state\r\n\r\n        if(nome.trim() === \"\" || cognome.trim() === \"\" || CF === \"\" || email === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(!materieSel.length){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Scegliere almeno una materia.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(!corsiSel.length){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Scegliere almeno un corso.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(CF.length !== 16){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Codice Fiscale non valido.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/docenti/\" + this.props.match.params.id, \"put\", {\r\n            docente: {\r\n                idDocente: parseInt(this.props.match.params.id),\r\n                nome: nome.trim(),\r\n                cognome: cognome.trim(),\r\n                email: email,\r\n                cf: CF,\r\n                tenere: corsiSel.map(c => { return { idCorso: c, idDocente: docente.idDocente } }),\r\n                insegnare: materieSel.map(m => { return { idMateria: m, idDocente: docente.idDocente } }),\r\n                ritirato: docente.ritirato\r\n            }\r\n        }, (_: any) => {\r\n            message.success(\"Docente modificato con successo!\")\r\n            routerHistory.push(adminRoute+\"/docenti\")\r\n        })\r\n    }\r\n\r\n    switchMateria = (materiaId: number) => {\r\n        let find = this.state.materieSel.find(m => m === materiaId),\r\n        newList = find ? this.state.materieSel.filter(m => m !== materiaId) : this.state.materieSel.concat(materiaId)\r\n\r\n        this.setState({\r\n            materieSel: newList\r\n        })\r\n    }\r\n\r\n    switchCorso = (corsoId: number) => {\r\n        let find = this.state.corsiSel.find(m => m === corsoId),\r\n        newList = find ? this.state.corsiSel.filter(m => m !== corsoId) : this.state.corsiSel.concat(corsoId)\r\n\r\n        this.setState({\r\n            corsiSel: newList\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { nome, cognome, CF, docente, email, materie, materieSel, corsi, corsiSel } = this.state\r\n\r\n        if(!docente || !materie.length || !corsi.length){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-2 text-center\">Modifica di un docente</h3>\r\n\r\n            <form onSubmit={this.modificaDocente}>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Nome</label>\r\n                        <input name=\"name\" type=\"text\" className=\"form-control\" value={nome} onChange={this.changeNome} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Cognome</label>\r\n                        <input name=\"surname\" type=\"text\" className=\"form-control\" value={cognome} onChange={this.changeCognome} />\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">E-mail</label>\r\n                        <input name=\"email\" type=\"email\" className=\"form-control\" value={email} onChange={this.changeEmail} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Codice Fiscale</label>\r\n                        <input name=\"cf\" type=\"text\" className=\"form-control\" maxLength={16} value={CF} onChange={this.changeCF} />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Materie insegnate dal docente</label>\r\n                        <div className=\"multiselect form-control p-0\">\r\n                            {\r\n                                materie.map(m => {\r\n                                    let find = materieSel.find(f => f === m.idMateria),\r\n                                    checked = find ? true : false,\r\n                                    classname = checked ? \"checked\" : \"\"\r\n\r\n                                    return <label className={\"option \" + classname}>\r\n                                        <Checkbox className=\"mr-2\" onChange={() => this.switchMateria(m.idMateria)} checked={checked} /> {m.nome}\r\n                                    </label>\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Corsi del docente</label>\r\n                        <div className=\"multiselect form-control p-0\">\r\n                            {\r\n                                corsi.map(m => {\r\n                                    let find = corsiSel.find(f => f === m.idCorso),\r\n                                    checked = find ? true : false,\r\n                                    classname = checked ? \"checked\" : \"\"\r\n\r\n                                    return <label className={\"option \" + classname}>\r\n                                        <Checkbox className=\"mr-2\" onChange={() => this.switchCorso(m.idCorso)} checked={checked} /> {m.nome}\r\n                                    </label>\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <button type=\"submit\" className=\"btn btn-success text-uppercase w-100\">Modifica docente</button>\r\n            </form>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, Icon, Spin, message, DatePicker } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { siteUrl, formattaData, formatItalian, adminRoute } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { RouteComponentProps } from \"react-router-dom\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\nimport locale from \"antd/es/date-picker/locale/it_IT\"\r\nimport moment from \"moment\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IRouteParams{\r\n    readonly id: string\r\n}\r\nexport interface IProps extends RouteComponentProps<IRouteParams>{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly studente: IStudent\r\n    readonly nome: string\r\n    readonly cognome: string\r\n    readonly dataNascita: string\r\n    readonly CF: string\r\n    readonly email: string\r\n}\r\n\r\nexport default class EditStudente extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            studente: null,\r\n            nome: \"\",\r\n            cognome: \"\",\r\n            dataNascita: \"\",\r\n            CF: \"\",\r\n            email: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let id = Number(this.props.match.params.id)\r\n\r\n        if(isNaN(id))\r\n            routerHistory.push(adminRoute)\r\n\r\n        Axios.get(siteUrl+\"/api/studenti/getstudentibyid/\" + id).then((response) => {\r\n            let stu = response.data as IStudent\r\n\r\n            this.setState({\r\n                studente: stu,\r\n                nome: stu.nome,\r\n                cognome: stu.cognome,\r\n                CF: stu.cf,\r\n                dataNascita: formatItalian(stu.dataNascita),\r\n                email: stu.email\r\n            })\r\n        })\r\n    }\r\n\r\n    changeNome = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nome: nome\r\n        })\r\n    }\r\n\r\n    changeEmail = (event: any) => {\r\n        let email = event.target.value.trim()\r\n\r\n        this.setState({\r\n            email: email\r\n        })\r\n    }\r\n\r\n    changeCognome = (event: any) => {\r\n        let cognome = event.target.value\r\n\r\n        this.setState({\r\n            cognome: cognome\r\n        })\r\n    }\r\n\r\n    changeData = (data: string) => {\r\n        this.setState({\r\n            dataNascita: data\r\n        })\r\n    }\r\n\r\n    changeCF = (event: any) => {\r\n        let CF = event.target.value.trim()\r\n\r\n        this.setState({\r\n            CF: CF\r\n        })\r\n    }\r\n\r\n    modificaStudente = (e: any) => {\r\n        e.preventDefault()\r\n        \r\n        const { nome, cognome, dataNascita, CF, email, studente } = this.state\r\n\r\n        if(nome.trim() === \"\" || cognome.trim() === \"\" || dataNascita === \"\" || CF === \"\" || email === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(CF.length !== 16){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Codice Fiscale non valido.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/studenti/\" + studente.idStudente, \"put\", {\r\n            studente: {\r\n                idStudente: studente.idStudente,\r\n                nome: nome.trim(),\r\n                cognome: cognome.trim(),\r\n                email: email,\r\n                cf: CF,\r\n                idCorso: this.props.corso,\r\n                annoFrequentazione: studente.annoFrequentazione,\r\n                dataNascita: formattaData(dataNascita, true),\r\n                ritirato: studente.ritirato,\r\n                promosso: studente.promosso\r\n            }\r\n        }, (_: any) => {\r\n            message.success(\"Studente modificato con successo!\")\r\n            routerHistory.push(adminRoute+\"/studenti\")\r\n        })\r\n        \r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { nome, cognome, dataNascita, CF, studente, email } = this.state\r\n\r\n        if(!studente){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-2 text-center\">Modifica di uno studente</h3>\r\n\r\n            <form onSubmit={this.modificaStudente}>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Nome</label>\r\n                        <input name=\"name\" type=\"text\" className=\"form-control\" value={nome} onChange={this.changeNome} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Cognome</label>\r\n                        <input name=\"surname\" type=\"text\" className=\"form-control\" value={cognome} onChange={this.changeCognome} />\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Data di nascita</label>\r\n                        <DatePicker locale={locale} className=\"w-100 select-date\" onChange={(_, d2) => this.changeData(d2)} format=\"DD-MM-YYYY\" defaultValue={moment(dataNascita, \"DD-MM-YYYY\")} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">E-mail</label>\r\n                        <input name=\"email\" type=\"email\" className=\"form-control\" value={email} onChange={this.changeEmail} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Codice Fiscale</label>\r\n                        <input name=\"cf\" type=\"text\" className=\"form-control\" maxLength={16} value={CF} onChange={this.changeCF} />\r\n                    </div>\r\n                </div>\r\n\r\n                <button type=\"submit\" className=\"btn btn-success text-uppercase w-100\">Modifica studente</button>\r\n            </form>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport Dragger from \"antd/lib/upload/Dragger\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\nimport { Modal, Tooltip, Icon, message } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { formattaData, capitalizeFirst, siteUrl, resizePopup, formatItalian, adminRoute } from \"../../utilities\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IProps{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly addList: IStudent[]\r\n    readonly fileContent: string\r\n    readonly fields: any\r\n}\r\n\r\nconst fields = [{\r\n    label: \"Nome\",\r\n    field: \"nome\"\r\n},{\r\n    label: \"Cognome\",\r\n    field: \"cognome\"\r\n},{\r\n    label: \"Codice Fiscale\",\r\n    field: \"cf\"\r\n},{\r\n    label: \"Data di nascita\",\r\n    field: \"dataNascita\"\r\n},{\r\n    label: \"E-mail\",\r\n    field: \"email\"\r\n}]\r\n\r\nexport default class StudentsImport extends React.PureComponent<IProps, IState>{\r\n    \r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            addList: [],\r\n            fileContent: \"\",\r\n            fields: {\r\n                nome: 0,\r\n                cognome: 0,\r\n                cf: 0,\r\n                dataNascita: 0,\r\n                email: 0,\r\n                annoFrequentazione: 1\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        resizePopup()\r\n    }\r\n\r\n    splitCSV = (data: string) => {\r\n        let regex = /([\"'])(?:(?=(\\\\?))\\2.)*?\\1/g,\r\n        pieces = data.match(regex)\r\n\r\n        return pieces.map(p => { return p.replace(/[\"]/g, '') })\r\n    }\r\n\r\n    renderOptions = () => {\r\n        let rows = this.state.fileContent.split(\"\\n\"),\r\n        cells = this.splitCSV(rows[0]),\r\n        options = cells.map((c, i) => {\r\n            if(c === \"\")\r\n                return null\r\n\r\n            return <option value={i}>{c}</option>\r\n        })\r\n\r\n        return options\r\n    }\r\n\r\n    changeVarPos = (e: any, varName: string) => {\r\n        let value = e.target.value,\r\n        obj = this.state.fields\r\n\r\n        obj[varName] = value\r\n\r\n        this.setState({\r\n            fields: obj\r\n        })\r\n    }\r\n\r\n    readFile = (file: any) => {\r\n        const reader = new FileReader()\r\n\r\n        reader.onload = e => {\r\n            this.setState({\r\n                fileContent: String(e.target.result).trim()\r\n            })\r\n\r\n            Modal.info({\r\n                width: 500,\r\n                centered: true,\r\n                title: \"Selezionare i campi da abbinare\",\r\n                icon: <Icon type=\"api\" style={{ color: \"var(--success)\" }} />,\r\n                maskClosable: true,\r\n                content: <div style={{ marginLeft: -38 }}>\r\n                    <div className=\"row mt-3 px-0\">\r\n                        <div className=\"col-4\">\r\n                            <label className=\"mt-2\">Classe: </label>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                            <select className=\"custom-select pointer\" style={{ height: 35 }} onChange={(e) => this.changeVarPos(e, \"annoFrequentazione\")}>\r\n                                <option value=\"1\">Primo anno</option>\r\n                                <option value=\"2\">Secondo anno</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    {\r\n                        fields.map(f => {\r\n                            return <div className=\"row mt-3 px-0\">\r\n                                <div className=\"col-4\">\r\n                                    <label className=\"mt-2\">{f.label}: </label>\r\n                                </div>\r\n                                <div className=\"col\">\r\n                                    <select className=\"custom-select pointer\" style={{ height: 35 }} onChange={(e) => this.changeVarPos(e, f.field)}>\r\n                                        {this.renderOptions()}\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                        })\r\n                    }\r\n                </div>,\r\n                onOk: this.showImportPreview,\r\n                okText: \"Prosegui\"\r\n            })\r\n        }\r\n\r\n        reader.readAsText(file, \"ISO-8859-1\")\r\n\r\n        return false\r\n    }\r\n\r\n    showImportPreview = () => {\r\n        const { fileContent, fields} = this.state\r\n\r\n        let rows = fileContent.split(\"\\n\"),\r\n        list: IStudent[] = [],\r\n        popup = document.getElementById(\"popup\")\r\n\r\n        rows.forEach(r => {\r\n            let cells = this.splitCSV(r)\r\n\r\n            let student: IStudent = {\r\n                idCorso: this.props.corso,\r\n                nome: capitalizeFirst(cells[fields['nome']]),\r\n                cognome: capitalizeFirst(cells[fields['cognome']]),\r\n                annoFrequentazione: parseInt(fields['annoFrequentazione']),\r\n                cf: cells[fields['cf']],\r\n                dataNascita: formattaData(cells[fields['dataNascita']], true),\r\n                email: cells[fields['email']],\r\n                password: cells[fields['cf']]\r\n            }\r\n\r\n            list.push(student)\r\n        })\r\n\r\n        this.setState({\r\n            addList: list\r\n        })\r\n\r\n        popup.classList.add(\"show\")\r\n    }\r\n\r\n    hidePopup = () => {\r\n        let popup = document.getElementById(\"popup\")\r\n\r\n        this.setState({\r\n            addList: [],\r\n            fields: {\r\n                nome: 0,\r\n                cognome: 0,\r\n                cf: 0,\r\n                dataNascita: 0,\r\n                email: 0,\r\n                annoFrequentazione: 0\r\n            }\r\n        })\r\n\r\n        popup.classList.remove(\"show\")\r\n    }\r\n\r\n    confirmImport = () => {\r\n        askPassword(siteUrl+\"/api/studenti\", \"post\", {\r\n            studenti: this.state.addList\r\n        }, (_: any) => {\r\n            message.success(\"Importazione eseguita con successo!\")\r\n            routerHistory.push(adminRoute+\"/studenti\")\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { addList } = this.state\r\n\r\n        return <div className=\"col p-5 right-block\" id=\"mainBlock\" style={{flexDirection: \"column\"}}>\r\n            <h3 className=\"text-center w-100\">Importa studenti da CSV</h3>\r\n\r\n            <label>\r\n                Prima di proseguire, esportare il CSV da <strong>Sifer</strong>.\r\n            </label>\r\n\r\n            <div className=\"uploader mt-2 w-100\">\r\n                <Dragger accept=\".csv\" beforeUpload={file => this.readFile(file)}>\r\n                    <p className=\"ant-upload-drag-icon\">\r\n                        <i className=\"fa fa-file-csv fa-5x\"></i>\r\n                    </p>\r\n                    <p className=\"ant-upload-text\">Clicca o trascina un file su quest'aerea</p>\r\n                    <p className=\"ant-upload-hint\">\r\n                        Assicurati che il file abbia l'estensione <strong>.csv</strong>.\r\n                    </p>\r\n                </Dragger>\r\n            </div>\r\n\r\n            <div id=\"popup\" className=\"preview px-0\">\r\n                <div className=\"w-100 h-100 inner overflow-auto px-5 py-4\">\r\n                    <h3 className=\"mb-3 text-center\">Anteprima dati da importare</h3>\r\n                    {\r\n                        addList.length && <table className=\"table table-bordered text-center\">\r\n                            <tbody>\r\n                                <tr>\r\n                                    <th>Nome</th>\r\n                                    <th>Cognome</th>\r\n                                    <th>Anno</th>\r\n                                    <th>Codice Fiscale</th>\r\n                                    <th>Data di Nascita</th>\r\n                                    <th style={{width: \"25%\"}}>E-mail</th>\r\n                                </tr>\r\n\r\n                                {\r\n                                    addList.map(s => {                \r\n                                        return <tr>\r\n                                            <Tooltip title={s.nome}>\r\n                                                <td style={{maxWidth: 0}} className=\"text-truncate\">{s.nome}</td>\r\n                                            </Tooltip>\r\n                                            <Tooltip title={s.cognome}>\r\n                                                <td style={{maxWidth: 0}} className=\"text-truncate\">{s.cognome}</td>\r\n                                            </Tooltip>\r\n                                            <td style={{maxWidth: 0}} className=\"text-truncate\">{s.annoFrequentazione}</td>\r\n                                            <Tooltip title={s.cf}>\r\n                                                <td style={{maxWidth: 0}} className=\"text-truncate\">{s.cf}</td>\r\n                                            </Tooltip>\r\n                                            <td style={{maxWidth: 0}} className=\"text-truncate\">{formatItalian(s.dataNascita)}</td>\r\n                                            <Tooltip title={s.email}>\r\n                                                <td style={{maxWidth: 0}} className=\"text-truncate\">{s.email}</td>\r\n                                            </Tooltip>\r\n                                        </tr>\r\n                                    })\r\n                                }\r\n                            </tbody>\r\n                        </table>\r\n                    }\r\n                </div>\r\n\r\n                <div className=\"bottom-side p-3 text-right\">\r\n                    <button className=\"btn btn-danger mr-2\" onClick={this.hidePopup}>Annulla</button>\r\n                    <button className=\"btn btn-success\" onClick={this.confirmImport}>Conferma importazione</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Tooltip, Spin, Icon, Modal, message, Button } from \"antd\"\r\nimport Axios from \"axios\"\r\nimport { siteUrl } from \"../../utilities\"\r\nimport { IMateria } from \"../../models/IMateria\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IProps{\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly materie: IMateria[]\r\n    readonly showModal: boolean\r\n    readonly nomeMateria: string\r\n    readonly showEditModal: boolean\r\n    readonly materiaEdit: IMateria\r\n    readonly nomeEdit: string\r\n}\r\n\r\nexport default class MaterieList extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            materie: null,\r\n            showModal: false,\r\n            nomeMateria: \"\",\r\n            showEditModal: false,\r\n            materiaEdit: null,\r\n            nomeEdit: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Axios.get(siteUrl+\"/api/materie/getmateriebycorso/\" + this.props.corso).then((response) => {\r\n            this.setState({\r\n                materie: response.data as IMateria[]\r\n            })\r\n        })\r\n    }\r\n\r\n    showHideModal = () => {\r\n        this.setState({\r\n            showModal: !this.state.showModal,\r\n            nomeMateria: \"\"\r\n        })\r\n    }\r\n\r\n    hideEditModal = () => {\r\n        this.setState({\r\n            showEditModal: false,\r\n            nomeEdit: \"\",\r\n            materiaEdit: null\r\n        })\r\n    }\r\n\r\n    showEditModal = (materia: IMateria) => {\r\n        this.setState({\r\n            showEditModal: true,\r\n            nomeEdit: materia.nome,\r\n            materiaEdit: materia\r\n        })\r\n    }\r\n\r\n    aggiungiMateria = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { nomeMateria } = this.state\r\n\r\n        if(nomeMateria.trim() === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n           return\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/materie/\" + this.props.corso, \"post\", {\r\n            materia: {\r\n                nome: nomeMateria.trim()\r\n            }\r\n        }, (response: any) => {\r\n            let materie = response.data as IMateria[]\r\n\r\n            this.setState({\r\n                materie: materie\r\n            })\r\n\r\n            message.success(\"Materia aggiunta con successo!\")\r\n        }, () => {\r\n            this.setState({\r\n                materie: null,\r\n                showModal: false\r\n            })\r\n        })\r\n    }\r\n\r\n    modificaMateria = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { nomeEdit, materiaEdit } = this.state\r\n\r\n        if(nomeEdit === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n           return\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/materie/\" + materiaEdit.idMateria, \"put\", {\r\n            materia: {\r\n                idMateria: materiaEdit.idMateria,\r\n                nome: nomeEdit.trim()\r\n            }\r\n        }, (response: any) => {\r\n            let materie = response.data as IMateria[]\r\n\r\n            this.setState({\r\n                materie: materie,\r\n                materiaEdit: null,\r\n                nomeEdit: \"\",\r\n            })\r\n\r\n            message.success(\"Materia modificata con successo!\")\r\n        }, () => {\r\n            this.setState({\r\n                materie: null,\r\n                showEditModal: false\r\n            })\r\n        })\r\n    }\r\n\r\n    changeNome = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nomeMateria: nome\r\n        })\r\n    }\r\n\r\n    changeNomeEdit = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nomeEdit: nome\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { materie, nomeMateria, showModal, showEditModal, materiaEdit, nomeEdit } = this.state\r\n        \r\n        if(!materie){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-3 text-center\">Lista delle materie</h3>\r\n\r\n            <button className=\"btn btn-success float-right mb-3\" type=\"button\" onClick={this.showHideModal}>\r\n                <i className=\"fal fa-plus fa-fw\"></i> Aggiungi materia\r\n            </button>\r\n\r\n            <div className=\"clearfix\"></div>\r\n\r\n            <div className=\"row mx-0\">\r\n                {\r\n                    materie.map(m => {    \r\n                        return <div className=\"col-12 col-md-3 col-lg-4 p-0 p-md-1 mb-1\">\r\n                            <div className=\"border rounded p-2\">\r\n                                <Tooltip title=\"Modifica\">\r\n                                    <span onClick={() => this.showEditModal(m)} className=\"float-right link-warning ml-2\">\r\n                                        <i className=\"fa fa-pen\"></i>\r\n                                    </span>\r\n                                </Tooltip>\r\n\r\n                                <div className=\"text-truncate\">{m.nome}</div>\r\n                            </div>\r\n                        </div>\r\n                    })\r\n                }\r\n            </div>\r\n\r\n            <Modal title=\"Aggiungi una materia\" visible={showModal} footer={[\r\n                <Button type=\"primary\" onClick={this.aggiungiMateria}>Aggiungi</Button>,\r\n                <Button type=\"default\" onClick={this.showHideModal}>Annulla</Button>\r\n            ]} onCancel={this.showHideModal}>\r\n                <form onSubmit={this.aggiungiMateria}>\r\n                    <div className=\"form-group mb-0\">\r\n                        <label className=\"text-secondary\">Nome della materia</label>\r\n                        <input type=\"text\" value={nomeMateria} onChange={this.changeNome} className=\"form-control\" />\r\n                    </div>\r\n\r\n                    <input type=\"submit\" className=\"d-none\" />\r\n                </form>\r\n            </Modal>\r\n\r\n            {\r\n                materiaEdit && <Modal title=\"Modifica di una materia\" visible={showEditModal} footer={[\r\n                    <Button type=\"primary\" onClick={this.modificaMateria}>Modifica</Button>,\r\n                    <Button type=\"default\" onClick={this.hideEditModal}>Annulla</Button>\r\n                ]} onCancel={this.hideEditModal}>\r\n                    <form onSubmit={this.modificaMateria}>\r\n                        <div className=\"form-group mb-0\">\r\n                            <label className=\"text-secondary\">Nome della materia</label>\r\n                            <input type=\"text\" value={nomeEdit} onChange={this.changeNomeEdit} className=\"form-control\" />\r\n                        </div>\r\n\r\n                        <input type=\"submit\" className=\"d-none\" />\r\n                    </form>\r\n                </Modal>\r\n            }\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Tooltip } from \"antd\"\r\n\r\nexport interface IProps{\r\n    readonly src: string\r\n    readonly width?: number | string\r\n    readonly height?: number | string\r\n    readonly scalable?: boolean\r\n    readonly style?: React.CSSProperties\r\n}\r\nexport interface IState{\r\n    readonly scaled: boolean\r\n    readonly coords: number[]\r\n}\r\n\r\nexport default class ImageScale extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            scaled: false,\r\n            coords: [0, 0]\r\n        }\r\n    }\r\n\r\n    scaleImage = () => {\r\n        if(!this.props.scalable) return\r\n\r\n        this.setState({\r\n            scaled: !this.state.scaled\r\n        })\r\n        \r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { src, width, height, scalable, style } = this.props\r\n        const { scaled } = this.state\r\n        let firstclass = scalable ? \"scalable \" : \"\",\r\n        classname = scaled ? \"scaled\" : \"\",\r\n        title = scalable ? \"Cliccare per \" + (scaled ? \"rimpicciolire\" : \"ingrandire\") : null\r\n\r\n        return <Tooltip title={title}>\r\n            <img alt=\"scale\" style={style} className={\"imagescale \"+firstclass+classname} src={src} width={width} height={height} onClick={this.scaleImage} />\r\n        </Tooltip>\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, message, Icon, Spin, Collapse } from \"antd\"\r\nimport Axios from \"axios\"\r\nimport { siteUrl, formatItalian } from \"../../utilities\"\r\nimport { ICalendar } from \"../../models/ICalendar\"\r\nimport Calendario from \"../Calendario\"\r\nimport { askPassword } from \"../AskConferma\"\r\nimport { ICalendarEvent } from \"../../models/ICalendarEvent\"\r\n\r\nexport interface IProps{\r\n    readonly anno: number\r\n    readonly corso: number\r\n}\r\nexport interface IState{\r\n    readonly calendarId: string\r\n    readonly calendar: ICalendar\r\n    readonly actualId: string\r\n}\r\n\r\nexport default class ConfigForm extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            calendarId: null,\r\n            calendar: null,\r\n            actualId: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        const { corso, anno } = this.props\r\n\r\n        Axios.get(siteUrl+\"/api/calendari/\"+corso+\"/\"+anno).then(response => {\r\n            let calendar = response.data as ICalendar\r\n\r\n            this.setState({\r\n                calendarId: calendar.idGoogleCalendar,\r\n                actualId: calendar.idGoogleCalendar,\r\n                calendar: calendar\r\n            })\r\n        })\r\n    }\r\n\r\n    changeID = (e: any) => {\r\n        let calendarId = e.target.value\r\n\r\n        this.setState({\r\n            calendarId: calendarId\r\n        })\r\n    }\r\n\r\n    saveConfig = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { corso, anno } = this.props\r\n        const { calendarId, calendar } = this.state\r\n\r\n        if(calendarId === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n        \r\n        askPassword(siteUrl+\"/api/calendari\", \"post\", {\r\n            calendario: {\r\n                idCalendario: calendar ? calendar.idCalendario : \"0\",\r\n                idCorso: corso,\r\n                anno: anno,\r\n                idGoogleCalendar: calendarId\r\n            }\r\n        }, (response: any) => {\r\n            let eventiScartati = response.data as ICalendarEvent[],\r\n            { Panel } = Collapse\r\n\r\n            if(eventiScartati.length){\r\n                Modal.warning({\r\n                    title: \"Attenzione!\",\r\n                    content: <div style={{ marginLeft: -38 }}>\r\n                        <p className=\"text-muted\">I seguenti eventi sono stati scartati durante l'inserimento. Assicurati che siano scritti nel giusto modo (<strong>LUOGO: DOCENTE - MATERIA</strong>).</p>\r\n\r\n                        <Collapse bordered={false}>\r\n                            <Panel header=\"Espandi per visualizzare gli eventi\" key={1}>\r\n                                { \r\n                                    eventiScartati.map(e => {\r\n                                        return <span className=\"d-block\">\r\n                                            <strong>{formatItalian(e.date)} ({e.inizio} - {e.fine})</strong>: {e.summary}\r\n                                        </span>\r\n                                    })\r\n                                }\r\n                            </Panel>\r\n                        </Collapse>\r\n                    </div>\r\n                })\r\n            }\r\n            \r\n            this.setState({\r\n                actualId: calendarId\r\n            })\r\n\r\n            message.success(\"Configurazione calendario salvata!\")\r\n        }, () => {\r\n            this.setState({\r\n                actualId: null\r\n            })\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { calendarId, actualId } = this.state\r\n\r\n        if(calendarId === null){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"text-center\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <form onSubmit={this.saveConfig}>\r\n            <div className=\"form-group row mx-1\">\r\n                <div className=\"col px-0\">\r\n                    <label className=\"text-secondary\">ID Calendario</label>\r\n                    <input name=\"calendarID\" type=\"text\" className=\"form-control\" value={calendarId} onChange={this.changeID} />\r\n                </div>\r\n            </div>\r\n\r\n            <button type=\"submit\" className=\"btn btn-success float-right mr-1 mb-3\">\r\n                {\r\n                    actualId === null && <Icon type=\"loading\" className=\"mr-2 loadable-btn\" spin />\r\n                }\r\n                Salva configurazione\r\n            </button>\r\n\r\n            <div className=\"clearfix\"></div>\r\n\r\n            <div className=\"p-1\">\r\n                <h4>Anteprima visualizzazione</h4>\r\n                <Calendario calendarId={actualId} />\r\n            </div> \r\n        </form>\r\n    }\r\n}","import React from \"react\"\r\nimport { Icon, Modal, Tooltip, Tabs } from \"antd\"\r\nimport ImageScale from \"../ImageScale\"\r\nimport ConfigForm from \"./ConfigForm\"\r\n\r\nexport interface IProps{\r\n    readonly corso: number\r\n}\r\nexport interface IState{}\r\n\r\nexport default class ConfigCalendar extends React.PureComponent<IProps, IState>{\r\n    showHelp = () => {\r\n        Modal.info({\r\n            width: 700,\r\n            style: { top: 24 },\r\n            centered: false,\r\n            maskClosable: true,\r\n            icon: <Icon type=\"question-circle\" style={{ marginTop: 6, fontSize: 28, color: \"orange\" }} />,\r\n            okText: \"Ho capito\",\r\n            content: <div className=\"text-justify\">\r\n                <strong>Dove mi trovo?</strong>\r\n                <p>In questa pagina potrai configurare il calendario dal quale verranno caricate le lezioni del corso.</p>\r\n                <strong>Come si configura il calendario?</strong>\r\n                <p>Per configurare il calendario avrai bisogno di un codice univoco, che ti permetterà di collegare il calendario al sito.</p>\r\n                <strong>ID del calendario</strong>\r\n                <p>Per trovare l'ID (identificativo) del calendario, basterà effettuare l'accesso su <a href=\"https://calendar.google.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Google Calendar <i className=\"far fa-external-link\"></i></a> con un account che abbia integrato il calendario del corso. Bisognerà poi premere sul simbolo <i className=\"far fa-cog\"></i> in alto a destra e successivamente su <strong>Impostazioni</strong> nel menu che comparirà. Scorrere quindi la lista a sinistra della pagina, e cliccare sul calendario che si desidera integrare. Recarsi sotto la voce <strong>Integra calendario</strong> e copiare (subito in basso) il codice identificativo del calendario (<strong>ID calendario</strong>), per poi incollarlo in questa pagina di configurazione.</p>\r\n                <p><u>Assicurati che il calndario sia <strong>pubblico</strong>, altrimenti non sarà possibile visualizzarlo.</u></p>\r\n                <strong className=\"d-block mb-2\">Galleria immagini</strong>\r\n                <ImageScale src=\"https://i.imgur.com/e3H0hXX.png\" height={100} scalable={true} />\r\n            </div>\r\n        })\r\n\r\n        setTimeout(() => document.getElementsByClassName(\"ant-modal-wrap\")[0].scrollTo(0, 0), 100)\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { TabPane } = Tabs\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-2 text-center\">\r\n                Configurazione calendario\r\n                <Tooltip title=\"Informazioni\">\r\n                    <button type=\"button\" className=\"btn btn-outline-info circle-btn float-right\" onClick={this.showHelp}>\r\n                        <i className=\"fa fa-question\"></i>\r\n                    </button>\r\n                </Tooltip>\r\n                <div className=\"clearfix\"></div>\r\n            </h3>\r\n\r\n            <Tabs>\r\n                <TabPane tab=\"Primo anno\" key=\"1\">\r\n                    <ConfigForm anno={1} corso={this.props.corso} />\r\n                </TabPane>\r\n                <TabPane tab=\"Secondo anno\" key=\"2\">\r\n                    <ConfigForm anno={2} corso={this.props.corso} />\r\n                </TabPane>\r\n            </Tabs>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { routerHistory } from \"..\"\r\n\r\nexport interface IProps{\r\n    readonly goTo: string\r\n}\r\nexport interface IState{}\r\n\r\nexport default class Page404 extends React.PureComponent<IProps, IState>{\r\n    render(): JSX.Element{\r\n        return <div id=\"mainBlock\" className=\"col\">\r\n            <div className=\"text-center text-grey w-100\">\r\n                <i className=\"fal fa-exclamation-triangle mb-2\" style={{ fontSize: 150}}></i>\r\n                <h1 className=\"mb-2 text-grey font-weight-normal\">Errore 404</h1>\r\n                <p style={{ fontSize: 20 }}>La pagina che stati cercando non esiste.</p>\r\n                <button onClick={() => routerHistory.push(this.props.goTo)} type=\"button\" className=\"btn btn-blue btn-lg text-uppercase\">\r\n                    <i className=\"fa fa-shield-check fa-lg fa-fw mr-2\"></i>\r\n                    Torna al sicuro\r\n                </button>\r\n            </div>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal } from \"antd\"\r\nimport { siteUrl } from \"../../utilities\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{}\r\n\r\nexport default class EditCodiceFirma extends React.PureComponent<IProps, IState>{\r\n    requestCodeChange = (anno: number) => {\r\n        askPassword(siteUrl+\"/api/corsi/generacodiceanno\", \"post\", {\r\n            anno: anno\r\n        }, (response: any) => {\r\n            let codice = response.data\r\n\r\n            Modal.info({\r\n                title: \"Codice generato\",\r\n                content: <span>\r\n                    Il nuovo codice è: <strong>{codice}</strong>\r\n                </span>\r\n            })\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-4 text-center\">Gestione firma da casa</h3>\r\n\r\n            <div className=\"py-4 px-3 text-justify border rounded shadow-sm mb-4\">\r\n                <div className=\"row mx-0\">\r\n                    <div className=\"col-1 text-left\">\r\n                        <i className=\"fal fa-question-circle fa-3x text-warning\"></i>\r\n                    </div>\r\n\r\n                    <div className=\"col\">\r\n                        <p>Nel caso in cui ce ne fosse bisogno, è possibile dare agli studenti la possibilità di firmare le loro presenze da casa.</p>\r\n                        <p>Tramite <a href={siteUrl+\"/#/firmacasa\"} target=\"_blank\" rel=\"noopener noreferrer\">questo url</a> (da condividere con gli studenti) è possibile eseguire tale operazione, ma per farlo è necessario generare, tramite la pagina corrente, un codice univoco che permetta l'accesso alla schermata. Basterà quindi digitarlo nell'apposito campo di testo e si accederà alla lista degli studenti presenti nella classe.</p>\r\n                        <p>Lo studente sarà poi libero di scegliere il proprio nome nella lista, e confermando la propria identità tramite password avrà la possibilità di firmare.</p>\r\n                        <p className=\"mb-0\">Il codice sarà differente in base all'anno di appartenenza.</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <strong className=\"mr-2\">Genera codice:</strong>\r\n            <button className=\"btn btn-blue mr-2\" onClick={() => this.requestCodeChange(1)}>Primo anno</button>\r\n            <button className=\"btn btn-danger\" onClick={() => this.requestCodeChange(2)}>Secondo anno</button>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { NavLink, Route, Router, Switch } from \"react-router-dom\"\r\nimport { routerHistory } from \"../..\"\r\nimport LoginTutor from \"./LoginTutor\"\r\nimport StudentsList from \"./StudentsList\"\r\nimport AddNewStudent from \"./AddNewStudent\"\r\nimport StudentDetails from \"./StudentDetails\"\r\nimport DocentiList from \"./DocentiList\"\r\nimport AddNewDocente from \"./AddNewDocente\"\r\nimport DocenteDetails from \"./DocenteDetails\"\r\nimport EditDocente from \"./EditDocente\"\r\nimport EditStudente from \"./EditStudente\"\r\nimport StudentsImport from \"./StudentsImport\"\r\nimport MaterieList from \"./MaterieList\"\r\nimport ConfigCalendar from \"./ConfigCalendar\"\r\nimport { IAdmin } from \"../../models/IAdmin\"\r\nimport LogoCorso from \"../LogoCorso\"\r\nimport Page404 from \"../Page404\"\r\nimport { adminRoute } from \"../../utilities\"\r\nimport EditCodiceFirma from \"./EditCodiceFirma\"\r\n\r\nexport default class Dashboard extends React.Component{\r\n\r\n    componentWillUnmount = () => {\r\n        sessionStorage.removeItem(\"adminSession\")\r\n    }\r\n\r\n    render(): JSX.Element{\r\n\r\n        let session = sessionStorage.getItem(\"adminSession\")\r\n        \r\n        if(!session)\r\n            return <LoginTutor />\r\n\r\n        let admin = JSON.parse(session) as IAdmin\r\n\r\n        return <div className=\"container-fluid\">\r\n            <Router history={routerHistory}>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3 bg-blue p-0 menu\">\r\n                        \r\n                        <LogoCorso idCorso={admin.idCorso} />\r\n\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(adminRoute+\"/studenti\")} to={adminRoute+\"/studenti\"}>\r\n                            <span><i className=\"fal fa-users-class fa-fw mr-1\"></i> Studenti</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(adminRoute+\"/docenti\")} to={adminRoute+\"/docenti\"}>\r\n                            <span><i className=\"fal fa-chalkboard-teacher fa-fw mr-1\"></i> Docenti</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(adminRoute+\"/materie\")} to={adminRoute+\"/materie\"}>\r\n                            <span><i className=\"fal fa-list-alt fa-fw mr-1\"></i> Materie</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(adminRoute+\"/config\")} to={adminRoute+\"/config\"}>\r\n                            <span><i className=\"fal fa-calendar-edit fa-fw mr-1\"></i> Configura calendario</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(adminRoute+\"/codicefirma\")} to={adminRoute+\"/codicefirma\"}>\r\n                            <span><i className=\"fal fa-house-signal fa-fw mr-1\"></i> Firma da casa</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => {\r\n                            sessionStorage.removeItem(\"adminSession\")\r\n                            routerHistory.push(adminRoute)\r\n                        }} exact to={adminRoute+\"/login\"}>\r\n                            <span><i className=\"fal fa-power-off fa-fw mr-1\"></i> Esci</span>\r\n                        </NavLink>\r\n\r\n                        <div className=\"copyright\">\r\n                            {(new Date()).getFullYear()} Copyright FITSTIC\r\n                        </div>\r\n                    </div>\r\n  \r\n                    <Switch>\r\n                        <Route exact path={adminRoute} render={() => {\r\n                            routerHistory.push(adminRoute+\"/studenti\")\r\n\r\n                            return null\r\n                        }} />\r\n\r\n                        <Route exact path={adminRoute+\"/studenti\"} render={() => (\r\n                            <StudentsList corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/studenti/new\"} render={() => (\r\n                            <AddNewStudent corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/studenti/import\"} render={() => (\r\n                            <StudentsImport corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/studenti/:id\"} render={(routeProps) => (\r\n                            <StudentDetails {...routeProps} corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/studenti/edit/:id\"} render={(routeProps) => (\r\n                            <EditStudente {...routeProps} corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/docenti\"} render={() => (\r\n                            <DocentiList corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/docenti/new\"} render={() => (\r\n                            <AddNewDocente corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/docenti/:id\"} render={(routeProps) => (\r\n                            <DocenteDetails {...routeProps} corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/docenti/edit/:id\"} render={(routeProps) => (\r\n                            <EditDocente {...routeProps} corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/materie\"} render={() => (\r\n                            <MaterieList corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/config\"} render={() => (\r\n                            <ConfigCalendar corso={admin.idCorso} />\r\n                        )} />\r\n\r\n                        <Route exact path={adminRoute+\"/codicefirma\"} render={() => (\r\n                            <EditCodiceFirma />\r\n                        )} />\r\n\r\n                        <Route render={() => <Page404 goTo={adminRoute} />} />\r\n\r\n                    </Switch>\r\n                        \r\n                </div>\r\n            </Router>\r\n        </div>\r\n    }\r\n}\r\n","import React from \"react\"\r\nimport { Spin, Icon } from \"antd\"\r\nimport QRCode from \"qrcode.react\"\r\nimport Axios from \"axios\"\r\n\r\nexport interface IProps{\r\n    studentId: number\r\n}\r\nexport interface IState{\r\n    readonly code: string\r\n}\r\n\r\nexport default class QRCodeScreen extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            code: null\r\n        }\r\n\r\n        this.reloadCode()\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        setInterval(() => {\r\n            this.setState({\r\n                code: null\r\n            })\r\n\r\n            this.reloadCode()\r\n        }, 20000)\r\n    }\r\n\r\n    reloadCode = () => {\r\n        Axios.get(\"http://mygraphic.altervista.org/reg/api?codice&studente=\"+this.props.studentId).then((response) => {\r\n            this.setState({\r\n                code: response.data\r\n            })\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { code } = this.state\r\n\r\n        if(!code){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div>\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"text-center\">\r\n            <h5 className=\"mb-4 font-weight-normal text-black underline\">Scannerizza questo codice</h5>\r\n            <QRCode value={code} size={200} />\r\n        </div>\r\n    }\r\n}\r\n","import React from \"react\"\r\nimport { Icon, Spin } from \"antd\"\r\nimport { ICalendar } from \"../../models/ICalendar\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\nimport Calendario from \"../Calendario\"\r\n\r\nexport interface IProps{\r\n    readonly student: IStudent\r\n}\r\nexport interface IState{\r\n    readonly calendar: ICalendar\r\n}\r\n\r\nexport default class UserCalendar extends React.PureComponent<IProps, IState> {\r\n    constructor(props: IProps){\r\n        super(props)\r\n        \r\n        this.state = {\r\n            calendar: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        /*************************************/\r\n        /* CARICAMENTO CALENDARIO IN BASE A  */\r\n        /* this.props.student.idCorso        */\r\n        /* this.props.student.annoFrequentazione */\r\n        /*************************************/\r\n    }\r\n    \r\n    render(): JSX.Element{\r\n        const { calendar } = this.state\r\n    \r\n        if(!calendar){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n        \r\n        return <div className=\"p-3\">\r\n            <h5 className=\"text-center text-black w-100\">Calendario del mese</h5>\r\n            <Calendario calendarId=\"ckhj7iqj3msae4i4ietm5ip1cg@group.calendar.google.com\" />\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { NavLink, Route, Router, Switch } from \"react-router-dom\"\r\nimport { routerHistory } from \"../..\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\nimport QRCodeScreen from \"./QRCodeScreen\"\r\nimport UserCalendar from \"./UserCalendar\"\r\n\r\nexport default class UserApplication extends React.Component{\r\n\r\n    componentDidMount = () => {\r\n        localStorage.setItem(\"student\", JSON.stringify({\r\n            idStudente: 1,\r\n            idCorso: 1,\r\n            nome: \"Leonardo\",\r\n            cognome: \"Grandolfo\",\r\n            annoFrequentazione: 1,\r\n            cf: \"GRNLRD99D17L219L\",\r\n            dataNascita: \"17-04-1999\",\r\n            code: \"CIAO-GGG\"\r\n        }))\r\n    }\r\n    \r\n    render(): JSX.Element{\r\n        let session = localStorage.getItem(\"student\")\r\n        \r\n        // if(!session)\r\n        //     return <AppLogin />\r\n\r\n        let student = JSON.parse(session) as IStudent\r\n\r\n        return <div className=\"container-fluid px-0\">\r\n            <Router history={routerHistory}>\r\n                    <div className=\"main-screen overflow-auto\" id=\"mainBlock\">\r\n                        <Switch>\r\n                            <Route exact path=\"/userprofile\" render={() => {\r\n                                routerHistory.push(\"/userprofile/qrcode\")\r\n\r\n                                return null\r\n                            }} />\r\n\r\n                            <Route exact path=\"/userprofile/qrcode\" render={() => (\r\n                                <QRCodeScreen studentId={student.idStudente} />\r\n                            )} />\r\n\r\n                            <Route exact path=\"/userprofile/calendar\" render={() => (\r\n                                <UserCalendar student={student} />\r\n                            )} />\r\n\r\n                        </Switch>\r\n                    </div>\r\n\r\n                    <div className=\"bottom-menu\">\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(\"/userprofile/presenze\")} to=\"/userprofile/presenze\">\r\n                            <span>\r\n                                <i className=\"far fa-exclamation-circle fa-fw fa-2x mb-2\"></i>\r\n                                Presenze\r\n                            </span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(\"/userprofile/voti\")} to=\"/userprofile/voti\">\r\n                            <span>\r\n                                <i className=\"fa fa-stars fa-fw fa-2x mb-2\"></i>\r\n                                Voti\r\n                            </span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(\"/userprofile/qrcode\")} to=\"/userprofile/qrcode\">\r\n                            <span>\r\n                                <i className=\"fal fa-qrcode fa-fw fa-2x mb-2\"></i>\r\n                                Codice QR\r\n                            </span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(\"/userprofile/calendar\")} to=\"/userprofile/calendar\">\r\n                            <span>\r\n                                <i className=\"fal fa-calendar fa-fw fa-2x mb-2\"></i>\r\n                                Lezioni\r\n                            </span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(\"/userprofile/account\")} to=\"/userprofile/account\">\r\n                            <span>\r\n                                <i className=\"far fa-user fa-fw fa-2x mb-2\"></i>\r\n                                Profilo\r\n                            </span>\r\n                        </NavLink>\r\n                    </div>\r\n            </Router>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { ICorso } from \"../../models/ICorso\"\r\nimport Axios from \"axios\"\r\nimport { siteUrl, superAdminRoute } from \"../../utilities\"\r\nimport { Icon, Spin, Tooltip } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly corsi: ICorso[]\r\n}\r\n\r\nexport default class CorsiList extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            corsi: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Axios.get(siteUrl+\"/api/corsi\").then(response => {\r\n            let corsi = response.data as ICorso[]\r\n\r\n            this.setState({\r\n                corsi: corsi\r\n            })\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { corsi } = this.state\r\n        \r\n        if(!corsi){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-3 text-center\">Lista dei corsi</h3>\r\n\r\n            <button className=\"btn btn-success float-right mb-3\" type=\"button\" onClick={() => routerHistory.push(superAdminRoute+\"/corsi/new\")}>\r\n                <i className=\"fal fa-plus fa-fw\"></i> Aggiungi corso\r\n            </button>\r\n\r\n            <table className=\"table table-bordered text-center\">\r\n                \r\n                    <tbody>\r\n                        <tr>\r\n                            <th style={{width: \"15%\"}}>Logo</th>\r\n                            <th>Nome</th>\r\n                            <th>Luogo</th>\r\n                            <th style={{width: \"10%\"}}>Azioni</th>\r\n                        </tr>\r\n\r\n                        {\r\n                            corsi.map(c => {        \r\n                                return <tr>\r\n                                    <td><img width=\"55\" src={c.logo} alt=\"logo\" /></td>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{c.nome}</td>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{c.luogo}</td>\r\n                                    <td>\r\n                                        <Tooltip title=\"Modifica\">\r\n                                            <button type=\"button\" className=\"btn btn-warning text-white circle-btn\" onClick={() => routerHistory.push(superAdminRoute+\"/corsi/edit/\" + c.idCorso)}>\r\n                                                <i className=\"fa fa-pen\"></i>\r\n                                            </button>\r\n                                        </Tooltip>\r\n                                    </td>\r\n                                </tr>\r\n                            })\r\n                        }\r\n                    </tbody>\r\n            </table>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, Upload, Icon, message } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { imageFileToBase64, superAdminRoute, siteUrl } from \"../../utilities\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly nome: string\r\n    readonly luogo: string\r\n    readonly logo: string\r\n}\r\n\r\nexport default class AddNewCorso extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            nome: \"\",\r\n            luogo: \"\",\r\n            logo: null\r\n        }\r\n    }\r\n\r\n    changeNome = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nome: nome\r\n        })\r\n    }\r\n\r\n    changeLuogo = (event: any) => {\r\n        let luogo = event.target.value\r\n\r\n        this.setState({\r\n            luogo: luogo\r\n        })\r\n    }\r\n\r\n    aggiungiCorso = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { nome, luogo, logo } = this.state\r\n\r\n        if(nome.trim() === \"\" || luogo.trim() === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/corsi\", \"post\", {\r\n            corso: {\r\n                nome: nome.trim(),\r\n                luogo: luogo.trim(),\r\n                logo: logo ? logo.trim() : \"\"\r\n            }\r\n        }, (_: any) => {\r\n            message.success(\"Corso creato con successo!\")\r\n            routerHistory.push(superAdminRoute+\"/corsi\")\r\n        })\r\n    }\r\n\r\n    convertImage = (file: any) => {\r\n        imageFileToBase64(file).then(result => {\r\n            this.setState({\r\n                logo: String(result)\r\n            })\r\n        })\r\n\r\n        return false\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { nome, luogo, logo } = this.state,\r\n        uploadButton = (\r\n            <div>\r\n                <Icon type=\"plus\" style={{ fontSize: 30, marginBottom: 5 }} />\r\n                <div className=\"ant-upload-text\">Carica immagine</div>\r\n            </div>\r\n        )\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-2 text-center\">Aggiungi un nuovo corso</h3>\r\n\r\n            <form className=\"row\" onSubmit={this.aggiungiCorso}>\r\n\r\n                <div className=\"form-group mr-3\">\r\n                    <label className=\"text-secondary d-block\">Logo</label>\r\n                    <Upload listType=\"picture-card\" showUploadList={false} beforeUpload={(file) => this.convertImage(file)} className=\"logo-upload\" accept=\"image/*\">\r\n                        {logo ? <img src={logo} alt=\"logo\" style={{ width: \"100%\" }} /> : uploadButton}\r\n                    </Upload>\r\n                </div>\r\n                \r\n                <div className=\"col pr-0\">\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-secondary\">Nome</label>\r\n                        <input name=\"nomecorso\" type=\"text\" className=\"form-control\" value={nome} onChange={this.changeNome} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-secondary\">Luogo</label>\r\n                        <input name=\"luogo\" type=\"text\" className=\"form-control\" value={luogo} onChange={this.changeLuogo} />\r\n                    </div>\r\n                </div>\r\n                <button type=\"submit\" className=\"btn btn-success text-uppercase w-100\">Aggiungi corso</button>\r\n            </form>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { routerHistory } from \"../..\"\r\nimport { message, Modal } from \"antd\"\r\nimport { mountLogin, unmountLogin, siteUrl, logoUrl, superAdminRoute } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { Cipher } from \"../../models/Cipher\"\r\nimport { isSuperAdmin } from \"../../models/IAdmin\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly adminName: string\r\n    readonly adminPsw: string\r\n}\r\n\r\nexport default class LoginAdmin extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            adminName: \"\",\r\n            adminPsw: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        mountLogin()\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        unmountLogin()\r\n    }\r\n\r\n    changeInputName = (event: any) => {\r\n        let name = event.target.value\r\n\r\n        this.setState({\r\n            adminName: name\r\n        })\r\n    }\r\n\r\n    changeInputPassword = (event: any) => {\r\n        let psw = event.target.value\r\n\r\n        this.setState({\r\n            adminPsw: psw\r\n        })\r\n    }\r\n\r\n    tryLogin = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { adminName, adminPsw } = this.state\r\n        let cipher = new Cipher(),\r\n        password = cipher.encode(adminPsw)\r\n\r\n        Axios.post(siteUrl+\"/api/amministratori/loginamministratori\", {\r\n            username: adminName.trim(),\r\n            password: password\r\n        }).then(response => {\r\n            let data = response.data\r\n\r\n            if(isSuperAdmin(data)){\r\n                sessionStorage.setItem(\"superSession\", JSON.stringify(data))\r\n                routerHistory.push(superAdminRoute)\r\n                message.success(\"Login effettuato con successo!\")\r\n            }\r\n            else{\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: \"Username o Password errati!\",\r\n                    centered: true,\r\n                    maskClosable: true\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { adminName, adminPsw } = this.state\r\n\r\n        return <div className=\"col-11 col-lg-5 mx-auto\" id=\"loginBlock\">\r\n            <form className=\"w-100 bg-white p-3 rounded shadow\" onSubmit={this.tryLogin}>\r\n                <h3 className=\"d-inline-block\">Accesso amministratori</h3>\r\n                <img src={logoUrl} height=\"40\" className=\"float-right logo\" alt=\"logo\" />\r\n\r\n                <div className=\"form-group\">\r\n                    <label className=\"text-secondary\">Utente di accesso</label>\r\n                    <input name=\"username\" type=\"text\" className=\"form-control\" value={adminName} onChange={this.changeInputName} />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label className=\"text-secondary\">Password di accesso</label>\r\n                    <input name=\"password\" type=\"password\" className=\"form-control\" value={adminPsw} onChange={this.changeInputPassword} />\r\n                </div>\r\n\r\n                <input type=\"submit\" value=\"Accedi\" className=\"btn btn-lg btn-success w-100 text-uppercase\"/>\r\n            </form>\r\n        </div>\r\n    }\r\n\r\n}","import React from \"react\"\r\nimport { Modal, Icon, Spin, Upload, message } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { siteUrl, imageFileToBase64, superAdminRoute } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { RouteComponentProps } from \"react-router-dom\"\r\nimport { ICorso } from \"../../models/ICorso\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IRouteParams{\r\n    readonly id: string\r\n}\r\nexport interface IProps extends RouteComponentProps<IRouteParams>{}\r\nexport interface IState{\r\n    readonly corso: ICorso\r\n    readonly nome: string\r\n    readonly luogo: string\r\n    readonly logo: string\r\n}\r\n\r\nexport default class EditCorso extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            corso: null,\r\n            nome: \"\",\r\n            luogo: \"\",\r\n            logo: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let id = Number(this.props.match.params.id)\r\n\r\n        if(isNaN(id))\r\n            routerHistory.push(superAdminRoute)\r\n\r\n        Axios.get(siteUrl+\"/api/corsi/\" + id).then((response) => {\r\n            let corso = response.data as ICorso\r\n\r\n            this.setState({\r\n                corso: corso,\r\n                nome: corso.nome,\r\n                luogo: corso.luogo,\r\n                logo: corso.logo\r\n            })\r\n        })\r\n    }\r\n\r\n    changeNome = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nome: nome\r\n        })\r\n    }\r\n\r\n    changeLuogo = (event: any) => {\r\n        let luogo = event.target.value\r\n\r\n        this.setState({\r\n            luogo: luogo\r\n        })\r\n    }\r\n\r\n    modificaCorso = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { nome, luogo, corso, logo } = this.state\r\n\r\n        if(nome.trim() === \"\" || luogo.trim() === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/corsi/\" + corso.idCorso, \"put\", {\r\n            corso: {\r\n                idCorso: corso.idCorso,\r\n                nome: nome.trim(),\r\n                luogo: luogo.trim(),\r\n                logo: logo ? logo.trim() : \"\"\r\n            }\r\n        }, (_: any) => {\r\n            message.success(\"Corso modificato con successo!\")\r\n            routerHistory.push(superAdminRoute+\"/corsi\")\r\n        })\r\n    }\r\n\r\n    convertImage = (file: any) => {\r\n        imageFileToBase64(file).then(result => {\r\n            this.setState({\r\n                logo: String(result)\r\n            })\r\n        })\r\n\r\n        return false\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { nome, luogo, corso, logo } = this.state,\r\n        uploadButton = (\r\n            <div>\r\n                <Icon type=\"plus\" style={{ fontSize: 30, marginBottom: 5 }} />\r\n                <div className=\"ant-upload-text\">Carica immagine</div>\r\n            </div>\r\n        )\r\n\r\n        if(!corso){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-2 text-center\">Modifica di un corso</h3>\r\n\r\n            <form className=\"row\" onSubmit={this.modificaCorso}>\r\n                <div className=\"form-group mr-3\">\r\n                    <label className=\"text-secondary d-block\">Logo</label>\r\n                    <Upload listType=\"picture-card\" showUploadList={false} beforeUpload={(file) => this.convertImage(file)} className=\"logo-upload\" accept=\"image/*\">\r\n                        {logo ? <img src={logo} alt=\"logo\" style={{ width: \"100%\" }} /> : uploadButton}\r\n                    </Upload>\r\n                </div>\r\n\r\n                <div className=\"col pr-0\">\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-secondary\">Nome</label>\r\n                        <input name=\"nomecorso\" type=\"text\" className=\"form-control\" value={nome} onChange={this.changeNome} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-secondary\">Luogo</label>\r\n                        <input name=\"luogo\" type=\"text\" className=\"form-control\" value={luogo} onChange={this.changeLuogo} />\r\n                    </div>\r\n                </div>\r\n\r\n                <button type=\"submit\" className=\"btn btn-success text-uppercase w-100\">Modifica corso</button>\r\n            </form>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport Axios from \"axios\"\r\nimport { siteUrl, superAdminRoute } from \"../../utilities\"\r\nimport { Icon, Spin, Tooltip } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { ITutor } from \"../../models/ITutor\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly tutor: ITutor[]\r\n}\r\n\r\nexport default class TutorList extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            tutor: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Axios.get(siteUrl+\"/api/coordinatori\").then(response => {\r\n            let tutor = response.data as ITutor[]\r\n\r\n            this.setState({\r\n                tutor: tutor\r\n            })\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { tutor } = this.state\r\n        \r\n        if(!tutor){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-3 text-center\">Lista dei coordinatori</h3>\r\n\r\n            <button className=\"btn btn-success float-right mb-3\" type=\"button\" onClick={() => routerHistory.push(superAdminRoute+\"/tutor/new\")}>\r\n                <i className=\"fal fa-plus fa-fw\"></i> Aggiungi coordinatore\r\n            </button>\r\n\r\n            <table className=\"table table-bordered text-center\">\r\n                \r\n                    <tbody>\r\n                        <tr>\r\n                            <th>Nome</th>\r\n                            <th>Cognome</th>\r\n                            <th style={{width: \"30%\"}}>Corso</th>\r\n                            <th style={{width: \"10%\"}}>Azioni</th>\r\n                        </tr>\r\n\r\n                        {\r\n                            tutor.map(t => {        \r\n                                return <tr>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{t.nome}</td>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{t.cognome}</td>\r\n                                    <td style={{maxWidth: 0}} className=\"text-truncate\">{t.corso}</td>\r\n                                    <td>\r\n                                        <Tooltip title=\"Modifica\">\r\n                                            <button type=\"button\" className=\"btn btn-warning text-white circle-btn\" onClick={() => routerHistory.push(superAdminRoute+\"/tutor/edit/\" + t.idCoordinatore)}>\r\n                                                <i className=\"fa fa-pen\"></i>\r\n                                            </button>\r\n                                        </Tooltip>\r\n                                    </td>\r\n                                </tr>\r\n                            })\r\n                        }\r\n                    </tbody>\r\n            </table>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, Icon, message, Spin } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { siteUrl, superAdminRoute } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { ICorso } from \"../../models/ICorso\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly nome: string\r\n    readonly cognome: string\r\n    readonly email: string\r\n    readonly listaCorsi: ICorso[]\r\n    readonly corso: number\r\n}\r\n\r\nexport default class AddNewTutor extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            nome: \"\",\r\n            cognome: \"\",\r\n            email: \"\",\r\n            listaCorsi: null,\r\n            corso: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Axios.get(siteUrl+\"/api/corsi\").then(response => {\r\n            let corsi = response.data as ICorso[]\r\n\r\n            this.setState({\r\n                listaCorsi: corsi,\r\n                corso: corsi.length ? corsi[0].idCorso : 0\r\n            })\r\n        })\r\n    }\r\n\r\n    changeNome = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nome: nome\r\n        })\r\n    }\r\n\r\n    changeCognome = (event: any) => {\r\n        let cognome = event.target.value\r\n\r\n        this.setState({\r\n            cognome: cognome\r\n        })\r\n    }\r\n\r\n    changeEmail = (event: any) => {\r\n        let email = event.target.value.trim()\r\n\r\n        this.setState({\r\n            email: email\r\n        })\r\n    }\r\n\r\n    changeCorso = (event: any) => {\r\n        let corso = parseInt(event.target.value)\r\n\r\n        this.setState({\r\n            corso: corso\r\n        })\r\n    }\r\n\r\n    isExistingCorso = (corso: number) => {\r\n        return this.state.listaCorsi.find(c => c.idCorso === corso)\r\n    }\r\n\r\n    aggiungiTutor = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { nome, cognome, email, corso } = this.state\r\n\r\n        if(nome.trim() === \"\" || cognome.trim() === \"\" || email === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(!this.isExistingCorso(corso)){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Corso non valido.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/coordinatori\", \"post\", {\r\n            coordinatore: {\r\n                nome: nome.trim(),\r\n                cognome: cognome.trim(),\r\n                email: email,\r\n                idCorso: corso\r\n            }\r\n        }, (_: any) => {\r\n            message.success(\"Tutor creato con successo!\")\r\n            routerHistory.push(superAdminRoute+\"/tutor\")\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { nome, cognome, email, listaCorsi } = this.state\r\n\r\n        if(!listaCorsi){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        if(!listaCorsi.length){\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                È necessario creare almeno un corso per poter inserire un nuovo coordinatore.\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-2 text-center\">Aggiungi un nuovo coordinatore</h3>\r\n\r\n            <form onSubmit={this.aggiungiTutor}>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Nome</label>\r\n                        <input name=\"name\" type=\"text\" className=\"form-control\" value={nome} onChange={this.changeNome} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Cognome</label>\r\n                        <input name=\"surname\" type=\"text\" className=\"form-control\" value={cognome} onChange={this.changeCognome} />\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">E-mail</label>\r\n                        <input name=\"email\" type=\"email\" className=\"form-control\" value={email} onChange={this.changeEmail} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Corso gestito</label>\r\n                        <select name=\"anno\" onChange={this.changeCorso} className=\"custom-select\">\r\n                            {\r\n                                listaCorsi.map(c => {\r\n                                    return <option value={c.idCorso}>{c.nome}</option>\r\n                                })\r\n                            }\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <button type=\"submit\" className=\"btn btn-success text-uppercase w-100\">Aggiungi coordinatore</button>\r\n            </form>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, Icon, message, Spin } from \"antd\"\r\nimport { routerHistory } from \"../..\"\r\nimport { siteUrl, superAdminRoute } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { ICorso } from \"../../models/ICorso\"\r\nimport { RouteComponentProps } from \"react-router-dom\"\r\nimport { ITutor } from \"../../models/ITutor\"\r\nimport { askPassword } from \"../AskConferma\"\r\n\r\nexport interface IRouteParams{\r\n    readonly id: string\r\n}\r\nexport interface IProps extends RouteComponentProps<IRouteParams>{}\r\nexport interface IState{\r\n    readonly nome: string\r\n    readonly cognome: string\r\n    readonly email: string\r\n    readonly listaCorsi: ICorso[]\r\n    readonly corso: number\r\n}\r\n\r\nexport default class EditTutor extends React.PureComponent<IProps, IState>{\r\n\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            nome: \"\",\r\n            cognome: \"\",\r\n            email: \"\",\r\n            listaCorsi: null,\r\n            corso: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let id = Number(this.props.match.params.id)\r\n\r\n        if(isNaN(id))\r\n            routerHistory.push(superAdminRoute)\r\n\r\n        Axios.get(siteUrl+\"/api/coordinatori/\"+id).then(response => {\r\n            let tutor = response.data as ITutor\r\n\r\n            this.setState({\r\n                nome: tutor.nome,\r\n                cognome: tutor.cognome,\r\n                email: tutor.email,\r\n                corso: tutor.idCorso\r\n            })\r\n        })\r\n\r\n        Axios.get(siteUrl+\"/api/corsi\").then(response => {\r\n            let corsi = response.data as ICorso[]\r\n\r\n            this.setState({\r\n                listaCorsi: corsi\r\n            })\r\n        })\r\n    }\r\n\r\n    changeNome = (event: any) => {\r\n        let nome = event.target.value\r\n\r\n        this.setState({\r\n            nome: nome\r\n        })\r\n    }\r\n\r\n    changeCognome = (event: any) => {\r\n        let cognome = event.target.value\r\n\r\n        this.setState({\r\n            cognome: cognome\r\n        })\r\n    }\r\n\r\n    changeEmail = (event: any) => {\r\n        let email = event.target.value.trim()\r\n\r\n        this.setState({\r\n            email: email\r\n        })\r\n    }\r\n\r\n    changeCorso = (event: any) => {\r\n        let corso = parseInt(event.target.value)\r\n\r\n        this.setState({\r\n            corso: corso\r\n        })\r\n    }\r\n\r\n    isExistingCorso = (corso: number) => {\r\n        return this.state.listaCorsi.find(c => c.idCorso === corso)\r\n    }\r\n\r\n    modificaTutor = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { nome, cognome, email, corso } = this.state\r\n        const idCoordinatore = this.props.match.params.id\r\n\r\n        if(nome.trim() === \"\" || cognome.trim() === \"\" || email === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire tutti i campi.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        if(!this.isExistingCorso(corso)){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Corso non valido.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        askPassword(siteUrl+\"/api/coordinatori/\" + idCoordinatore, \"put\", {\r\n            coordinatore: {\r\n                idCoordinatore: idCoordinatore,\r\n                nome: nome.trim(),\r\n                cognome: cognome.trim(),\r\n                email: email,\r\n                idCorso: corso\r\n            }\r\n        }, (_: any) => {\r\n            message.success(\"Tutor modificato con successo!\")\r\n            routerHistory.push(superAdminRoute+\"/tutor\")\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { nome, cognome, email, listaCorsi, corso } = this.state\r\n\r\n        if(!listaCorsi){\r\n            const icon = <Icon type=\"loading\" style={{ fontSize: 50 }} spin />\r\n\r\n            return <div className=\"col px-5 py-4 right-block\" id=\"mainBlock\">\r\n                <Spin indicator={icon} />\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col px-5 py-4 right-block\">\r\n            <h3 className=\"mb-2 text-center\">Modifica di un coordinatore</h3>\r\n\r\n            <form onSubmit={this.modificaTutor}>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Nome</label>\r\n                        <input name=\"name\" type=\"text\" className=\"form-control\" value={nome} onChange={this.changeNome} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Cognome</label>\r\n                        <input name=\"surname\" type=\"text\" className=\"form-control\" value={cognome} onChange={this.changeCognome} />\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"form-group row\">\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">E-mail</label>\r\n                        <input name=\"email\" type=\"email\" className=\"form-control\" value={email} onChange={this.changeEmail} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <label className=\"text-secondary\">Corso gestito</label>\r\n                        <select name=\"anno\" onChange={this.changeCorso} className=\"custom-select\">\r\n                            {\r\n                                listaCorsi.map(c => {\r\n                                    let selected = corso === c.idCorso\r\n\r\n                                    return <option value={c.idCorso} selected={selected}>{c.nome}</option>\r\n                                })\r\n                            }\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <button type=\"submit\" className=\"btn btn-success text-uppercase w-100\">Modifica coordinatore</button>\r\n            </form>\r\n        </div>\r\n    }\r\n}","import React from \"react\"\r\nimport { NavLink, Route, Router, Switch } from \"react-router-dom\"\r\nimport { routerHistory } from \"../..\"\r\nimport LogoCorso from \"../LogoCorso\"\r\nimport Page404 from \"../Page404\"\r\nimport { superAdminRoute } from \"../../utilities\"\r\nimport CorsiList from \"./CorsiList\"\r\nimport AddNewCorso from \"./AddNewCorso\"\r\nimport LoginAdmin from \"./LoginAdmin\"\r\nimport EditCorso from \"./EditCorso\"\r\nimport TutorList from \"./TutorList\"\r\nimport AddNewTutor from \"./AddNewTutor\"\r\nimport EditTutor from \"./EditTutor\"\r\n\r\nexport default class SuperDashboard extends React.Component{\r\n\r\n    componentWillUnmount = () => {\r\n        sessionStorage.removeItem(\"superSession\")\r\n    }\r\n\r\n    render(): JSX.Element{\r\n\r\n        let session = sessionStorage.getItem(\"superSession\")\r\n        \r\n        if(!session)\r\n            return <LoginAdmin />\r\n\r\n        return <div className=\"container-fluid\">\r\n            <Router history={routerHistory}>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3 bg-blue p-0 menu\">\r\n                        \r\n                        <LogoCorso idCorso={0} />\r\n\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(superAdminRoute+\"/studenti\")} to={superAdminRoute+\"/tutor\"}>\r\n                            <span><i className=\"fal fa-users-crown fa-fw mr-1\"></i> Coordinatori</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => routerHistory.push(superAdminRoute+\"/corsi\")} to={superAdminRoute+\"/corsi\"}>\r\n                            <span><i className=\"fal fa-list-alt fa-fw mr-1\"></i> Corsi</span>\r\n                        </NavLink>\r\n                        <NavLink className=\"router-link\" activeClassName=\"active\" onClick={() => {\r\n                            sessionStorage.removeItem(\"superSession\")\r\n                            routerHistory.push(superAdminRoute)\r\n                        }} exact to={superAdminRoute+\"/login\"}>\r\n                            <span><i className=\"fal fa-power-off fa-fw mr-1\"></i> Esci</span>\r\n                        </NavLink>\r\n\r\n                        <div className=\"copyright\">\r\n                            {(new Date()).getFullYear()} Copyright FITSTIC\r\n                        </div>\r\n                    </div>\r\n  \r\n                    <Switch>\r\n                        <Route exact path={superAdminRoute} render={() => {\r\n                            routerHistory.push(superAdminRoute+\"/tutor\")\r\n\r\n                            return null\r\n                        }} />\r\n\r\n                        <Route exact path={superAdminRoute+\"/tutor\"} render={() => (\r\n                            <TutorList />\r\n                        )} />\r\n\r\n                        <Route exact path={superAdminRoute+\"/tutor/new\"} render={() => (\r\n                            <AddNewTutor />\r\n                        )} />\r\n\r\n                        <Route exact path={superAdminRoute+\"/tutor/edit/:id\"} render={(routeProps) => (\r\n                            <EditTutor {...routeProps} />\r\n                        )} />\r\n\r\n                        <Route exact path={superAdminRoute+\"/corsi\"} render={() => (\r\n                            <CorsiList />\r\n                        )} />\r\n\r\n                        <Route exact path={superAdminRoute+\"/corsi/new\"} render={() => (\r\n                            <AddNewCorso />\r\n                        )} />\r\n\r\n                        <Route exact path={superAdminRoute+\"/corsi/edit/:id\"} render={(routeProps) => (\r\n                            <EditCorso {...routeProps} />\r\n                        )} />\r\n\r\n                        <Route render={() => <Page404 goTo={superAdminRoute} />} />\r\n\r\n                    </Switch>\r\n                        \r\n                </div>\r\n            </Router>\r\n        </div>\r\n    }\r\n}\r\n","import React from \"react\"\r\nimport { Modal } from \"antd\"\r\nimport { mountLogin, unmountLogin, siteUrl } from \"../../utilities\"\r\nimport Axios from \"axios\"\r\nimport { routerHistory } from \"../..\"\r\nimport { areStudent } from \"../../models/IStudent\"\r\nimport LogoCorso from \"../LogoCorso\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly codice: string\r\n}\r\n\r\nexport default class CodiceSegreto extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            codice: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        mountLogin()\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        unmountLogin()\r\n    }\r\n\r\n    changeCodice = (event: any) => {\r\n        let code = event.target.value\r\n\r\n        this.setState({\r\n            codice: code.trim()\r\n        })\r\n    }\r\n\r\n    inviaCodice = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { codice } = this.state\r\n\r\n        if(codice === \"\"){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Riempire il campo.\"\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        Axios.post(siteUrl+\"/api/firmaremota/accessoremoto\", codice, {\r\n            headers: {\"Content-Type\": \"application/json\"}\r\n        }).then(response => {\r\n            let data = response.data\r\n\r\n            if(areStudent(data)){\r\n                sessionStorage.setItem(\"confermaCasa\", JSON.stringify(data))\r\n                routerHistory.push(\"/firmacasa\")\r\n            }else{\r\n                Modal.error({\r\n                    title: \"Errore!\",\r\n                    content: \"Il codice non corrisponde a nessun corso/classe.\",\r\n                    centered: true,\r\n                    maskClosable: true\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { codice } = this.state\r\n\r\n        return <div className=\"col-11 col-lg-5 mx-auto\" id=\"loginBlock\">\r\n            <form className=\"w-100 bg-white p-3 rounded shadow\" onSubmit={this.inviaCodice}>\r\n                <h3 className=\"d-inline-block\">Accesso firma da casa</h3>\r\n                <LogoCorso forLogin={true} />\r\n\r\n                <div className=\"form-group\">\r\n                    <label className=\"text-secondary\">Codice segreto</label>\r\n                    <input name=\"username\" type=\"text\" className=\"form-control\" value={codice} onChange={this.changeCodice} />\r\n                </div>\r\n\r\n                <p className=\"text-muted\">Chiedi al tuo coordinatore il codice segreto per accedere alla firma da casa.</p>\r\n\r\n                <input type=\"submit\" value=\"Prosegui\" className=\"btn btn-lg btn-success w-100 text-uppercase\"/>\r\n            </form>\r\n        </div>\r\n    }\r\n\r\n}","export interface IStudent{\r\n    readonly idStudente?: number\r\n    readonly email: string\r\n    readonly idCorso: number\r\n    readonly nome: string\r\n    readonly cognome: string\r\n    readonly annoFrequentazione: number\r\n    readonly cf: string\r\n    readonly password?: string\r\n    readonly dataNascita: string\r\n    readonly codice?: string\r\n    readonly ritirato?: boolean\r\n    readonly dataRitiro?: string\r\n    readonly giornate?: number\r\n    readonly frequenza?: number\r\n    readonly promosso?: boolean\r\n}\r\n\r\nexport const isStudent = (obj: any) => {\r\n    try{\r\n        return \"nome\" in obj && \"cognome\" in obj && \"idStudente\" in obj\r\n    }\r\n    catch{\r\n        return false\r\n    }\r\n}\r\n\r\nexport const areStudent = (obj: any) => {\r\n    try{\r\n        obj.forEach((s: any) => {\r\n            if(!isStudent(s))\r\n                return false\r\n        })\r\n\r\n        return true\r\n    }\r\n    catch{\r\n        return false\r\n    }\r\n}","import React from \"react\"\r\nimport { Modal, Radio, Icon, Tooltip } from \"antd\"\r\nimport { mountLogin, unmountLogin, siteUrl } from \"../../utilities\"\r\nimport { IStudent } from \"../../models/IStudent\"\r\nimport LogoCorso from \"../LogoCorso\"\r\nimport { IMessage } from \"../../models/IMessage\"\r\nimport { askPassword } from \"../AskConferma\"\r\nimport Axios from \"axios\"\r\nimport { ILezione } from \"../../models/ILezione\"\r\n\r\nexport interface IProps{}\r\nexport interface IState{\r\n    readonly studenti: IStudent[]\r\n    readonly selectedStudente: IStudent\r\n    readonly lezione: ILezione\r\n}\r\n\r\nexport default class FirmaCasa extends React.PureComponent<IProps, IState>{\r\n    constructor(props: IProps){\r\n        super(props)\r\n\r\n        this.state = {\r\n            studenti: JSON.parse(sessionStorage.getItem(\"confermaCasa\")) as IStudent[],\r\n            selectedStudente: null,\r\n            lezione: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        mountLogin()\r\n        this.caricaLezione()\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        unmountLogin()\r\n    }\r\n\r\n    inviaFirma = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const { selectedStudente } = this.state\r\n\r\n        if(!selectedStudente){\r\n            Modal.error({\r\n                title: \"Errore!\",\r\n                content: \"Selezionare uno studente.\",\r\n                maskClosable: true\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        Axios.post(siteUrl+\"/api/studenti/richiestacodice\", selectedStudente.idStudente, {\r\n            headers: {\"Content-Type\": \"application/json\"}\r\n        }).then(_ => {\r\n            askPassword(siteUrl+\"/api/firmaremota/firmaremotastudente\", \"post\", {\r\n                idStudente: selectedStudente.idStudente\r\n            }, (response: any) => {\r\n                let popup = response.data as IMessage\r\n    \r\n                Modal.info({\r\n                    title: popup.title,\r\n                    content: <div style={{ marginLeft: 38 }}>{popup.message}</div>,\r\n                    icon: <i className={\"float-left mr-3 far \"+popup.icon} style={{ color: popup.iconColor, fontSize: 22 }}/>\r\n                })\r\n            }, null, \"Inserisci il codice che ti abbiamo inviato per e-mail\")\r\n        })\r\n    }\r\n\r\n    firmaDocente = () => {\r\n        const { lezione, studenti } = this.state\r\n\r\n        Axios.post(siteUrl+\"/api/docenti/richiestacodice\", lezione.idDocente, {\r\n            headers: {\"Content-Type\": \"application/json\"}\r\n        }).then(_ => {\r\n            askPassword(siteUrl+\"/api/firmaremota/firmaremotadocente\", \"post\", {\r\n                idDocente: lezione.idDocente,\r\n                idCorso: studenti[0].idCorso,\r\n                anno: studenti[0].annoFrequentazione\r\n            }, (response: any) => {\r\n                let popup = response.data as IMessage\r\n    \r\n                Modal.info({\r\n                    title: popup.title,\r\n                    content: <div style={{ marginLeft: 38 }}>{popup.message}</div>,\r\n                    icon: <i className={\"float-left mr-3 far \"+popup.icon} style={{ color: popup.iconColor, fontSize: 22 }}/>\r\n                })\r\n            }, null, \"Inserisci il codice che ti abbiamo inviato per e-mail\")\r\n        })\r\n    }\r\n\r\n    scegliStudente = (s: IStudent) => {\r\n        this.setState({\r\n            selectedStudente: s\r\n        })\r\n    }\r\n\r\n    caricaLezione = () => {\r\n        const { studenti } = this.state,\r\n        temp = studenti[0]\r\n\r\n        Axios.get(siteUrl+\"/api/lezioni/\"+temp.idCorso+\"/\"+temp.annoFrequentazione).then(response => {\r\n            let lezione = response.data as ILezione\r\n\r\n            this.setState({\r\n                lezione: lezione\r\n            })\r\n        })\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        const { studenti, selectedStudente, lezione } = this.state\r\n\r\n        if(!studenti.length){\r\n            return <div className=\"col-11 col-lg-4 mx-auto\" id=\"loginBlock\">\r\n                <div className=\"w-100 bg-white p-3 rounded shadow\">\r\n                    <p className=\"text-muted m-0 text-center\">\r\n                        <i className=\"fa fa-ban fa-fw fa-lg text-danger\"></i> Non è stato trovato nessuno studente.</p>\r\n                </div>\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"col-11 col-lg-5 mx-auto\" id=\"loginBlock\">\r\n            <div className=\"w-100\">\r\n                <div className=\"bg-white p-3 rounded shadow mx-auto mb-3 col-12 col-md-6 pos-lg-fixed\">\r\n                    {\r\n                        lezione ? <div>\r\n                            <Tooltip title={lezione.titolo}>\r\n                                <h5 className=\"mb-0 text-truncate\">{lezione.titolo}</h5>\r\n                            </Tooltip>\r\n                            <small className=\"text-muted\">{lezione.oraInizio.slice(0, -3)} - {lezione.oraFine.slice(0, -3)}</small>\r\n                            \r\n                            <button type=\"button\" className=\"btn btn-danger w-100 text-uppercase mt-2\" disabled={lezione === null} onClick={this.firmaDocente}>\r\n                                {\r\n                                    lezione === null && <Icon type=\"loading\" className=\"mr-2 loadable-btn\" spin />\r\n                                }\r\n\r\n                                Firma docente\r\n                            </button>\r\n                        </div> : <Icon type=\"loading\" spin style={{ fontSize: 23 }} />\r\n                    }\r\n                </div>\r\n\r\n                <form className=\"w-100 bg-white p-3 rounded shadow\" onSubmit={this.inviaFirma}>\r\n                    <h3 className=\"d-inline-block\">Firma studente</h3>\r\n                    <LogoCorso idCorso={studenti[0].idCorso} forLogin={true} />\r\n\r\n                    <div className=\"form-group\">\r\n                        <label className=\"text-secondary\">Scegli lo studente</label>\r\n                        <div className=\"multiselect form-control p-0\">\r\n                            {\r\n                                studenti.map(s => {\r\n                                    let checked = selectedStudente === s,\r\n                                    classname = checked ? \"checked\" : \"\"\r\n                                    \r\n                                    return <label className={\"option \"+classname}>\r\n                                        <Radio className=\"mr-2\" onChange={() => this.scegliStudente(s)} checked={checked} /> {s.nome} {s.cognome}\r\n                                    </label>\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n                    <input type=\"submit\" value=\"Firma\" className=\"btn btn-lg btn-success w-100 text-uppercase\"/>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n}","import React from \"react\"\r\nimport CodiceSegreto from \"./CodiceSegreto\"\r\nimport FirmaCasa from \"./FirmaCasa\"\r\n\r\nexport default class DashboardCasa extends React.Component{\r\n\r\n    componentWillUnmount = () => {\r\n        sessionStorage.removeItem(\"confermaCasa\")\r\n    }\r\n\r\n    render(): JSX.Element{\r\n        let session = sessionStorage.getItem(\"confermaCasa\")\r\n        \r\n        if(!session)\r\n            return <CodiceSegreto />\r\n\r\n        return <FirmaCasa />\r\n    }\r\n}\r\n","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport { createHashHistory } from \"history\"\r\nimport \"./index.scss\"\r\nimport * as serviceWorker from \"./serviceWorker\"\r\nimport Main from \"./comp/Main\"\r\nimport { Router, Switch, Route } from \"react-router-dom\"\r\nimport Dashboard from \"./comp/admin/Dashboard\"\r\nimport UserApplication from \"./comp/mobile/UserApplication\"\r\nimport Page404 from \"./comp/Page404\"\r\nimport moment from \"moment\"\r\nimport \"moment/locale/it\"\r\nimport SuperDashboard from \"./comp/superadmin/SuperDashboard\"\r\nimport { superAdminRoute, adminRoute } from \"./utilities\"\r\nimport DashboardCasa from \"./comp/firmacasa/DashboardCasa\"\r\n\r\nmoment.locale(\"it\")\r\n\r\nexport const routerHistory = createHashHistory()\r\n\r\nReactDOM.render(<Router history={routerHistory}>\r\n    <Switch>\r\n        <Route exact path=\"/\" render={() => {\r\n            routerHistory.push(\"/firme/\")\r\n\r\n            return null\r\n        }} />\r\n\r\n        <Route path=\"/firme/\" render={() => (\r\n            <Main />\r\n        )} />\r\n\r\n        <Route path={adminRoute} render={() => (\r\n            <Dashboard />\r\n        )} />\r\n\r\n        <Route path=\"/userprofile\" render={() => (\r\n            <UserApplication />\r\n        )} />\r\n\r\n        <Route path={superAdminRoute} render={() => (\r\n            <SuperDashboard />\r\n        )} />\r\n\r\n        <Route path=\"/firmacasa\" render={() => (\r\n            <DashboardCasa />\r\n        )} />\r\n\r\n        <Route render={() => <Page404 goTo=\"/\" />} />\r\n    </Switch>\r\n</Router>, document.getElementById(\"root\"))\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister()\r\n"],"sourceRoot":""}