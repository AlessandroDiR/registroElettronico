(this.webpackJsonpqrlog=this.webpackJsonpqrlog||[]).push([[0],{2:function(e,t,a){"use strict";(function(e){a.d(t,"m",(function(){return c})),a.d(t,"j",(function(){return i})),a.d(t,"b",(function(){return l})),a.d(t,"n",(function(){return s})),a.d(t,"a",(function(){return m})),a.d(t,"p",(function(){return u})),a.d(t,"g",(function(){return d})),a.d(t,"f",(function(){return f})),a.d(t,"c",(function(){return p})),a.d(t,"k",(function(){return g})),a.d(t,"o",(function(){return h})),a.d(t,"i",(function(){return b})),a.d(t,"l",(function(){return v})),a.d(t,"d",(function(){return N})),a.d(t,"e",(function(){return C})),a.d(t,"h",(function(){return y}));var n=a(151),r=a.n(n),o=a(214),c="https://registrofitstic.azurewebsites.net",i="fitstic_logo.png",l="/adminpanel",s="/superpanel",m=function(e){return e<10?"0"+e:e},u=function(e){return/^([0-1]?[0-9]|2[0-4]):([0-5][0-9])$/.test(e)},d=function(e,t){var a=e.split(/[/-]/g),n=t?new Date(Number(a[2]),Number(a[1])-1,Number(a[0])):new Date(e);return"".concat(n.getFullYear(),"-").concat(m(n.getMonth()+1),"-").concat(m(n.getDate()))},f=function(e){var t=new Date(e);return"".concat(m(t.getDate()),"-").concat(m(t.getMonth()+1),"-").concat(t.getFullYear())},p=function(e){for(var t=E(e.toLowerCase()).split(" "),a=0;a<t.length;a++)t[a]=t[a].charAt(0).toUpperCase()+t[a].substring(1);return t.join(" ")},E=function(e){for(var t=e.toLowerCase().split("'"),a=0;a<t.length;a++)t[a]=t[a].charAt(0).toUpperCase()+t[a].substring(1);return t.join("'")},g=function(){document.getElementsByTagName("body")[0].classList.add("login")},h=function(){document.getElementsByTagName("body")[0].classList.remove("login")},b=function(){var t=Object(o.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(t){return new Promise((function(a,n){var r=new FileReader;r.onload=function(t){var n=new e(t.target.result,"binary").toString("base64");a("data:image/png;base64,"+n)},r.onerror=n,r.readAsArrayBuffer(t)}))},t.abrupt("return",n(a));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var e=document.getElementById("mainBlock"),t=document.getElementById("popup"),a=e?e.clientWidth:0;e&&t&&(t.style.width=a+"px")},N=function(e,t){13===e.keyCode&&t()},C=function(e){var t=new Date(e);return"".concat(m(t.getHours()),":").concat(m(t.getMinutes()))},y=function(e){var t=e.replace("Z",""),a=new Date(t);return"".concat(m(a.getHours()),":").concat(m(a.getMinutes()))};window.addEventListener("load",v),window.addEventListener("resize",v)}).call(this,a(256).Buffer)},234:function(e,t,a){e.exports=a(450)},239:function(e,t,a){},450:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),c=a.n(o),i=a(35);a(239),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(8),s=a(9),m=a(12),u=a(11),d=a(13),f=a(54),p=a(28),E=a(14),g=a.n(E),h={title:"Ops!",icon:"fa-times-circle",iconColor:"#de1e30",message:"\xc8 stato riscontrato un errore durante l'accesso.",time:3e3},b=a(2),v=a(17),N=a(451),C=a(452),y=a(232),x=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).maxLength=16,a.componentDidMount=function(){var e=parseInt(sessionStorage.getItem("corso"));g.a.get(b.m+"/api/corsi/"+e).then((function(e){var t=e.data;a.setState({corso:t})})),Object(b.l)()},a.changeCode=function(e){var t=e.target.value;a.setState({code:t}),a.tryToLog(t)},a.tryToLog=function(e){if(e.length<a.maxLength)return!1;a.switchInput(!0);var t=parseInt(sessionStorage.getItem("corso")),n=parseInt(sessionStorage.getItem("classe"));g.a.post(b.m+"/api/firma",{code:e,idCorso:t,anno:n}).then((function(e){a.setState({popup:e.data}),a.showMessagePopup()})).catch((function(e){a.setState({popup:h}),a.showMessagePopup()}))},a.switchInput=function(e){var t=document.getElementById("mainInput");t&&(e?t.setAttribute("disabled","disabled"):(a.setState({code:""}),t.removeAttribute("disabled"),t.focus()))},a.showMessagePopup=function(){var e=document.getElementById("popup");e&&(e.classList.add("show"),setTimeout((function(){e.classList.remove("show"),a.switchInput(!1)}),a.state.popup.time))},a.cambiaCorso=function(){sessionStorage.removeItem("corso"),sessionStorage.removeItem("classe"),sessionStorage.removeItem("confermaTutor"),We.push("/")},a.switchFocus=function(){a.setState({focus:!a.state.focus})},a.state={code:"",popup:h,corso:null,focus:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.popup,a=e.corso,n=e.focus,o=r.a.createElement(v.a,{type:"loading",spin:!0});return r.a.createElement("div",{className:"col",id:"mainBlock"},r.a.createElement("div",{className:"text-center w-100"},r.a.createElement("h2",{className:"mb-1 font-weight-normal"},"Scannerizza il codice"),r.a.createElement("h6",{className:"mb-1 text-muted font-weight-normal"},"(alza la luminosit\xe0 del dispositivo)"),r.a.createElement("input",{autoFocus:!0,type:"password",value:this.state.code,onChange:this.changeCode,maxLength:this.maxLength,id:"mainInput",onFocus:this.switchFocus,onBlur:this.switchFocus}),r.a.createElement(v.a,{type:"scan",className:"fa-9x d-block text-blue"}),n?"":r.a.createElement("div",{className:"text-danger text-center mt-2"},"Clicca sulla pagina per ristabilire il focus e firmare."),r.a.createElement("div",{className:"top-info"},a?a.nome:r.a.createElement(N.a,{indicator:o}),r.a.createElement(C.a,{type:"vertical",style:{height:20}}),1===parseInt(sessionStorage.getItem("classe"))?"Primo anno":"Secondo anno",r.a.createElement(C.a,{type:"vertical",style:{height:20}}),r.a.createElement(y.a,{placement:"bottomRight",title:"Cambia il corso o la classe per firmare"},r.a.createElement("button",{type:"button",className:"btn btn-sm btn-blue",onClick:this.cambiaCorso},r.a.createElement("i",{className:"far fa-repeat-alt fa-fw mr-1"}),"Cambia")))),r.a.createElement("div",{id:"popup"},r.a.createElement("div",{className:"w-100"},r.a.createElement("i",{className:"fal fa-fw fa-lg fa-6x "+t.icon,style:{color:t.iconColor}}),r.a.createElement("h2",{className:"mt-5"},t.title),r.a.createElement("div",{className:"mt-2"},t.message))))}}]),t}(r.a.PureComponent),w=a(218),S=a(219),O=a(220),k=a(459),j=(a(310),a(311),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.calendarId;return r.a.createElement(w.a,{plugins:[O.a,S.a],events:{googleCalendarId:e},googleCalendarApiKey:"AIzaSyCEEaAbHOYhofQs-iLdHd_J8-KyD_IlRbE",defaultView:"dayGridMonth",fixedWeekCount:!1,firstDay:1,themeSystem:"bootstrap",eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:!1},buttonText:{today:"Mese corrente"},header:{right:"prev, next"},locale:"it",eventClick:function(e){e.jsEvent.preventDefault();var t=e.event;k.a.info({maskClosable:!0,centered:!0,icon:null,title:t.title,content:r.a.createElement("div",{className:"mt-3",style:{fontSize:20}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3 pr-0"},r.a.createElement("span",{className:"label"},"Inizio")),r.a.createElement("div",{className:"col"},r.a.createElement("span",{className:"desc"},Object(b.a)(t.start.getHours()),":",Object(b.a)(t.start.getMinutes())))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3 pr-0"},r.a.createElement("span",{className:"label"},"Fine")),r.a.createElement("div",{className:"col"},r.a.createElement("span",{className:"desc"},Object(b.a)(t.end.getHours()),":",Object(b.a)(t.end.getMinutes())))),t.extendedProps.location&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3 pr-0"},r.a.createElement("span",{className:"label"},"Luogo")),r.a.createElement("div",{className:"col-9",style:{fontSize:15}},t.extendedProps.location)))})}})}}]),t}(r.a.PureComponent)),z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=parseInt(sessionStorage.getItem("corso")),t=parseInt(sessionStorage.getItem("classe"));g.a.get(b.m+"/api/calendari/"+e+"/"+t).then((function(e){var t=e.data;a.setState({calendar:t})}))},a.state={calendar:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.calendar;if(!e){var t=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",{className:"col px-5 py-4 right-block",id:"mainBlock"},r.a.createElement(N.a,{indicator:t}))}return r.a.createElement("div",{className:"col px-5 py-3",id:"mainBlock"},r.a.createElement(j,{calendarId:e.idGoogleCalendar}))}}]),t}(r.a.PureComponent),I=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.props.inMenu?r.a.createElement("div",{className:"copyright"},"\xa9 ",(new Date).getFullYear()," FITSTIC - ",r.a.createElement("a",{href:b.m+"/#/documentazione",className:"text-white u-hover"},"Documentazione")):r.a.createElement("div",{className:"w-100 bg-white p-3 mt-3 rounded shadow px-2 text-center"},r.a.createElement("div",null,"\xa9 ",(new Date).getFullYear()," FITSTIC"),r.a.createElement("a",{href:b.m+"/#"+b.b,className:"text-blue u-hover"},"Coordinatori")," - ",r.a.createElement("a",{href:b.m+"/#"+b.n,className:"text-blue u-hover"},"Amministratori")," - ",r.a.createElement("a",{href:b.m+"/#/documentazione",className:"text-blue u-hover"},"Documentazione"))}}]),t}(r.a.PureComponent),P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){g.a.get(b.m+"/api/corsi").then((function(e){var t=e.data;a.setState({corsi:t})})),Object(b.k)()},a.componentWillUnmount=function(){Object(b.o)()},a.chooseCorso=function(e){sessionStorage.setItem("corso",e.toString()),We.push("/")},a.state={corsi:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state.corsi;if(!t){var a=r.a.createElement(v.a,{type:"loading",style:{fontSize:50,color:"#fff"},spin:!0});return r.a.createElement("div",{className:"col-12 px-5 py-4 right-block",id:"mainBlock"},r.a.createElement(N.a,{indicator:a}))}return r.a.createElement("div",{className:"col-11 col-lg-5 mx-auto",id:"loginBlock"},r.a.createElement("div",{className:"w-100"},r.a.createElement("div",{className:"w-100 bg-white py-3 rounded shadow px-2 text-center"},r.a.createElement("h3",{className:"text-center"},"Scegli il corso"),t.map((function(t){return r.a.createElement("div",{className:"p-3 mx-2 text-center pointer corso-item d-inline-block rounded",onClick:function(){return e.chooseCorso(t.idCorso)}},r.a.createElement("img",{src:t.logo,alt:"logo",height:"60"}))}))),r.a.createElement(I,null)))}}]),t}(r.a.PureComponent),M=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){Object(b.k)()},a.componentWillUnmount=function(){Object(b.o)()},a.chooseClasse=function(e){sessionStorage.setItem("classe",e.toString()),We.push("/")},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-11 col-lg-5 mx-auto",id:"loginBlock"},r.a.createElement("div",{className:"w-100"},r.a.createElement("div",{className:"w-100 bg-white py-3 rounded shadow"},r.a.createElement("h3",{className:"text-center"},"Scegli la classe"),r.a.createElement("div",{className:"py-2 text-center pointer corso-item",onClick:function(){return e.chooseClasse(1)}},"Primo anno"),r.a.createElement("div",{className:"py-2 text-center pointer corso-item",onClick:function(){return e.chooseClasse(2)}},"Secondo anno")),r.a.createElement(I,null)))}}]),t}(r.a.Component),D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).catchNull=function(){a.setState({logo:b.j})},a.componentDidMount=function(){a.props.idCorso?g.a.get(b.m+"/api/corsi/"+a.props.idCorso).then((function(e){var t=e.data;t.logo?a.setState({logo:t.logo}):a.catchNull()})).catch((function(e){a.catchNull()})):a.catchNull()},a.state={logo:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.logo;if(!e){var t=r.a.createElement(v.a,{type:"loading",style:{fontSize:50,color:"#fff"},spin:!0});return r.a.createElement("div",{className:"text-center py-4"},r.a.createElement(N.a,{indicator:t}))}return this.props.forLogin?r.a.createElement("img",{src:e,height:"40",className:"float-right logo",alt:"logo"}):r.a.createElement("div",{className:"logo-block px-3 py-4"},r.a.createElement("img",{src:e,height:"100",className:"mx-auto d-block logo",alt:"logo"}))}}]),t}(r.a.PureComponent),L=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){Object(b.k)()},a.componentWillUnmount=function(){Object(b.o)()},a.cambiaCodice=function(e){var t=e.target.value;a.setState({codice:t})},a.cambiaScelta=function(){sessionStorage.removeItem("corso"),sessionStorage.removeItem("classe"),We.push("/")},a.inviaCodice=function(e){e.preventDefault(),""!==a.state.codice?g.a.post(b.m+"/api/firma/accedi",{idCorso:a.props.idCorso,codice:a.state.codice}).then((function(e){"success"===e.data.trim()?(sessionStorage.setItem("confermaTutor","true"),We.push("/")):k.a.error({title:"Errore!",content:"Codice non valido."})})):k.a.error({title:"Errore!",content:"Riempire il campo."})},a.state={codice:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"col-11 col-lg-5 mx-auto",id:"loginBlock"},r.a.createElement("div",{className:"w-100"},r.a.createElement("form",{className:"w-100 bg-white p-3 rounded shadow",onSubmit:this.inviaCodice},r.a.createElement("h3",{className:"text-center"},"Conferma del coordinatore"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-secondary"},"Codice di conferma"),r.a.createElement("input",{name:"codice",type:"password",className:"form-control",value:this.state.codice,onChange:this.cambiaCodice})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"pr-1 col-6"},r.a.createElement("input",{type:"button",value:"Annulla scelta",className:"btn btn-lg btn-link text-danger w-100 text-uppercase",onClick:this.cambiaScelta})),r.a.createElement("div",{className:"pl-1 col"},r.a.createElement("input",{type:"submit",value:"Prosegui",className:"btn btn-lg btn-success w-100 text-uppercase"})))),r.a.createElement(I,null)))}}]),t}(r.a.PureComponent),F=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).focusInput=function(){var e=document.getElementById("mainInput");e&&e.focus()},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=sessionStorage.getItem("corso"),t=sessionStorage.getItem("classe"),a=sessionStorage.getItem("confermaTutor");return e?t?a?r.a.createElement("div",{className:"container-fluid",onClick:this.focusInput},r.a.createElement(f.b,{history:We},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3 bg-blue p-0 menu"},r.a.createElement(D,{idCorso:sessionStorage.getItem("corso")}),r.a.createElement(p.a,{className:"router-link",activeClassName:"active",onClick:function(){return We.push("/")},exact:!0,to:"/firme/"},r.a.createElement("span",null,r.a.createElement("i",{className:"fal fa-home-alt fa-fw mr-1"})," Home")),r.a.createElement(p.a,{className:"router-link",activeClassName:"active",onClick:function(){return We.push("/calendar")},exact:!0,to:"/firme/calendar"},r.a.createElement("span",null,r.a.createElement("i",{className:"fal fa-calendar-alt fa-fw mr-1"})," Calendario")),r.a.createElement(I,{inMenu:!0})),r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/firme/",render:function(){return r.a.createElement(x,null)}}),r.a.createElement(f.a,{exact:!0,path:"/firme/calendar",render:function(){return r.a.createElement(z,null)}}))))):r.a.createElement(L,{idCorso:parseInt(e)}):r.a.createElement(M,null):r.a.createElement(P,null)}}]),t}(r.a.Component),T=a(463),A=function(){function e(){Object(l.a)(this,e),this.maximum=65535}return Object(s.a)(e,[{key:"encode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-4,a="";t<0&&(t=-t);for(var n=0;n<e.length;n++){var r=e[n],o=r.charCodeAt(0),c=o+t;c>this.maximum&&(c-=this.maximum+1),a+=r=String.fromCharCode(c)}return a}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-4,a="";t<0&&(t=-t);for(var n=0;n<e.length;n++){var r=e[n],o=r.charCodeAt(0),c=o-t;c<0&&(c=this.maximum+(c+1)),a+=r=String.fromCharCode(c)}return a}}]),e}(),q=a(462),R=a(53),B=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).cancelRecover=function(){a.setState({currentStep:0,email:"",code:"",newPassword:"",newPasswordConfirm:"",idCoordinatore:null,loading:!1}),a.props.closeModal()},a.changeMail=function(e){var t=e.target.value.trim();a.setState({email:t})},a.changeCode=function(e){var t=e.target.value.trim();a.setState({code:t})},a.changePassword=function(e){var t=e.target.value;a.setState({newPassword:t})},a.changePasswordConfirm=function(e){var t=e.target.value;a.setState({newPasswordConfirm:t})},a.increaseStep=function(){a.setState({currentStep:a.state.currentStep+1})},a.decreaseStep=function(){a.setState({currentStep:a.state.currentStep-1})},a.switchLoading=function(){a.setState({loading:!a.state.loading})},a.confirmFirstStep=function(e){e.preventDefault();var t=a.state.email;""!==t?(a.switchLoading(),g.a.post(b.m+"/api/coordinatori/recuperocoordinatori",{email:t}).then((function(e){var t=e.data,n=parseInt(t);isNaN(n)?k.a.error({title:"Errore!",content:"Questa e-mail non corrisponde a nessun coordinatore.",maskClosable:!0}):(a.setState({idCoordinatore:n,loading:!1}),a.increaseStep())}))):k.a.error({title:"Errore!",content:"Riempire tutti i campi.",maskClosable:!0})},a.confirmSecondStep=function(e){e.preventDefault(),""!==a.state.code?a.increaseStep():k.a.error({title:"Errore!",content:"Riempire il campo.",maskClosable:!0})},a.savePassword=function(e){e.preventDefault();var t=a.state,n=t.newPassword,r=t.newPasswordConfirm,o=t.idCoordinatore,c=t.code;if(""!==n&&""!==r)if(n.length<8)k.a.error({title:"Errore!",content:"La password deve avere almeno 8 caratteri.",maskClosable:!0});else if(n===r){a.switchLoading();var i=(new A).encode(n);g.a.post(b.m+"/api/coordinatori/cambiopassword",{idCoordinatore:o,password:i,codice:c}).then((function(e){"success"===e.data.trim()?k.a.success({title:"Complimenti!",content:"Password modificata con successo.",centered:!0,onOk:a.cancelRecover}):k.a.error({title:"Errore!",content:"Non \xe8 stato possibile completare l'operazione.",onOk:function(){a.setState({loading:!1})}})}))}else k.a.error({title:"Errore!",content:"Le password non corrispondono.",maskClosable:!0});else k.a.error({title:"Errore!",content:"Riempire tutti i campi.",maskClosable:!0})},a.state={currentStep:0,email:"",code:"",newPassword:"",newPasswordConfirm:"",idCoordinatore:null,loading:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.show,t=this.state,a=t.currentStep,n=t.email,o=t.code,c=t.newPassword,i=t.newPasswordConfirm,l=t.loading,s=q.a.Step,m=[{title:"E-mail",content:r.a.createElement("form",{onSubmit:this.confirmFirstStep},r.a.createElement("div",{className:"form-group my-3"},r.a.createElement("label",{className:"text-muted"},"Inserisci la tua e-mail"),r.a.createElement("input",{type:"email",name:"email",value:n,className:"form-control",onChange:this.changeMail,disabled:l})),r.a.createElement(R.a,{htmlType:"submit",className:"float-right",type:"primary",loading:l},"Prosegui"),r.a.createElement("div",{className:"clearfix"}))},{title:"Codice",content:r.a.createElement("form",{onSubmit:this.confirmSecondStep},r.a.createElement("div",{className:"form-group my-3"},r.a.createElement("label",{className:"text-muted"},"Inserisci il codice ricevuto via e-mail"),r.a.createElement("input",{type:"text",name:"code",value:o,className:"form-control",onChange:this.changeCode,disabled:l})),r.a.createElement("div",{className:"float-right"},r.a.createElement(R.a,{className:"mr-2",onClick:this.decreaseStep},"Indietro"),r.a.createElement(R.a,{htmlType:"submit",type:"primary",loading:l},"Prosegui")),r.a.createElement("div",{className:"clearfix"}))},{title:"Nuova password",content:r.a.createElement("form",{onSubmit:this.savePassword},r.a.createElement("div",{className:"form-group my-3"},r.a.createElement("label",{className:"text-muted"},"Crea la tua nuova password"),r.a.createElement("input",{type:"password",name:"newpassword",value:c,className:"form-control",onChange:this.changePassword,disabled:l})),r.a.createElement("div",{className:"form-group my-3"},r.a.createElement("label",{className:"text-muted"},"Conferma la nuova password"),r.a.createElement("input",{type:"password",name:"newpassword_conf",value:i,className:"form-control",onChange:this.changePasswordConfirm,disabled:l})),r.a.createElement("div",{className:"float-right"},r.a.createElement(R.a,{className:"mr-2",onClick:this.decreaseStep},"Indietro"),r.a.createElement(R.a,{htmlType:"submit",type:"primary",loading:l},"Salva la password")),r.a.createElement("div",{className:"clearfix"}))}];return r.a.createElement(k.a,{visible:e,title:"Recupero della password",onCancel:this.cancelRecover,footer:null,maskClosable:!1},r.a.createElement(q.a,{size:"small",current:a},m.map((function(e){return r.a.createElement(s,{key:e.title,title:e.title})}))),r.a.createElement("div",{className:"steps-content"},m[a].content))}}]),t}(r.a.PureComponent),U=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){Object(b.k)()},a.componentWillUnmount=function(){Object(b.o)()},a.changeInputName=function(e){var t=e.target.value;a.setState({adminName:t})},a.changeInputPassword=function(e){var t=e.target.value;a.setState({adminPsw:t})},a.tryLogin=function(e){e.preventDefault();var t=a.state,n=t.adminName,r=t.adminPsw,o=(new A).encode(r);g.a.post(b.m+"/api/coordinatori/logincoordinatore",{username:n.trim(),password:o}).then((function(e){var t=e.data;!function(e){try{return"idCorso"in e&&"nome"in e&&"cognome"in e}catch(t){return!1}}(t)?k.a.error({title:"Errore!",content:"Username o Password errati!",centered:!0,maskClosable:!0}):(t.password=o,sessionStorage.setItem("adminSession",JSON.stringify(t)),We.push(b.b),T.a.success("Login effettuato con successo!"))}))},a.switchForgot=function(){a.setState({showForgot:!a.state.showForgot})},a.state={adminName:"",adminPsw:"",showForgot:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.adminName,a=e.adminPsw,n=e.showForgot;return r.a.createElement("div",{className:"col-11 col-lg-5 mx-auto",id:"loginBlock"},r.a.createElement("div",{className:"w-100"},r.a.createElement("form",{className:"w-100 bg-white p-3 rounded shadow",onSubmit:this.tryLogin},r.a.createElement("h3",{className:"d-inline-block"},"Accesso coordinatori"),r.a.createElement("img",{src:b.j,height:"40",className:"float-right logo",alt:"logo"}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-secondary"},"Utente di accesso"),r.a.createElement("input",{name:"username",type:"text",className:"form-control",value:t,onChange:this.changeInputName})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-secondary"},"Password di accesso"),r.a.createElement("input",{name:"password",type:"password",className:"form-control",value:a,onChange:this.changeInputPassword})),r.a.createElement("input",{type:"submit",value:"Accedi",className:"btn btn-lg btn-success w-100 text-uppercase"}),r.a.createElement("span",{className:"link-blue u-hover d-block mt-3 text-center",onClick:this.switchForgot},"Hai dimenticato la password?")),r.a.createElement(I,null)),r.a.createElement(B,{show:n,closeModal:this.switchForgot}))}}]),t}(r.a.PureComponent),W=a(455),Y=a(458),H=a(456),G=a(465),V=a(457),Q=a(77),J=function(e,t,a,n,o,c){var i,l=JSON.parse(sessionStorage.getItem("adminSession")),s=JSON.parse(sessionStorage.getItem("superSession")),m=function(){if(o&&o(),s)a.authAdmin={idAdmin:s.idAmministratore,password:s.password};else if(l)a.authCoordinatore={idCoordinatore:l.idCoordinatore,password:l.password};else{if(""===i.value)return k.a.error({title:"Errore!",content:"Riempire il campo.",centered:!0,maskClosable:!0}),!0;a.password=i.value}"post"===t?g.a.post(e,a).then(n).catch((function(e){k.a.error({title:"Errore!",content:"C'\xe8 stato un problema. Forse sei stato disconnesso: prova a riefettuare il login."})})):"put"===t&&g.a.put(e,a).then(n).catch((function(e){k.a.error({title:"Errore!",content:"C'\xe8 stato un problema. Forse sei stato disconnesso: prova a riefettuare il login."})}))};if(l||s)m();else{var u=k.a.confirm({title:"Prima di procedere...",content:r.a.createElement("div",{style:{marginLeft:-38}},r.a.createElement("div",{className:"form-group mb-0"},r.a.createElement("label",{className:"text-secondary"},c||"Inserisci la tua password per confermare l'identit\xe0"),r.a.createElement("input",{type:"password",ref:function(e){return i=e},className:"form-control",onKeyUp:function(e){return Object(b.d)(e,(function(){m()||u.destroy()}))}}))),okText:"Conferma identit\xe0",cancelText:"Annulla",onOk:m,icon:r.a.createElement(v.a,{type:"lock",style:{color:"var(--danger)"}}),centered:!0});setTimeout((function(){i.focus()}),300)}},_=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){g.a.get(b.m+"/api/studenti/"+a.props.corso).then((function(e){a.setState({students:e.data})}))},a.showConfirm=function(e){var t=a.state.students,n="";k.a.confirm({title:"".concat(e.nome," ").concat(e.cognome),content:r.a.createElement("div",{style:{marginLeft:-38}},r.a.createElement("p",null,"Confermi di voler ritirare questo studente dal corso?"),r.a.createElement("label",{className:"text-secondary"},"Data di ritiro"),r.a.createElement(W.a,{locale:Q.a,className:"w-100",onChange:function(e,t){return n=t},format:"DD-MM-YYYY"})),okText:"Conferma ritiro",okType:"danger",cancelText:"Annulla",icon:r.a.createElement(v.a,{type:"warning",className:"text-danger",theme:"filled"}),onOk:function(){if(""===n)return k.a.error({title:"Errore!",content:"Seleziona una data valida."}),!0;var r=Object(b.g)(n,!0),o=e;o.ritirato="true",o.dataRitiro=r,J(b.m+"/api/studenti/"+e.idStudente,"put",{studente:o},(function(n){var r=n.data,o=t;o[t.indexOf(e)]=r,a.setState({students:o}),T.a.success("Studente ritirato con successo!")}),(function(){a.setState({students:null})}))}})},a.changeSelection=function(e){var t=a.state.selection.find((function(t){return t===e}))?a.state.selection.filter((function(t){return t.idStudente!==e.idStudente})):a.state.selection.concat(e);a.setState({selection:t})},a.selectAll=function(e,t){var n=t.target.checked?a.state.students.filter((function(t){return t.annoFrequentazione===e&&!t.ritirato})):a.state.selection.filter((function(t){return t.annoFrequentazione!==e}));a.setState({selection:n})},a.showHideModal=function(){a.state.selection.length?a.setState({confirmModal:!a.state.confirmModal}):k.a.info({title:"Attenzione!",content:"Devi selezionare almeno uno studente."})},a.moveStudents=function(){var e=document.getElementById("moveToClass"),t=parseInt(e.value),n=a.state.selection.map((function(e){var n=e;return n.idCorso=a.props.corso,n.annoFrequentazione=t,n}));1!==t&&2!==t&&k.a.error({title:"Errore!",content:"L'anno selezionato non \xe8 valido."}),J(b.m+"/api/studenti","put",{studenti:n},(function(e){a.setState({students:e.data,confirmModal:!1}),T.a.success("Studenti spostati con successo!")}),(function(){a.setState({students:null,selection:[]})}))},a.allRetired=function(e){var t=!0;return e.forEach((function(e){e.ritirato||(t=!1)})),!t},a.sortbyId=function(e,t){return e.idStudente>t.idStudente?-1:e.idStudente<t.idStudente?1:0},a.promuoviStudent=function(e){k.a.confirm({title:"".concat(e.nome," ").concat(e.cognome),content:"Confermi di voler segnare questo studente come archiviato?",okText:"Conferma",okType:"primary",cancelText:"Annulla",onOk:function(){J(b.m+"/api/studenti/promuovistudente","put",{idStudente:e.idStudente},(function(e){var t=e.data;a.setState({students:t}),T.a.success("Studente archiviato con successo!")}),(function(){a.setState({students:null})}))}})},a.changeFilter=function(e){var t=e.target.value;a.setState({filter:t})},a.filterStudentsByFilter=function(){var e=a.state,t=e.students,n=e.filter;return t.filter((function(e){return-1!==e.nome.toLowerCase().indexOf(n.toLowerCase())||-1!==e.cognome.toLowerCase().indexOf(n.toLowerCase())}))},a.state={students:null,selection:[],confirmModal:!1,filter:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.students,n=t.selection,o=t.filter,c=Y.a.Panel,i=H.a.TabPane;if(!a){var l=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",{className:"col px-5 py-4 right-block",id:"mainBlock"},r.a.createElement(N.a,{indicator:l}))}var s=[a.filter((function(e){return 1===e.annoFrequentazione&&!e.promosso})).sort(this.sortbyId).sort((function(e,t){return e.ritirato?0:-1})),a.filter((function(e){return 2===e.annoFrequentazione&&!e.promosso})).sort(this.sortbyId).sort((function(e,t){return e.ritirato?0:-1}))],m=(""===o.trim()?a:this.filterStudentsByFilter()).filter((function(e){return e.promosso})).sort(this.sortbyId).sort((function(e,t){return e.ritirato?0:-1}));return r.a.createElement("div",{className:"col px-5 py-4 right-block"},r.a.createElement("h3",{className:"mb-3 text-center"},"Studenti del corso"),r.a.createElement(H.a,{defaultActiveKey:"1"},r.a.createElement(i,{tab:r.a.createElement("span",null,r.a.createElement("i",{className:"fal fa-user fa-fw mr-1"})," Studenti attivi"),key:"1"},r.a.createElement("button",{className:"btn btn-success float-right mr-1",type:"button",onClick:function(){return We.push(b.b+"/studenti/new")}},r.a.createElement("i",{className:"fal fa-plus fa-fw"})," Aggiungi studente"),r.a.createElement("button",{className:"btn btn-orange float-right mr-2",type:"button",onClick:this.showHideModal},r.a.createElement("i",{className:"fa fa-arrows-alt fa-fw"})," Sposta studenti"),r.a.createElement("button",{className:"btn btn-blue float-right mr-2",type:"button",onClick:function(){return We.push(b.b+"/studenti/import")}},r.a.createElement("i",{className:"fa fa-file-csv fa-fw"})," Importa da CSV"),r.a.createElement("div",{className:"clearfix"}),r.a.createElement(H.a,{defaultActiveKey:"0"},s.map((function(t,a){if(!t[0])return!1;var o=e.allRetired(t),c=1===t[0].annoFrequentazione?"Primo":"Secondo";return t.forEach((function(e){-1!==n.indexOf(e)||e.ritirato||(o=!1)})),r.a.createElement(i,{tab:c+" anno",key:a.toString()},r.a.createElement("table",{className:"table table-bordered text-center"},r.a.createElement("tbody",{className:"border-top-0"},r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"5%"}},r.a.createElement(y.a,{title:"Seleziona tutti"},r.a.createElement(G.a,{onChange:function(a){return e.selectAll(t[0].annoFrequentazione,a)},checked:o}))),r.a.createElement("th",null,"Studente"),r.a.createElement("th",null,"Codice Fiscale"),r.a.createElement("th",{style:{width:"15%"}},"Frequenza"),r.a.createElement("th",{style:{width:"26%"}},"Azioni")),t.map((function(t){var a=!!e.state.selection.find((function(e){return e===t})),n=t.ritirato?"light font-italic":"white";return r.a.createElement("tr",{className:"bg-"+n},r.a.createElement("td",null,t.ritirato?r.a.createElement(G.a,{disabled:!0}):r.a.createElement(G.a,{onChange:function(){return e.changeSelection(t)},checked:a})),r.a.createElement(y.a,{title:t.nome+" "+t.cognome},r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},t.nome," ",t.cognome)),r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},t.cf),r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},isNaN(t.frequenza)?0:t.frequenza,"%"),r.a.createElement("td",null,r.a.createElement(y.a,{title:"Dettagli"},r.a.createElement("button",{type:"button",className:"btn btn-info circle-btn",onClick:function(){return We.push(b.b+"/studenti/"+t.idStudente)}},r.a.createElement("i",{className:"fa fa-info"}))),!t.ritirato&&r.a.createElement(y.a,{title:"Modifica"},r.a.createElement("button",{type:"button",className:"btn btn-warning text-white circle-btn ml-2",onClick:function(){return We.push(b.b+"/studenti/edit/"+t.idStudente)}},r.a.createElement("i",{className:"fa fa-pen"}))),!t.ritirato&&r.a.createElement(y.a,{title:"Segna come ritirato"},r.a.createElement("button",{type:"button",className:"btn btn-danger circle-btn ml-2",onClick:function(){return e.showConfirm(t)}},r.a.createElement("i",{className:"fa fa-user-times"}))),t.ritirato&&r.a.createElement(y.a,{title:"Studente ritirato"},r.a.createElement("button",{type:"button",className:"circle-btn ml-2 border-0"},r.a.createElement("i",{className:"fa fa-user-slash"}))),r.a.createElement(y.a,{title:"Archivia studente"},r.a.createElement("button",{type:"button",className:"btn btn-success circle-btn ml-2",onClick:function(){return e.promuoviStudent(t)}},r.a.createElement("i",{className:"fa fa-user-check"})))))})))))})))),r.a.createElement(i,{tab:r.a.createElement("span",null,r.a.createElement("i",{className:"fal fa-user-graduate fa-fw mr-1"})," Studenti archiviati"),key:"2"},r.a.createElement("div",{className:"float-right mr-1 mb-2"},r.a.createElement("label",{className:"d-inline-block text-secondary mr-2"},"Filtra studenti: "),r.a.createElement(V.a,{value:o,onChange:this.changeFilter,className:"w-auto"})),r.a.createElement("table",{className:"table table-bordered text-center"},r.a.createElement("tbody",{className:"border-top-0"},r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("i",{className:"fa fa-check-circle fa-lg text-success"})),r.a.createElement("th",null,"Studente"),r.a.createElement("th",null,"Codice Fiscale"),r.a.createElement("th",{style:{width:"15%"}},"Anno"),r.a.createElement("th",{style:{width:"15%"}},"Frequenza"),r.a.createElement("th",{style:{width:"20%"}},"Azioni")),m.map((function(e){var t=e.ritirato?"light font-italic":"white";return r.a.createElement("tr",{className:"bg-"+t},r.a.createElement("td",null,e.ritirato?r.a.createElement("i",{className:"fa fa-times-circle fa-lg text-danger"}):r.a.createElement("i",{className:"fa fa-check-circle fa-lg text-success"})),r.a.createElement(y.a,{title:e.nome+" "+e.cognome},r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},e.nome," ",e.cognome)),r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},e.cf),r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},1===e.annoFrequentazione?"Primo":"Secondo"),r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},isNaN(e.frequenza)?0:e.frequenza,"%"),r.a.createElement("td",null,r.a.createElement(y.a,{title:"Dettagli"},r.a.createElement("button",{type:"button",className:"btn btn-info circle-btn",onClick:function(){return We.push(b.b+"/studenti/"+e.idStudente)}},r.a.createElement("i",{className:"fa fa-info"})))))})))))),r.a.createElement(k.a,{title:"Sposta studenti",visible:this.state.confirmModal,onCancel:this.showHideModal,cancelText:"Annulla",okText:"Conferma",onOk:this.moveStudents},r.a.createElement("label",{className:"text-secondary"},"Scegliere l'anno in cui spostare gli studenti"),r.a.createElement("select",{className:"custom-select",id:"moveToClass"},r.a.createElement("option",{value:"1"},"Primo anno"),r.a.createElement("option",{value:"2"},"Secondo anno")),r.a.createElement(Y.a,{bordered:!1},r.a.createElement(c,{header:"Mostra studenti selezionati",key:1},n.map((function(e){return r.a.createElement("span",{className:"d-block"},r.a.createElement("strong",null,e.nome," ",e.cognome)," (",e.annoFrequentazione,"\xb0 anno)")}))))))}}]),t}(r.a.PureComponent),K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).changeNome=function(e){var t=e.target.value;a.setState({nome:t})},a.changeCognome=function(e){var t=e.target.value;a.setState({cognome:t})},a.changeEmail=function(e){var t=e.target.value.trim();a.setState({email:t})},a.changeData=function(e){a.setState({dataNascita:e})},a.changeAnnoScolastico=function(e){var t=e.target.value;a.setState({annoScolastico:Number(t)})},a.changeCF=function(e){var t=e.target.value.trim();a.setState({cf:t})},a.aggiungiStudente=function(e){e.preventDefault();var t=a.state,n=t.nome,r=t.cognome,o=t.dataNascita,c=t.cf,i=t.annoScolastico,l=t.email;if(""!==n.trim()&&""!==r.trim()&&""!==o&&""!==c&&i&&""!==l)if(16===c.length){var s=[{nome:n.trim(),cognome:r.trim(),cf:c,password:c,email:l,annoFrequentazione:i,dataNascita:Object(b.g)(o,!0),idCorso:a.props.corso}];J(b.m+"/api/studenti","post",{studenti:s},(function(e){T.a.success("Studente creato con successo!"),We.push(b.b+"/studenti")}))}else k.a.error({title:"Errore!",content:"Codice Fiscale non valido."});else k.a.error({title:"Errore!",content:"Riempire tutti i campi."})},a.state={nome:"",cognome:"",cf:"",annoScolastico:1,email:"",dataNascita:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.nome,n=t.cognome,o=t.cf,c=t.email;return r.a.createElement("div",{className:"col px-5 py-4 right-block"},r.a.createElement("h3",{className:"mb-2 text-center"},"Aggiungi un nuovo studente"),r.a.createElement("form",{onSubmit:this.aggiungiStudente},r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Nome"),r.a.createElement("input",{name:"name",type:"text",className:"form-control",value:a,onChange:this.changeNome})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Cognome"),r.a.createElement("input",{name:"surname",type:"text",className:"form-control",value:n,onChange:this.changeCognome})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Anno frequentato"),r.a.createElement("select",{name:"anno",onChange:this.changeAnnoScolastico,className:"custom-select"},r.a.createElement("option",{value:1},"Primo anno"),r.a.createElement("option",{value:2},"Secondo anno")))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Data di nascita"),r.a.createElement(W.a,{locale:Q.a,className:"w-100 select-date",onChange:function(t,a){return e.changeData(a)},format:"DD-MM-YYYY"})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"E-mail"),r.a.createElement("input",{name:"email",type:"email",className:"form-control",value:c,onChange:this.changeEmail})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Codice Fiscale"),r.a.createElement("input",{name:"cf",type:"text",className:"form-control",maxLength:16,value:o,onChange:this.changeCF}))),r.a.createElement("button",{type:"submit",className:"btn btn-success text-uppercase w-100"},"Aggiungi studente")))}}]),t}(r.a.PureComponent),Z=a(230),X=a(460),$=a(453),ee=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=a.props.studente;g.a.get(b.m+"/api/studenti/getdetailedpresences/"+e.idStudente).then((function(e){var t=e.data;a.setState({presenze:t.map((function(e){return e.ingresso=Object(b.e)(e.ingresso),e.uscita="00:00"===Object(b.h)(e.uscita)?"Non firmata":Object(b.e)(e.uscita),e}))})}))},a.changeEntrata=function(e,t){var n=e.target.value.trim(),r=a.state.editingList.map((function(e){return e.idPresenza===t&&(e.ingresso=n),e}));a.setState({editingList:r})},a.changeUscita=function(e,t){var n=e.target.value.trim(),r=a.state.editingList.map((function(e){return e.idPresenza===t&&(e.uscita=n),e}));a.setState({editingList:r})},a.startTimeEdit=function(e){a.setState({editingList:a.state.editingList.concat(e)})},a.animateTds=function(e,t){e.classList.add("edited"),t.classList.add("edited"),setTimeout((function(){e.classList.remove("edited"),t.classList.remove("edited")}),1e3)},a.confirmEdit=function(e,t,n){var r=a.state,o=r.presenze,c=r.editingList,i=c.find((function(t){return t.idPresenza===e}));if(Object(b.p)(i.ingresso)&&Object(b.p)(i.uscita)){var l=new Date;J(b.m+"/api/presenze/"+e,"put",{idPresenza:i.idPresenza,idStudente:i.idStudente,ingresso:new Date("".concat(l.getFullYear(),"-").concat(l.getMonth()+1,"-").concat(l.getDay()," ").concat(i.ingresso)),uscita:new Date("".concat(l.getFullYear(),"-").concat(l.getMonth()+1,"-").concat(l.getDay()," ").concat(i.uscita)),idLezione:i.idLezione},(function(r){var l=r.data;if("success"===l.trim()){var s=o.map((function(t){return t.idPresenza===e?i:t}));a.setState({presenze:s,editingList:c.filter((function(e){return e.idPresenza!==i.idPresenza}))}),a.animateTds(t,n),a.props.reloadTotali()}else k.a.error({title:"Errore!",content:l})}))}else k.a.error({title:"Errore!",content:"Orari non validi! (ore:minuti)",maskClosable:!0})},a.getCategorie=function(){var e=a.state.presenze,t=[];return e.forEach((function(e){-1===t.indexOf(e.lezione)&&t.push(e.lezione)})),t},a.changeFilter=function(e){a.setState({filter:""===e?null:e})},a.annullaModifica=function(e){a.setState({editingList:a.state.editingList.filter((function(t){return t.idPresenza!==e.idPresenza}))})},a.state={presenze:null,editingList:[],filter:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.presenze,n=t.editingList,o=t.filter,c=this.props.studente,i=$.a.Option;if(!a){var l=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",null,r.a.createElement(N.a,{indicator:l,className:"mt-3"}))}var s=o?a.filter((function(e){return e.lezione.toLowerCase()===o.toLowerCase()})):a;return r.a.createElement("div",{className:"mt-3"},r.a.createElement("h3",{className:"d-inline-block"},"Presenze dello studente"),r.a.createElement("div",{className:"float-right"},r.a.createElement("label",{className:"d-inline-block text-secondary mr-2"},"Filtra per materia: "),r.a.createElement($.a,{defaultValue:"",style:{width:150},onChange:this.changeFilter,showSearch:!0},r.a.createElement(i,{value:""},"Nessuna"),this.getCategorie().map((function(e){return r.a.createElement(i,{value:e},e)})))),r.a.createElement("div",{className:"clearfix"}),r.a.createElement("table",{className:"table table-bordered text-center"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Giorno"),r.a.createElement("th",null,"Entrata"),r.a.createElement("th",null,"Uscita"),r.a.createElement("th",null,"Lezione"),!c.promosso&&r.a.createElement("th",{style:{width:"20%"}},"Azioni")),s.map((function(t){var a,o,i=n.find((function(e){return e.idPresenza===t.idPresenza}));return r.a.createElement("tr",null,r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},Object(b.f)(t.data)),r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate",ref:function(e){return a=e}},i?r.a.createElement("input",{type:"text",className:"form-control edit-time",value:i.ingresso,onChange:function(a){return e.changeEntrata(a,t.idPresenza)},onKeyUp:function(n){return Object(b.d)(n,(function(){return e.confirmEdit(t.idPresenza,a,o)}))}}):r.a.createElement("span",null,t.ingresso)),r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate",ref:function(e){return o=e}},i?r.a.createElement("input",{type:"text",className:"form-control edit-time",value:i.uscita,onChange:function(a){return e.changeUscita(a,t.idPresenza)},onKeyUp:function(n){return Object(b.d)(n,(function(){return e.confirmEdit(t.idPresenza,a,o)}))}}):r.a.createElement("span",null,t.uscita)),r.a.createElement(y.a,{title:t.lezione},r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},t.lezione)),!c.promosso&&r.a.createElement("td",null,i?r.a.createElement("div",null,r.a.createElement(y.a,{title:"Annulla"},r.a.createElement("button",{type:"button",className:"btn btn-danger circle-btn",onClick:function(){return e.annullaModifica(t)}},r.a.createElement("i",{className:"fa fa-times"}))),r.a.createElement(y.a,{title:"Conferma modifiche"},r.a.createElement("button",{type:"button",className:"btn btn-success circle-btn ml-2",onClick:function(){return e.confirmEdit(t.idPresenza,a,o)}},r.a.createElement("i",{className:"fa fa-check"})))):r.a.createElement(y.a,{title:"Modifica orari"},r.a.createElement("button",{type:"button",className:"btn btn-orange circle-btn",onClick:function(){return e.startTimeEdit(t)}},r.a.createElement("i",{className:"fa fa-user-edit"})))))})))))}}]),t}(r.a.PureComponent),te=a(76),ae=a.n(te),ne=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=Number(a.props.match.params.id);isNaN(e)&&We.push(b.b),g.a.get(b.m+"/api/studenti/getstudentibyid/"+e).then((function(e){a.setState({student:e.data})})),g.a.get(b.m+"/api/studenti/gettotaleorelezioni/"+e).then((function(e){a.setState({oreTotali:Math.round(e.data)})})),a.loadTotali()},a.loadTotali=function(){a.setState({totPresenze:null}),g.a.get(b.m+"/api/studenti/gethoursamount/"+a.props.match.params.id).then((function(e){a.setState({totPresenze:Math.round(e.data)})}))},a.toggleModal=function(){a.setState({modal:!a.state.modal})},a.downloadQR=function(){var e=a.state.student,t=document.getElementById("qr-code-image").toDataURL("image/png").replace("image/png","image/octet-stream"),n=document.createElement("a");n.href=t,n.download="qrcode".concat(e.nome).concat(e.cognome,".png"),document.body.appendChild(n),n.click(),document.body.removeChild(n)},a.getQRCode=function(){return a.state.student.codice},a.state={student:null,totPresenze:null,oreTotali:null,modal:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.student,a=e.totPresenze,n=e.oreTotali,o=e.modal;if(!t){var c=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",{className:"col px-5 py-4 right-block",id:"mainBlock"},r.a.createElement(N.a,{indicator:c}))}var i=null!==t.frequenza?Math.round(100*a/n):null,l=i>=80?"var(--success)":"var(--danger)";return r.a.createElement("div",{className:"col px-5 py-4 right-block"},r.a.createElement("div",{className:"row mx-0"},r.a.createElement("div",{className:"col-12 col-md-6 pl-md-0 mb-2 mb-md-0"},r.a.createElement("div",{className:"p-3 bg-white border rounded"},r.a.createElement("span",{className:"border-text"},t.ritirato?"Ritirato: "+t.dataRitiro:1===t.annoFrequentazione?"Primo anno":"Secondo anno"),r.a.createElement("h4",{className:"text-uppercase mb-2 text-truncate"},t.nome," ",t.cognome),r.a.createElement("p",{className:"mb-0"},r.a.createElement("strong",null,"Data di nascita"),": ",Object(b.f)(t.dataNascita)),r.a.createElement("p",{className:"mb-0"},r.a.createElement("strong",null,"E-mail"),": ",t.email),r.a.createElement(R.a,{onClick:this.toggleModal,className:"float-right",type:"link"},"Mostra codice QR"),r.a.createElement("div",{className:"clearfix"}))),r.a.createElement("div",{className:"col-12 col-md-6 pr-md-0"},r.a.createElement("div",{className:"p-3 bg-white border rounded"},null!==i?r.a.createElement(Z.a,{type:"circle",percent:i,width:80,className:"float-left mr-3",strokeColor:l,format:function(e){return"".concat(e,"%")}}):r.a.createElement(N.a,{indicator:r.a.createElement(v.a,{type:"loading",spin:!0})}),null!==n&&null!==a?r.a.createElement(X.a,{title:"Presenze totali (ore)",value:a,suffix:"/ "+n,decimalSeparator:",",groupSeparator:"."}):r.a.createElement(N.a,{indicator:r.a.createElement(v.a,{type:"loading",spin:!0})}),r.a.createElement("div",{className:"clearfix"})))),r.a.createElement(ee,{studente:t,reloadTotali:this.loadTotali}),r.a.createElement(k.a,{visible:o,maskClosable:!0,centered:!0,title:r.a.createElement("span",null,r.a.createElement("i",{className:"far fa-qrcode fa-fw fa-lg text-primary mr-2"}),"Codice QR dello studente"),onCancel:this.toggleModal,width:350,onOk:this.downloadQR,footer:[r.a.createElement(R.a,{type:"primary",onClick:this.downloadQR},r.a.createElement("i",{className:"far fa-arrow-to-bottom mr-2"})," Salva codice"),r.a.createElement(R.a,{type:"default",onClick:this.toggleModal},"Chiudi")]},r.a.createElement("div",{className:"text-center"},r.a.createElement("p",null,"Salva il codice sottostante e condividilo con ",r.a.createElement("strong",null,t.nome," ",t.cognome,".")),r.a.createElement("div",{className:"my-2"},r.a.createElement(ae.a,{id:"qr-code-image",value:this.getQRCode(),size:200})))))}}]),t}(r.a.PureComponent),re=a(454),oe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){g.a.get(b.m+"/api/docenti").then((function(e){a.setState({docenti:e.data})}))},a.switchList=function(){a.setState({showAll:!a.state.showAll})},a.showDeleteConfirm=function(e){k.a.confirm({title:"ATTENZIONE: si sta per ritirare un docente (".concat(e.nome," ").concat(e.cognome,")"),content:"I dati identificativi del docente, le lezioni e le presenze verranno comunque mantenuti, ma il docente verr\xe0 ritirato da tutti i corsi in cui insegna. In seguito sar\xe0 possibile reintegrarlo nel corso se necessario.",okText:"Confermo",okType:"danger",cancelText:"Annulla",onOk:function(){return a.ritiraOAnnulla(e.idDocente,"Docente ritirato con successo!")}})},a.ritiraOAnnulla=function(e,t){J(b.m+"/api/docenti/ritiradocente","put",{idDocente:e},(function(e){var n=e.data;a.setState({docenti:n}),T.a.success(t)}),(function(){a.setState({docenti:null})}))},a.sortbyId=function(e,t){return e.idDocente>t.idDocente?1:e.idDocente<t.idDocente?-1:0},a.backRetire=function(e){k.a.confirm({title:"".concat(e.nome," ").concat(e.cognome),content:"Questo docente verr\xe0 reintegrato all'interno del corso.",okText:"Confermo",okType:"danger",cancelText:"Annulla",onOk:function(){return a.ritiraOAnnulla(e.idDocente,"Docente reintegrato con successo!")}})},a.isInCorso=function(e){return-1!==e.corsi.indexOf(a.props.corso)},a.state={docenti:null,showAll:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.docenti,n=t.showAll;if(!a){var o=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",{className:"col px-5 py-4 right-block",id:"mainBlock"},r.a.createElement(N.a,{indicator:o}))}var c=(n?a:a.filter((function(t){return e.isInCorso(t)}))).sort(this.sortbyId).sort((function(e,t){return e.ritirato?0:-1}));return r.a.createElement("div",{className:"col px-5 py-4 right-block"},r.a.createElement("h3",{className:"mb-3 text-center"},"Docenti del corso"),r.a.createElement("label",{className:"pointer",style:{transform:"translateY(50%)"}},r.a.createElement(re.a,{checked:!n,onChange:this.switchList,className:"mr-1 align-top"})," Mostra solo i docenti del mio corso"),r.a.createElement("button",{className:"btn btn-success float-right mb-3",type:"button",onClick:function(){return We.push(b.b+"/docenti/new")}},r.a.createElement("i",{className:"fal fa-plus fa-fw"})," Aggiungi docente"),r.a.createElement("table",{className:"table table-bordered text-center"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"35%"}},"Docente"),r.a.createElement("th",{style:{width:"15%"}},"Ore 1\xb0 anno"),r.a.createElement("th",{style:{width:"15%"}},"Ore 2\xb0 anno"),r.a.createElement("th",{style:{width:"20%"}},"Azioni")),c.map((function(t){var a=t.ritirato?"light font-italic":e.isInCorso(t)?"white":"transblue";return r.a.createElement("tr",{className:"bg-"+a},r.a.createElement(y.a,{title:t.nome+" "+t.cognome},r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},t.nome," ",t.cognome)),r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},t.monteOre.orePrimo),r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},t.monteOre.oreSecondo),r.a.createElement("td",null,r.a.createElement(y.a,{title:"Dettagli"},r.a.createElement("button",{type:"button",className:"btn btn-info circle-btn",onClick:function(){return We.push(b.b+"/docenti/"+t.idDocente)}},r.a.createElement("i",{className:"fa fa-info"}))),!t.ritirato&&r.a.createElement(y.a,{title:"Modifica"},r.a.createElement("button",{type:"button",className:"btn btn-warning text-white circle-btn ml-2",onClick:function(){return We.push(b.b+"/docenti/edit/"+t.idDocente)}},r.a.createElement("i",{className:"fa fa-pen"}))),!t.ritirato&&r.a.createElement(y.a,{title:"Segna come ritirato"},r.a.createElement("button",{type:"button",className:"btn btn-danger circle-btn ml-2",onClick:function(){return e.showDeleteConfirm(t)}},r.a.createElement("i",{className:"fa fa-user-times"}))),t.ritirato&&r.a.createElement(y.a,{title:"Reintegra nel corso"},r.a.createElement("button",{type:"button",className:"btn btn-danger circle-btn ml-2",onClick:function(){return e.backRetire(t)}},r.a.createElement("i",{className:"fa fa-reply"})))))})))))}}]),t}(r.a.PureComponent),ce=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){g.a.get(b.m+"/api/corsi").then((function(e){var t=e.data;a.setState({corsi:t})})),g.a.get(b.m+"/api/materie/getmateriebycorso/"+a.props.corso).then((function(e){var t=e.data;a.setState({materie:t})}))},a.changeNome=function(e){var t=e.target.value;a.setState({nome:t})},a.changeEmail=function(e){var t=e.target.value.trim();a.setState({email:t})},a.changeCognome=function(e){var t=e.target.value;a.setState({cognome:t})},a.changeCF=function(e){var t=e.target.value.trim();a.setState({CF:t})},a.aggiungiDocente=function(e){e.preventDefault();var t=a.state,n=t.nome,r=t.cognome,o=t.CF,c=t.email,i=t.corsiSel,l=t.materieSel;if(""!==n.trim()&&""!==r.trim()&&""!==o&&""!==c)if(16===o.length)if(l.length)if(i.length){var s=(new A).encode(o);J(b.m+"/api/docenti","post",{docente:{nome:n.trim(),cognome:r.trim(),cf:o,password:s,email:c,tenere:i.map((function(e){return{idCorso:e,idDocente:0}})),insegnare:l.map((function(e){return{idMateria:e,idDocente:0}}))}},(function(e){T.a.success("Docente creato con successo!"),We.push(b.b+"/docenti")}))}else k.a.error({title:"Errore!",content:"Scegliere almeno un corso."});else k.a.error({title:"Errore!",content:"Scegliere almeno una materia."});else k.a.error({title:"Errore!",content:"Codice Fiscale non valido."});else k.a.error({title:"Errore!",content:"Riempire tutti i campi."})},a.switchMateria=function(e){var t=a.state.materieSel.find((function(t){return t===e}))?a.state.materieSel.filter((function(t){return t!==e})):a.state.materieSel.concat(e);a.setState({materieSel:t})},a.switchCorso=function(e){var t=a.state.corsiSel.find((function(t){return t===e}))?a.state.corsiSel.filter((function(t){return t!==e})):a.state.corsiSel.concat(e);a.setState({corsiSel:t})},a.state={nome:"",cognome:"",CF:"",email:"",corsi:null,materie:null,corsiSel:[],materieSel:[]},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.nome,n=t.cognome,o=t.CF,c=t.email,i=t.materie,l=t.materieSel,s=t.corsi,m=t.corsiSel;if(!i||!s){var u=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",{className:"col px-5 py-4 right-block",id:"mainBlock"},r.a.createElement(N.a,{indicator:u}))}return i.length?r.a.createElement("div",{className:"col px-5 py-4 right-block"},r.a.createElement("h3",{className:"mb-2 text-center"},"Aggiungi un nuovo docente"),r.a.createElement("form",{onSubmit:this.aggiungiDocente},r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Nome"),r.a.createElement("input",{name:"name",type:"text",className:"form-control",value:a,onChange:this.changeNome})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Cognome"),r.a.createElement("input",{name:"surname",type:"text",className:"form-control",value:n,onChange:this.changeCognome}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"E-mail"),r.a.createElement("input",{name:"email",type:"email",className:"form-control",value:c,onChange:this.changeEmail})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Codice Fiscale"),r.a.createElement("input",{name:"cf",type:"text",className:"form-control",maxLength:16,value:o,onChange:this.changeCF}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Materie insegnate dal docente"),r.a.createElement("div",{className:"multiselect form-control p-0"},i.map((function(t){var a=!!l.find((function(e){return e===t.idMateria})),n=a?"checked":"";return r.a.createElement("label",{className:"option "+n},r.a.createElement(G.a,{className:"mr-2",onChange:function(){return e.switchMateria(t.idMateria)},checked:a})," ",t.nome)})))),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Corsi del docente"),r.a.createElement("div",{className:"multiselect form-control p-0"},s.map((function(t){var a=!!m.find((function(e){return e===t.idCorso})),n=a?"checked":"";return r.a.createElement("label",{className:"option "+n},r.a.createElement(G.a,{className:"mr-2",onChange:function(){return e.switchCorso(t.idCorso)},checked:a})," ",t.nome)}))))),r.a.createElement("button",{type:"submit",className:"btn btn-success text-uppercase w-100"},"Aggiungi docente"))):r.a.createElement("div",{className:"col px-5 py-4 right-block",id:"mainBlock"},"\xc8 necessario creare almeno una materia per poter inserire un nuovo docente.")}}]),t}(r.a.PureComponent),ie=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=a.props,t=e.corso,n=e.idDocente;g.a.get(b.m+"/api/lezioni/getlezionidocente/"+n+"/"+t).then((function(e){var t=e.data;a.setState({presenze:t.map((function(e){return e.ingresso=Object(b.e)(e.ingresso),e.uscita="00:00"===Object(b.h)(e.uscita)?"Non firmata":Object(b.e)(e.uscita),e}))})}))},a.changeEntrata=function(e,t){var n=e.target.value.trim(),r=a.state.editingList.map((function(e){return e.idPresenza===t&&(e.ingresso=n),e}));a.setState({editingList:r})},a.changeUscita=function(e,t){var n=e.target.value.trim(),r=a.state.editingList.map((function(e){return e.idPresenza===t&&(e.uscita=n),e}));a.setState({editingList:r})},a.startTimeEdit=function(e){a.setState({editingList:a.state.editingList.concat(e)})},a.animateTds=function(e,t){e.classList.add("edited"),t.classList.add("edited"),setTimeout((function(){e.classList.remove("edited"),t.classList.remove("edited")}),1e3)},a.confirmEdit=function(e,t,n){var r=a.state,o=r.editingList,c=r.presenze,i=o.find((function(t){return t.idPresenza===e}));if(Object(b.p)(i.ingresso)&&Object(b.p)(i.uscita)){var l=new Date;J(b.m+"/api/presenzedocente/"+e,"put",{idPresenza:e,ingresso:new Date("".concat(l.getFullYear(),"-").concat(l.getMonth()+1,"-").concat(l.getDay()," ").concat(i.ingresso)),uscita:new Date("".concat(l.getFullYear(),"-").concat(l.getMonth()+1,"-").concat(l.getDay()," ").concat(i.uscita)),idDocente:i.idDocente,idLezione:i.idLezione},(function(r){var l=r.data;if("success"===l.trim()){var s=c.map((function(t){return t.idPresenza===e?i:t}));a.setState({presenze:s,editingList:o.filter((function(e){return e.idPresenza!==i.idPresenza}))}),a.animateTds(t,n)}else k.a.error({title:"Errore!",content:l})}))}else k.a.error({title:"Errore!",content:"Orari non validi! (ore:minuti)",maskClosable:!0})},a.getCategorie=function(){var e=a.state.presenze,t=[];return e.forEach((function(e){-1===t.indexOf(e.lezione)&&t.push(e.lezione)})),t},a.changeFilter=function(e){a.setState({filter:""===e?null:e})},a.annullaModifica=function(e){a.setState({editingList:a.state.editingList.filter((function(t){return t.idPresenza!==e.idPresenza}))})},a.state={presenze:null,editingList:[],filter:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.presenze,n=t.editingList,o=t.filter,c=this.props.canEdit,i=$.a.Option;if(!a){var l=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",null,r.a.createElement(N.a,{indicator:l,className:"mt-3"}))}var s=o?a.filter((function(e){return e.lezione.toLowerCase()===o.toLowerCase()})):a;return r.a.createElement("div",{className:"mt-3"},r.a.createElement("h3",{className:"d-inline-block"},"Lezioni tenute dal docente"),r.a.createElement("div",{className:"float-right"},r.a.createElement("label",{className:"d-inline-block text-secondary mr-2"},"Filtra per materia: "),r.a.createElement($.a,{defaultValue:"",style:{width:150},onChange:this.changeFilter,showSearch:!0},r.a.createElement(i,{value:""},"Nessuna"),this.getCategorie().map((function(e){return r.a.createElement(i,{value:e},e)})))),r.a.createElement("div",{className:"clearfix"}),r.a.createElement("table",{className:"table table-bordered text-center"},r.a.createElement("tbody",null,r.a.createElement("tr",{className:"thead-light"},r.a.createElement("th",null,"Giorno"),r.a.createElement("th",null,"Entrata"),r.a.createElement("th",null,"Uscita"),r.a.createElement("th",null,"Lezione"),c&&r.a.createElement("th",{style:{width:"20%"}},"Azioni")),s.map((function(t){var a,o,i=n.find((function(e){return e.idPresenza===t.idPresenza}));return r.a.createElement("tr",null,r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},Object(b.f)(t.data)),r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate",ref:function(e){return a=e}},i?r.a.createElement("input",{type:"text",className:"form-control edit-time",value:i.ingresso,onChange:function(a){return e.changeEntrata(a,t.idPresenza)},onKeyUp:function(n){return Object(b.d)(n,(function(){return e.confirmEdit(t.idPresenza,a,o)}))}}):r.a.createElement("span",null,t.ingresso)),r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate",ref:function(e){return o=e}},i?r.a.createElement("input",{type:"text",className:"form-control edit-time",value:i.uscita,onChange:function(a){return e.changeUscita(a,t.idPresenza)},onKeyUp:function(n){return Object(b.d)(n,(function(){return e.confirmEdit(t.idPresenza,a,o)}))}}):r.a.createElement("span",null,t.uscita)),r.a.createElement(y.a,{title:t.lezione},r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},t.lezione)),c&&r.a.createElement("td",null,i?r.a.createElement("div",null,r.a.createElement(y.a,{title:"Annulla"},r.a.createElement("button",{type:"button",className:"btn btn-danger circle-btn",onClick:function(){return e.annullaModifica(t)}},r.a.createElement("i",{className:"fa fa-times"}))),r.a.createElement(y.a,{title:"Conferma modifiche"},r.a.createElement("button",{type:"button",className:"btn btn-success circle-btn ml-2",onClick:function(){return e.confirmEdit(t.idPresenza,a,o)}},r.a.createElement("i",{className:"fa fa-check"})))):r.a.createElement(y.a,{title:"Modifica orari"},r.a.createElement("button",{type:"button",className:"btn btn-orange circle-btn",onClick:function(){return e.startTimeEdit(t)}},r.a.createElement("i",{className:"fa fa-user-edit"})))))})))))}}]),t}(r.a.PureComponent),le=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=Number(a.props.match.params.id);isNaN(e)&&We.push(b.b),g.a.get(b.m+"/api/docenti/getdocentibyid/"+e).then((function(e){a.setState({docente:e.data})}))},a.toggleModal=function(){a.setState({modal:!a.state.modal})},a.downloadQR=function(){var e=a.state.docente,t=document.getElementById("qr-code-image").toDataURL("image/png").replace("image/png","image/octet-stream"),n=document.createElement("a");n.href=t,n.download="qrcode".concat(e.nome).concat(e.cognome,".png"),document.body.appendChild(n),n.click(),document.body.removeChild(n)},a.getQRCode=function(){var e=a.state.docente;return(new A).encode(e.cf)},a.isInCorso=function(e){return-1!==e.corsi.indexOf(a.props.corso)},a.state={docente:null,modal:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.docente,a=e.modal;if(!t){var n=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",{className:"col px-5 py-4 right-block",id:"mainBlock"},r.a.createElement(N.a,{indicator:n}))}return r.a.createElement("div",{className:"col px-5 py-4 right-block"},r.a.createElement("div",{className:"row mx-0"},r.a.createElement("div",{className:"col-12 col-md-6 pl-md-0 mb-2 mb-md-0"},r.a.createElement("div",{className:"p-3 bg-white border rounded"},t.ritirato&&r.a.createElement("span",{className:"border-text"},"Ritirato"),r.a.createElement("h4",{className:"text-uppercase mb-2 text-truncate"},t.nome," ",t.cognome),r.a.createElement("p",{className:"mb-0"},r.a.createElement("strong",null,"E-mail"),": ",t.email),r.a.createElement(R.a,{onClick:this.toggleModal,className:"float-right",type:"link"},"Mostra codice QR"),r.a.createElement("div",{className:"clearfix"}))),r.a.createElement("div",{className:"col-12 col-md-3 pr-md-0"},r.a.createElement("div",{className:"p-3 bg-white border rounded text-center",style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"}},r.a.createElement(X.a,{title:"Ore svolte",value:t.monteOre})))),r.a.createElement(ie,{idDocente:t.idDocente,canEdit:this.isInCorso(t),corso:this.props.corso}),r.a.createElement(k.a,{visible:a,maskClosable:!0,centered:!0,title:r.a.createElement("span",null,r.a.createElement("i",{className:"far fa-qrcode fa-fw fa-lg text-primary mr-2"}),"Codice QR del docente"),onCancel:this.toggleModal,width:350,onOk:this.downloadQR,footer:[r.a.createElement(R.a,{type:"primary",onClick:this.downloadQR},r.a.createElement("i",{className:"far fa-arrow-to-bottom mr-2"})," Salva codice"),r.a.createElement(R.a,{type:"default",onClick:this.toggleModal},"Chiudi")]},r.a.createElement("div",{className:"text-center"},r.a.createElement("p",null,"Salva il codice sottostante e condividilo con ",r.a.createElement("strong",null,t.nome," ",t.cognome,".")),r.a.createElement("div",{className:"my-2"},r.a.createElement(ae.a,{id:"qr-code-image",value:this.getQRCode(),size:200})))))}}]),t}(r.a.PureComponent),se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=Number(a.props.match.params.id);isNaN(e)&&We.push(b.b),g.a.get(b.m+"/api/docenti/getdocentibyid/"+e).then((function(e){var t=e.data;a.setState({docente:t,nome:t.nome,cognome:t.cognome,CF:t.cf,email:t.email,materieSel:t.materie&&t.materie.length?t.materie:[],corsiSel:t.corsi&&t.corsi.length?t.corsi:[]})})),g.a.get(b.m+"/api/materie/getmateriebycorso/"+a.props.corso).then((function(e){var t=e.data;a.setState({materie:t})})),g.a.get(b.m+"/api/corsi").then((function(e){var t=e.data;a.setState({corsi:t})}))},a.changeNome=function(e){var t=e.target.value;a.setState({nome:t})},a.changeEmail=function(e){var t=e.target.value.trim();a.setState({email:t})},a.changeCognome=function(e){var t=e.target.value;a.setState({cognome:t})},a.changeCF=function(e){var t=e.target.value.trim();a.setState({CF:t})},a.modificaDocente=function(e){e.preventDefault();var t=a.state,n=t.docente,r=t.nome,o=t.cognome,c=t.CF,i=t.email,l=t.corsiSel,s=t.materieSel;""!==r.trim()&&""!==o.trim()&&""!==c&&""!==i?s.length?l.length?16===c.length?J(b.m+"/api/docenti/"+a.props.match.params.id,"put",{docente:{idDocente:parseInt(a.props.match.params.id),nome:r.trim(),cognome:o.trim(),email:i,cf:c,tenere:l.map((function(e){return{idCorso:e,idDocente:n.idDocente}})),insegnare:s.map((function(e){return{idMateria:e,idDocente:n.idDocente}})),ritirato:n.ritirato}},(function(e){T.a.success("Docente modificato con successo!"),We.push(b.b+"/docenti")})):k.a.error({title:"Errore!",content:"Codice Fiscale non valido."}):k.a.error({title:"Errore!",content:"Scegliere almeno un corso."}):k.a.error({title:"Errore!",content:"Scegliere almeno una materia."}):k.a.error({title:"Errore!",content:"Riempire tutti i campi."})},a.switchMateria=function(e){var t=a.state.materieSel.find((function(t){return t===e}))?a.state.materieSel.filter((function(t){return t!==e})):a.state.materieSel.concat(e);a.setState({materieSel:t})},a.switchCorso=function(e){var t=a.state.corsiSel.find((function(t){return t===e}))?a.state.corsiSel.filter((function(t){return t!==e})):a.state.corsiSel.concat(e);a.setState({corsiSel:t})},a.state={docente:null,nome:"",cognome:"",CF:"",email:"",materie:[],materieSel:[],corsi:[],corsiSel:[]},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.nome,n=t.cognome,o=t.CF,c=t.docente,i=t.email,l=t.materie,s=t.materieSel,m=t.corsi,u=t.corsiSel;if(!c||!l.length||!m.length){var d=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",{className:"col px-5 py-4 right-block",id:"mainBlock"},r.a.createElement(N.a,{indicator:d}))}return r.a.createElement("div",{className:"col px-5 py-4 right-block"},r.a.createElement("h3",{className:"mb-2 text-center"},"Modifica di un docente"),r.a.createElement("form",{onSubmit:this.modificaDocente},r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Nome"),r.a.createElement("input",{name:"name",type:"text",className:"form-control",value:a,onChange:this.changeNome})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Cognome"),r.a.createElement("input",{name:"surname",type:"text",className:"form-control",value:n,onChange:this.changeCognome}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"E-mail"),r.a.createElement("input",{name:"email",type:"email",className:"form-control",value:i,onChange:this.changeEmail})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Codice Fiscale"),r.a.createElement("input",{name:"cf",type:"text",className:"form-control",maxLength:16,value:o,onChange:this.changeCF}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Materie insegnate dal docente"),r.a.createElement("div",{className:"multiselect form-control p-0"},l.map((function(t){var a=!!s.find((function(e){return e===t.idMateria})),n=a?"checked":"";return r.a.createElement("label",{className:"option "+n},r.a.createElement(G.a,{className:"mr-2",onChange:function(){return e.switchMateria(t.idMateria)},checked:a})," ",t.nome)})))),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Corsi del docente"),r.a.createElement("div",{className:"multiselect form-control p-0"},m.map((function(t){var a=!!u.find((function(e){return e===t.idCorso})),n=a?"checked":"";return r.a.createElement("label",{className:"option "+n},r.a.createElement(G.a,{className:"mr-2",onChange:function(){return e.switchCorso(t.idCorso)},checked:a})," ",t.nome)}))))),r.a.createElement("button",{type:"submit",className:"btn btn-success text-uppercase w-100"},"Modifica docente")))}}]),t}(r.a.PureComponent),me=a(19),ue=a.n(me),de=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=Number(a.props.match.params.id);isNaN(e)&&We.push(b.b),g.a.get(b.m+"/api/studenti/getstudentibyid/"+e).then((function(e){var t=e.data;a.setState({studente:t,nome:t.nome,cognome:t.cognome,CF:t.cf,dataNascita:Object(b.f)(t.dataNascita),email:t.email})}))},a.changeNome=function(e){var t=e.target.value;a.setState({nome:t})},a.changeEmail=function(e){var t=e.target.value.trim();a.setState({email:t})},a.changeCognome=function(e){var t=e.target.value;a.setState({cognome:t})},a.changeData=function(e){a.setState({dataNascita:e})},a.changeCF=function(e){var t=e.target.value.trim();a.setState({CF:t})},a.modificaStudente=function(e){e.preventDefault();var t=a.state,n=t.nome,r=t.cognome,o=t.dataNascita,c=t.CF,i=t.email,l=t.studente;""!==n.trim()&&""!==r.trim()&&""!==o&&""!==c&&""!==i?16===c.length?J(b.m+"/api/studenti/"+l.idStudente,"put",{studente:{idStudente:l.idStudente,nome:n.trim(),cognome:r.trim(),email:i,cf:c,idCorso:a.props.corso,annoFrequentazione:l.annoFrequentazione,dataNascita:Object(b.g)(o,!0),ritirato:l.ritirato,promosso:l.promosso}},(function(e){T.a.success("Studente modificato con successo!"),We.push(b.b+"/studenti")})):k.a.error({title:"Errore!",content:"Codice Fiscale non valido."}):k.a.error({title:"Errore!",content:"Riempire tutti i campi."})},a.state={studente:null,nome:"",cognome:"",dataNascita:"",CF:"",email:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.nome,n=t.cognome,o=t.dataNascita,c=t.CF,i=t.studente,l=t.email;if(!i){var s=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",{className:"col px-5 py-4 right-block",id:"mainBlock"},r.a.createElement(N.a,{indicator:s}))}return r.a.createElement("div",{className:"col px-5 py-4 right-block"},r.a.createElement("h3",{className:"mb-2 text-center"},"Modifica di uno studente"),r.a.createElement("form",{onSubmit:this.modificaStudente},r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Nome"),r.a.createElement("input",{name:"name",type:"text",className:"form-control",value:a,onChange:this.changeNome})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Cognome"),r.a.createElement("input",{name:"surname",type:"text",className:"form-control",value:n,onChange:this.changeCognome}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Data di nascita"),r.a.createElement(W.a,{locale:Q.a,className:"w-100 select-date",onChange:function(t,a){return e.changeData(a)},format:"DD-MM-YYYY",defaultValue:ue()(o,"DD-MM-YYYY")})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"E-mail"),r.a.createElement("input",{name:"email",type:"email",className:"form-control",value:l,onChange:this.changeEmail})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Codice Fiscale"),r.a.createElement("input",{name:"cf",type:"text",className:"form-control",maxLength:16,value:c,onChange:this.changeCF}))),r.a.createElement("button",{type:"submit",className:"btn btn-success text-uppercase w-100"},"Modifica studente")))}}]),t}(r.a.PureComponent),fe=a(229),pe=a.n(fe),Ee=[{label:"Nome",field:"nome"},{label:"Cognome",field:"cognome"},{label:"Codice Fiscale",field:"cf"},{label:"Data di nascita",field:"dataNascita"},{label:"E-mail",field:"email"}],ge=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){Object(b.l)()},a.splitCSV=function(e){return e.match(/(["'])(?:(?=(\\?))\2.)*?\1/g).map((function(e){return e.replace(/["]/g,"")}))},a.renderOptions=function(){var e=a.state.fileContent.split("\n");return a.splitCSV(e[0]).map((function(e,t){return""===e?null:r.a.createElement("option",{value:t},e)}))},a.changeVarPos=function(e,t){var n=e.target.value,r=a.state.fields;r[t]=n,a.setState({fields:r})},a.readFile=function(e){var t=new FileReader;return t.onload=function(e){a.setState({fileContent:String(e.target.result).trim()}),k.a.info({width:500,centered:!0,title:"Selezionare i campi da abbinare",icon:r.a.createElement(v.a,{type:"api",style:{color:"var(--success)"}}),maskClosable:!0,content:r.a.createElement("div",{style:{marginLeft:-38}},r.a.createElement("div",{className:"row mt-3 px-0"},r.a.createElement("div",{className:"col-4"},r.a.createElement("label",{className:"mt-2"},"Classe: ")),r.a.createElement("div",{className:"col"},r.a.createElement("select",{className:"custom-select pointer",style:{height:35},onChange:function(e){return a.changeVarPos(e,"annoFrequentazione")}},r.a.createElement("option",{value:"1"},"Primo anno"),r.a.createElement("option",{value:"2"},"Secondo anno")))),Ee.map((function(e){return r.a.createElement("div",{className:"row mt-3 px-0"},r.a.createElement("div",{className:"col-4"},r.a.createElement("label",{className:"mt-2"},e.label,": ")),r.a.createElement("div",{className:"col"},r.a.createElement("select",{className:"custom-select pointer",style:{height:35},onChange:function(t){return a.changeVarPos(t,e.field)}},a.renderOptions())))}))),onOk:a.showImportPreview,okText:"Prosegui"})},t.readAsText(e,"ISO-8859-1"),!1},a.showImportPreview=function(){var e=a.state,t=e.fileContent,n=e.fields,r=t.split("\n"),o=[],c=document.getElementById("popup");r.forEach((function(e){var t=a.splitCSV(e),r={idCorso:a.props.corso,nome:Object(b.c)(t[n.nome]),cognome:Object(b.c)(t[n.cognome]),annoFrequentazione:parseInt(n.annoFrequentazione),cf:t[n.cf],dataNascita:Object(b.g)(t[n.dataNascita],!0),email:t[n.email],password:t[n.cf]};o.push(r)})),a.setState({addList:o}),c.classList.add("show")},a.hidePopup=function(){var e=document.getElementById("popup");a.setState({addList:[],fields:{nome:0,cognome:0,cf:0,dataNascita:0,email:0,annoFrequentazione:0}}),e.classList.remove("show")},a.confirmImport=function(){J(b.m+"/api/studenti","post",{studenti:a.state.addList},(function(e){T.a.success("Importazione eseguita con successo!"),We.push(b.b+"/studenti")}))},a.state={addList:[],fileContent:"",fields:{nome:0,cognome:0,cf:0,dataNascita:0,email:0,annoFrequentazione:1}},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state.addList;return r.a.createElement("div",{className:"col p-5 right-block",id:"mainBlock",style:{flexDirection:"column"}},r.a.createElement("h3",{className:"text-center w-100"},"Importa studenti da CSV"),r.a.createElement("label",null,"Prima di proseguire, esportare il CSV da ",r.a.createElement("strong",null,"Sifer"),"."),r.a.createElement("div",{className:"uploader mt-2 w-100"},r.a.createElement(pe.a,{accept:".csv",beforeUpload:function(t){return e.readFile(t)}},r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement("i",{className:"fa fa-file-csv fa-5x"})),r.a.createElement("p",{className:"ant-upload-text"},"Clicca o trascina un file su quest'aerea"),r.a.createElement("p",{className:"ant-upload-hint"},"Assicurati che il file abbia l'estensione ",r.a.createElement("strong",null,".csv"),"."))),r.a.createElement("div",{id:"popup",className:"preview px-0"},r.a.createElement("div",{className:"w-100 h-100 inner overflow-auto px-5 py-4"},r.a.createElement("h3",{className:"mb-3 text-center"},"Anteprima dati da importare"),t.length&&r.a.createElement("table",{className:"table table-bordered text-center"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nome"),r.a.createElement("th",null,"Cognome"),r.a.createElement("th",null,"Anno"),r.a.createElement("th",null,"Codice Fiscale"),r.a.createElement("th",null,"Data di Nascita"),r.a.createElement("th",{style:{width:"25%"}},"E-mail")),t.map((function(e){return r.a.createElement("tr",null,r.a.createElement(y.a,{title:e.nome},r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},e.nome)),r.a.createElement(y.a,{title:e.cognome},r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},e.cognome)),r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},e.annoFrequentazione),r.a.createElement(y.a,{title:e.cf},r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},e.cf)),r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},Object(b.f)(e.dataNascita)),r.a.createElement(y.a,{title:e.email},r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},e.email)))}))))),r.a.createElement("div",{className:"bottom-side p-3 text-right"},r.a.createElement("button",{className:"btn btn-danger mr-2",onClick:this.hidePopup},"Annulla"),r.a.createElement("button",{className:"btn btn-success",onClick:this.confirmImport},"Conferma importazione"))))}}]),t}(r.a.PureComponent),he=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){g.a.get(b.m+"/api/materie/getmateriebycorso/"+a.props.corso).then((function(e){a.setState({materie:e.data})}))},a.showHideModal=function(){a.setState({showModal:!a.state.showModal,nomeMateria:""})},a.hideEditModal=function(){a.setState({showEditModal:!1,nomeEdit:"",materiaEdit:null})},a.showEditModal=function(e){a.setState({showEditModal:!0,nomeEdit:e.nome,materiaEdit:e})},a.aggiungiMateria=function(e){e.preventDefault();var t=a.state.nomeMateria;""!==t.trim()?J(b.m+"/api/materie/"+a.props.corso,"post",{materia:{nome:t.trim()}},(function(e){var t=e.data;a.setState({materie:t}),T.a.success("Materia aggiunta con successo!")}),(function(){a.setState({materie:null,showModal:!1})})):k.a.error({title:"Errore!",content:"Riempire tutti i campi."})},a.modificaMateria=function(e){e.preventDefault();var t=a.state,n=t.nomeEdit,r=t.materiaEdit;""!==n?J(b.m+"/api/materie/"+r.idMateria,"put",{materia:{idMateria:r.idMateria,nome:n.trim()}},(function(e){var t=e.data;a.setState({materie:t,materiaEdit:null,nomeEdit:""}),T.a.success("Materia modificata con successo!")}),(function(){a.setState({materie:null,showEditModal:!1})})):k.a.error({title:"Errore!",content:"Riempire tutti i campi."})},a.changeNome=function(e){var t=e.target.value;a.setState({nomeMateria:t})},a.changeNomeEdit=function(e){var t=e.target.value;a.setState({nomeEdit:t})},a.state={materie:null,showModal:!1,nomeMateria:"",showEditModal:!1,materiaEdit:null,nomeEdit:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.materie,n=t.nomeMateria,o=t.showModal,c=t.showEditModal,i=t.materiaEdit,l=t.nomeEdit;if(!a){var s=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",{className:"col px-5 py-4 right-block",id:"mainBlock"},r.a.createElement(N.a,{indicator:s}))}return r.a.createElement("div",{className:"col px-5 py-4 right-block"},r.a.createElement("h3",{className:"mb-3 text-center"},"Lista delle materie"),r.a.createElement("button",{className:"btn btn-success float-right mb-3",type:"button",onClick:this.showHideModal},r.a.createElement("i",{className:"fal fa-plus fa-fw"})," Aggiungi materia"),r.a.createElement("div",{className:"clearfix"}),r.a.createElement("div",{className:"row mx-0"},a.map((function(t){return r.a.createElement("div",{className:"col-12 col-md-3 col-lg-3 p-0 p-md-1 mb-1"},r.a.createElement("div",{className:"border rounded p-2"},r.a.createElement(y.a,{title:"Modifica"},r.a.createElement("span",{onClick:function(){return e.showEditModal(t)},className:"float-right link-warning ml-2"},r.a.createElement("i",{className:"fa fa-pen"}))),r.a.createElement("div",{className:"text-truncate"},t.nome)))}))),r.a.createElement(k.a,{title:"Aggiungi una materia",visible:o,footer:[r.a.createElement(R.a,{type:"primary",onClick:this.aggiungiMateria},"Aggiungi"),r.a.createElement(R.a,{type:"default",onClick:this.showHideModal},"Annulla")],onCancel:this.showHideModal},r.a.createElement("form",{onSubmit:this.aggiungiMateria},r.a.createElement("div",{className:"form-group mb-0"},r.a.createElement("label",{className:"text-secondary"},"Nome della materia"),r.a.createElement("input",{type:"text",value:n,onChange:this.changeNome,className:"form-control"})),r.a.createElement("input",{type:"submit",className:"d-none"}))),i&&r.a.createElement(k.a,{title:"Modifica di una materia",visible:c,footer:[r.a.createElement(R.a,{type:"primary",onClick:this.modificaMateria},"Modifica"),r.a.createElement(R.a,{type:"default",onClick:this.hideEditModal},"Annulla")],onCancel:this.hideEditModal},r.a.createElement("form",{onSubmit:this.modificaMateria},r.a.createElement("div",{className:"form-group mb-0"},r.a.createElement("label",{className:"text-secondary"},"Nome della materia"),r.a.createElement("input",{type:"text",value:l,onChange:this.changeNomeEdit,className:"form-control"})),r.a.createElement("input",{type:"submit",className:"d-none"}))))}}]),t}(r.a.PureComponent),be=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).scaleImage=function(){a.props.scalable&&a.setState({scaled:!a.state.scaled})},a.state={scaled:!1,coords:[0,0]},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.src,a=e.width,n=e.height,o=e.scalable,c=e.style,i=this.state.scaled,l=o?"scalable ":"",s=i?"scaled":"",m=o?"Cliccare per "+(i?"rimpicciolire":"ingrandire"):null;return r.a.createElement(y.a,{title:m},r.a.createElement("img",{alt:"scale",style:c,className:"imagescale "+l+s,src:t,width:a,height:n,onClick:this.scaleImage}))}}]),t}(r.a.PureComponent),ve=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=a.props,t=e.corso,n=e.anno;g.a.get(b.m+"/api/calendari/"+t+"/"+n).then((function(e){var t=e.data;a.setState({calendarId:t.idGoogleCalendar,actualId:t.idGoogleCalendar,calendar:t})}))},a.changeID=function(e){var t=e.target.value;a.setState({calendarId:t})},a.saveConfig=function(e){e.preventDefault();var t=a.props,n=t.corso,o=t.anno,c=a.state,i=c.calendarId,l=c.calendar;""!==i?J(b.m+"/api/calendari","post",{calendario:{idCalendario:l?l.idCalendario:"0",idCorso:n,anno:o,idGoogleCalendar:i}},(function(e){var t=e.data,n=Y.a.Panel;t.length&&k.a.warning({title:"Attenzione!",content:r.a.createElement("div",{style:{marginLeft:-38}},r.a.createElement("p",{className:"text-muted"},"I seguenti eventi sono stati scartati durante l'inserimento. Assicurati che siano scritti nel giusto modo (",r.a.createElement("strong",null,"LUOGO: DOCENTE - MATERIA"),"), e che i docenti siano stati creati."),r.a.createElement(Y.a,{bordered:!1},r.a.createElement(n,{header:"Espandi per visualizzare gli eventi",key:1},t.map((function(e){return r.a.createElement("span",{className:"d-block"},r.a.createElement("strong",null,Object(b.f)(e.date)," (",e.inizio," - ",e.fine,")"),": ",e.summary)})))))}),a.setState({actualId:i}),T.a.success("Configurazione calendario salvata!")}),(function(){a.setState({actualId:null})})):k.a.error({title:"Errore!",content:"Riempire tutti i campi."})},a.state={calendarId:null,calendar:null,actualId:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.calendarId,a=e.actualId;if(null===t){var n=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",{className:"text-center"},r.a.createElement(N.a,{indicator:n}))}return r.a.createElement("form",{onSubmit:this.saveConfig},r.a.createElement("div",{className:"form-group row mx-1"},r.a.createElement("div",{className:"col px-0"},r.a.createElement("label",{className:"text-secondary"},"ID Calendario"),r.a.createElement("input",{name:"calendarID",type:"text",className:"form-control",value:t,onChange:this.changeID}))),r.a.createElement("button",{type:"submit",className:"btn btn-success float-right mr-1 mb-3"},null===a&&r.a.createElement(v.a,{type:"loading",className:"mr-2 loadable-btn",spin:!0}),"Salva configurazione"),r.a.createElement("div",{className:"clearfix"}),r.a.createElement("div",{className:"p-1"},r.a.createElement("h4",null,"Anteprima visualizzazione"),r.a.createElement(j,{calendarId:a})))}}]),t}(r.a.PureComponent),Ne=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).showHelp=function(){k.a.info({width:700,style:{top:24},centered:!1,maskClosable:!0,icon:r.a.createElement(v.a,{type:"question-circle",style:{marginTop:6,fontSize:28,color:"orange"}}),okText:"Ho capito",content:r.a.createElement("div",{className:"text-justify"},r.a.createElement("strong",null,"Dove mi trovo?"),r.a.createElement("p",null,"In questa pagina potrai configurare il calendario dal quale verranno caricate le lezioni del corso."),r.a.createElement("strong",null,"Come si configura il calendario?"),r.a.createElement("p",null,"Per configurare il calendario avrai bisogno di un codice univoco, che ti permetter\xe0 di collegare il calendario al sito."),r.a.createElement("strong",null,"ID del calendario"),r.a.createElement("p",null,"Per trovare l'ID (identificativo) del calendario, baster\xe0 effettuare l'accesso su ",r.a.createElement("a",{href:"https://calendar.google.com/",target:"_blank",rel:"noopener noreferrer"},"Google Calendar ",r.a.createElement("i",{className:"far fa-external-link"}))," con un account che abbia integrato il calendario del corso. Bisogner\xe0 poi premere sul simbolo ",r.a.createElement("i",{className:"far fa-cog"})," in alto a destra e successivamente su ",r.a.createElement("strong",null,"Impostazioni")," nel menu che comparir\xe0. Scorrere quindi la lista a sinistra della pagina, e cliccare sul calendario che si desidera integrare. Recarsi sotto la voce ",r.a.createElement("strong",null,"Integra calendario")," e copiare (subito in basso) il codice identificativo del calendario (",r.a.createElement("strong",null,"ID calendario"),"), per poi incollarlo in questa pagina di configurazione."),r.a.createElement("p",null,r.a.createElement("u",null,"Assicurati che il calendario sia ",r.a.createElement("strong",null,"pubblico"),", altrimenti non sar\xe0 possibile visualizzarlo.")),r.a.createElement("strong",{className:"d-block mb-2"},"Galleria immagini"),r.a.createElement(be,{src:"https://i.imgur.com/e3H0hXX.png",height:100,scalable:!0}))}),setTimeout((function(){return document.getElementsByClassName("ant-modal-wrap")[0].scrollTo(0,0)}),100)},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=H.a.TabPane;return r.a.createElement("div",{className:"col px-5 py-4 right-block"},r.a.createElement("h3",{className:"mb-2 text-center"},"Configurazione calendario",r.a.createElement(y.a,{title:"Informazioni"},r.a.createElement("button",{type:"button",className:"btn btn-outline-info circle-btn float-right",onClick:this.showHelp},r.a.createElement("i",{className:"fa fa-question"}))),r.a.createElement("div",{className:"clearfix"})),r.a.createElement(H.a,null,r.a.createElement(e,{tab:"Primo anno",key:"1"},r.a.createElement(ve,{anno:1,corso:this.props.corso})),r.a.createElement(e,{tab:"Secondo anno",key:"2"},r.a.createElement(ve,{anno:2,corso:this.props.corso}))))}}]),t}(r.a.PureComponent),Ce=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"mainBlock",className:"col"},r.a.createElement("div",{className:"text-center text-grey w-100"},r.a.createElement("i",{className:"fal fa-exclamation-triangle mb-2",style:{fontSize:150}}),r.a.createElement("h1",{className:"mb-2 text-grey font-weight-normal"},"Errore 404"),r.a.createElement("p",{style:{fontSize:20}},"La pagina che stati cercando non esiste."),r.a.createElement("button",{onClick:function(){return We.push(e.props.goTo)},type:"button",className:"btn btn-blue btn-lg text-uppercase"},r.a.createElement("i",{className:"fa fa-shield-check fa-lg fa-fw mr-2"}),"Torna al sicuro")))}}]),t}(r.a.PureComponent),ye=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).requestCodeChange=function(e){J(b.m+"/api/corsi/generacodiceanno","post",{anno:e},(function(e){var t=e.data;k.a.info({title:"Codice generato",content:r.a.createElement("span",null,"Il nuovo codice \xe8: ",r.a.createElement("strong",null,t))})}))},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col px-5 py-4 right-block"},r.a.createElement("h3",{className:"mb-4 text-center"},"Gestione firma da casa"),r.a.createElement("div",{className:"py-4 px-3 text-justify border rounded shadow-sm mb-4"},r.a.createElement("div",{className:"row mx-0"},r.a.createElement("div",{className:"col-1 text-left"},r.a.createElement("i",{className:"fal fa-question-circle fa-3x text-warning"})),r.a.createElement("div",{className:"col"},r.a.createElement("p",null,"Nel caso in cui ce ne fosse bisogno, \xe8 possibile dare agli studenti la possibilit\xe0 di firmare le loro presenze da casa."),r.a.createElement("p",null,"Tramite ",r.a.createElement("a",{href:b.m+"/#/firmacasa",target:"_blank",rel:"noopener noreferrer"},"questo url")," (da condividere con gli studenti) \xe8 possibile eseguire tale operazione, ma per farlo \xe8 necessario generare, tramite la pagina corrente, un codice univoco che permetta l'accesso alla schermata. Baster\xe0 quindi digitarlo nell'apposito campo di testo e si acceder\xe0 alla lista degli studenti presenti nella classe."),r.a.createElement("p",null,"Lo studente sar\xe0 poi libero di scegliere il proprio nome nella lista, e confermando la propria identit\xe0 tramite password avr\xe0 la possibilit\xe0 di firmare."),r.a.createElement("p",{className:"mb-0"},"Il codice sar\xe0 differente in base all'anno di appartenenza.")))),r.a.createElement("strong",{className:"mr-2"},"Genera codice:"),r.a.createElement("button",{className:"btn btn-blue mr-2",onClick:function(){return e.requestCodeChange(1)}},"Primo anno"),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.requestCodeChange(2)}},"Secondo anno"))}}]),t}(r.a.PureComponent),xe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=a.props.coordinatore;g.a.get(b.m+"/api/lezioni/getstudentiatlezione/"+e.idCorso+"/1").then((function(e){if("string"===typeof e.data)a.setState({noLezione1:!0});else{var t=e.data;a.setState({lezioneCorrente1:t})}})),g.a.get(b.m+"/api/lezioni/getstudentiatlezione/"+e.idCorso+"/2").then((function(e){if("string"===typeof e.data)a.setState({noLezione2:!0});else{var t=e.data;a.setState({lezioneCorrente2:t})}}))},a.getContenuto=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"col-12 col-md-6 mb-2 px-2"},r.a.createElement("div",{className:"p-3 bg-white border rounded"},r.a.createElement("h4",{className:"text-uppercase mb-2 text-truncate"},e.lezione.titolo),r.a.createElement("span",{className:"text-muted"},Object(b.e)(e.lezione.oraInizio)," - ",Object(b.e)(e.lezione.oraFine)))),r.a.createElement("h6",{className:"mt-3 mb-2 ml-2"},"Studenti presenti"),r.a.createElement("div",{className:"row mx-0"},e.studenti.map((function(e){return r.a.createElement("div",{className:"col-12 col-md-3 mb-md-0 p-1 p-md-2"},r.a.createElement("div",{className:"border rounded p-2 text-truncate"},r.a.createElement("div",null,e.nome," ",e.cognome),r.a.createElement("span",{className:"text-muted"},"Entrata: ",Object(b.e)(e.oraIngresso))))}))))},a.state={lezioneCorrente1:null,noLezione1:!1,lezioneCorrente2:null,noLezione2:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.coordinatore,t=this.state,a=t.lezioneCorrente1,n=t.lezioneCorrente2,o=t.noLezione1,c=t.noLezione2,i=H.a.TabPane,l=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",{className:"col px-5 py-4 right-block"},r.a.createElement("h3",{className:"mb-3 text-center"},"Home coordinatore"),r.a.createElement("div",{className:"col-12 col-md-6 mb-2 mb-md-0 p-3 bg-white border rounded"},r.a.createElement("span",{className:"border-text"},"Dati personali"),r.a.createElement("h4",{className:"text-uppercase mb-2 text-truncate"},e.nome," ",e.cognome),"Codice di accesso alla firma: ",r.a.createElement("strong",null,e.codiceCorso)),r.a.createElement("h4",{className:"mt-3 mb-2"},"Lezioni in corso"),r.a.createElement(H.a,null,r.a.createElement(i,{tab:"Primo anno",key:"1"},!a&&!o&&r.a.createElement("div",{className:"text-center"},r.a.createElement(N.a,{indicator:l})),!a&&o&&r.a.createElement("div",{className:"text-center"},"Non ci sono lezioni in corso."),a&&!o&&this.getContenuto(a)),r.a.createElement(i,{tab:"Secondo anno",key:"2"},!n&&!c&&r.a.createElement("div",{className:"text-center"},r.a.createElement(N.a,{indicator:l})),!n&&c&&r.a.createElement("div",{className:"text-center"},"Non ci sono lezioni in corso."),n&&!c&&this.getContenuto(n))))}}]),t}(r.a.PureComponent),we=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).componentWillUnmount=function(){sessionStorage.removeItem("adminSession")},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=sessionStorage.getItem("adminSession");if(!e)return r.a.createElement(U,null);var t=JSON.parse(e);return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(f.b,{history:We},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3 bg-blue p-0 menu"},r.a.createElement(D,{idCorso:t.idCorso}),r.a.createElement(p.a,{className:"router-link",activeClassName:"active",onClick:function(){return We.push(b.b+"/home")},to:b.b+"/home"},r.a.createElement("span",null,r.a.createElement("i",{className:"fal fa-home-alt fa-fw mr-1"})," Home")),r.a.createElement(p.a,{className:"router-link",activeClassName:"active",onClick:function(){return We.push(b.b+"/studenti")},to:b.b+"/studenti"},r.a.createElement("span",null,r.a.createElement("i",{className:"fal fa-users-class fa-fw mr-1"})," Studenti")),r.a.createElement(p.a,{className:"router-link",activeClassName:"active",onClick:function(){return We.push(b.b+"/docenti")},to:b.b+"/docenti"},r.a.createElement("span",null,r.a.createElement("i",{className:"fal fa-chalkboard-teacher fa-fw mr-1"})," Docenti")),r.a.createElement(p.a,{className:"router-link",activeClassName:"active",onClick:function(){return We.push(b.b+"/materie")},to:b.b+"/materie"},r.a.createElement("span",null,r.a.createElement("i",{className:"fal fa-list-alt fa-fw mr-1"})," Materie")),r.a.createElement(p.a,{className:"router-link",activeClassName:"active",onClick:function(){return We.push(b.b+"/config")},to:b.b+"/config"},r.a.createElement("span",null,r.a.createElement("i",{className:"fal fa-calendar-edit fa-fw mr-1"})," Configura calendario")),r.a.createElement(p.a,{className:"router-link",activeClassName:"active",onClick:function(){return We.push(b.b+"/codicefirma")},to:b.b+"/codicefirma"},r.a.createElement("span",null,r.a.createElement("i",{className:"fal fa-house-signal fa-fw mr-1"})," Firma da casa")),r.a.createElement(p.a,{className:"router-link",activeClassName:"active",onClick:function(){sessionStorage.removeItem("adminSession"),We.push(b.b)},exact:!0,to:b.b+"/login"},r.a.createElement("span",null,r.a.createElement("i",{className:"fal fa-power-off fa-fw mr-1"})," Esci")),r.a.createElement(I,{inMenu:!0})),r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:b.b,render:function(){return We.push(b.b+"/home"),null}}),r.a.createElement(f.a,{exact:!0,path:b.b+"/home",render:function(){return r.a.createElement(xe,{coordinatore:t})}}),r.a.createElement(f.a,{exact:!0,path:b.b+"/studenti",render:function(){return r.a.createElement(_,{corso:t.idCorso})}}),r.a.createElement(f.a,{exact:!0,path:b.b+"/studenti/new",render:function(){return r.a.createElement(K,{corso:t.idCorso})}}),r.a.createElement(f.a,{exact:!0,path:b.b+"/studenti/import",render:function(){return r.a.createElement(ge,{corso:t.idCorso})}}),r.a.createElement(f.a,{exact:!0,path:b.b+"/studenti/:id",render:function(e){return r.a.createElement(ne,Object.assign({},e,{corso:t.idCorso}))}}),r.a.createElement(f.a,{exact:!0,path:b.b+"/studenti/edit/:id",render:function(e){return r.a.createElement(de,Object.assign({},e,{corso:t.idCorso}))}}),r.a.createElement(f.a,{exact:!0,path:b.b+"/docenti",render:function(){return r.a.createElement(oe,{corso:t.idCorso})}}),r.a.createElement(f.a,{exact:!0,path:b.b+"/docenti/new",render:function(){return r.a.createElement(ce,{corso:t.idCorso})}}),r.a.createElement(f.a,{exact:!0,path:b.b+"/docenti/:id",render:function(e){return r.a.createElement(le,Object.assign({},e,{corso:t.idCorso}))}}),r.a.createElement(f.a,{exact:!0,path:b.b+"/docenti/edit/:id",render:function(e){return r.a.createElement(se,Object.assign({},e,{corso:t.idCorso}))}}),r.a.createElement(f.a,{exact:!0,path:b.b+"/materie",render:function(){return r.a.createElement(he,{corso:t.idCorso})}}),r.a.createElement(f.a,{exact:!0,path:b.b+"/config",render:function(){return r.a.createElement(Ne,{corso:t.idCorso})}}),r.a.createElement(f.a,{exact:!0,path:b.b+"/codicefirma",render:function(){return r.a.createElement(ye,null)}}),r.a.createElement(f.a,{render:function(){return r.a.createElement(Ce,{goTo:b.b})}})))))}}]),t}(r.a.Component),Se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){setInterval((function(){a.setState({code:null}),a.reloadCode()}),2e4)},a.reloadCode=function(){g.a.get("http://mygraphic.altervista.org/reg/api?codice&studente="+a.props.studentId).then((function(e){a.setState({code:e.data})}))},a.state={code:null},a.reloadCode(),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.code;if(!e){var t=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",null,r.a.createElement(N.a,{indicator:t}))}return r.a.createElement("div",{className:"text-center"},r.a.createElement("h5",{className:"mb-4 font-weight-normal text-black underline"},"Scannerizza questo codice"),r.a.createElement(ae.a,{value:e,size:200}))}}]),t}(r.a.PureComponent),Oe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){},a.state={calendar:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){if(!this.state.calendar){var e=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",{className:"col px-5 py-4 right-block",id:"mainBlock"},r.a.createElement(N.a,{indicator:e}))}return r.a.createElement("div",{className:"p-3"},r.a.createElement("h5",{className:"text-center text-black w-100"},"Calendario del mese"),r.a.createElement(j,{calendarId:"ckhj7iqj3msae4i4ietm5ip1cg@group.calendar.google.com"}))}}]),t}(r.a.PureComponent),ke=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){localStorage.setItem("student",JSON.stringify({idStudente:1,idCorso:1,nome:"Leonardo",cognome:"Grandolfo",annoFrequentazione:1,cf:"GRNLRD99D17L219L",dataNascita:"17-04-1999",code:"CIAO-GGG"}))},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=localStorage.getItem("student"),t=JSON.parse(e);return r.a.createElement("div",{className:"container-fluid px-0"},r.a.createElement(f.b,{history:We},r.a.createElement("div",{className:"main-screen overflow-auto",id:"mainBlock"},r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/userprofile",render:function(){return We.push("/userprofile/qrcode"),null}}),r.a.createElement(f.a,{exact:!0,path:"/userprofile/qrcode",render:function(){return r.a.createElement(Se,{studentId:t.idStudente})}}),r.a.createElement(f.a,{exact:!0,path:"/userprofile/calendar",render:function(){return r.a.createElement(Oe,{student:t})}}))),r.a.createElement("div",{className:"bottom-menu"},r.a.createElement(p.a,{className:"router-link",activeClassName:"active",onClick:function(){return We.push("/userprofile/presenze")},to:"/userprofile/presenze"},r.a.createElement("span",null,r.a.createElement("i",{className:"far fa-exclamation-circle fa-fw fa-2x mb-2"}),"Presenze")),r.a.createElement(p.a,{className:"router-link",activeClassName:"active",onClick:function(){return We.push("/userprofile/voti")},to:"/userprofile/voti"},r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-stars fa-fw fa-2x mb-2"}),"Voti")),r.a.createElement(p.a,{className:"router-link",activeClassName:"active",onClick:function(){return We.push("/userprofile/qrcode")},to:"/userprofile/qrcode"},r.a.createElement("span",null,r.a.createElement("i",{className:"fal fa-qrcode fa-fw fa-2x mb-2"}),"Codice QR")),r.a.createElement(p.a,{className:"router-link",activeClassName:"active",onClick:function(){return We.push("/userprofile/calendar")},to:"/userprofile/calendar"},r.a.createElement("span",null,r.a.createElement("i",{className:"fal fa-calendar fa-fw fa-2x mb-2"}),"Lezioni")),r.a.createElement(p.a,{className:"router-link",activeClassName:"active",onClick:function(){return We.push("/userprofile/account")},to:"/userprofile/account"},r.a.createElement("span",null,r.a.createElement("i",{className:"far fa-user fa-fw fa-2x mb-2"}),"Profilo")))))}}]),t}(r.a.Component),je=(a(449),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){g.a.get(b.m+"/api/corsi").then((function(e){var t=e.data;a.setState({corsi:t})}))},a.state={corsi:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.corsi;if(!e){var t=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",{className:"col px-5 py-4 right-block",id:"mainBlock"},r.a.createElement(N.a,{indicator:t}))}return r.a.createElement("div",{className:"col px-5 py-4 right-block"},r.a.createElement("h3",{className:"mb-3 text-center"},"Lista dei corsi"),r.a.createElement("button",{className:"btn btn-success float-right mb-3",type:"button",onClick:function(){return We.push(b.n+"/corsi/new")}},r.a.createElement("i",{className:"fal fa-plus fa-fw"})," Aggiungi corso"),r.a.createElement("table",{className:"table table-bordered text-center"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"15%"}},"Logo"),r.a.createElement("th",null,"Nome"),r.a.createElement("th",null,"Luogo"),r.a.createElement("th",{style:{width:"10%"}},"Azioni")),e.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("img",{width:"55",src:e.logo,alt:"logo"})),r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},e.nome),r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},e.luogo),r.a.createElement("td",null,r.a.createElement(y.a,{title:"Modifica"},r.a.createElement("button",{type:"button",className:"btn btn-warning text-white circle-btn",onClick:function(){return We.push(b.n+"/corsi/edit/"+e.idCorso)}},r.a.createElement("i",{className:"fa fa-pen"})))))})))))}}]),t}(r.a.PureComponent)),ze=a(461),Ie=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).changeNome=function(e){var t=e.target.value;a.setState({nome:t})},a.changeLuogo=function(e){var t=e.target.value;a.setState({luogo:t})},a.aggiungiCorso=function(e){e.preventDefault();var t=a.state,n=t.nome,r=t.luogo,o=t.logo;""!==n.trim()&&""!==r.trim()?J(b.m+"/api/corsi","post",{corso:{nome:n.trim(),luogo:r.trim(),logo:o?o.trim():""}},(function(e){T.a.success("Corso creato con successo!"),We.push(b.n+"/corsi")})):k.a.error({title:"Errore!",content:"Riempire tutti i campi."})},a.convertImage=function(e){return Object(b.i)(e).then((function(e){a.setState({logo:String(e)})})),!1},a.state={nome:"",luogo:"",logo:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.nome,n=t.luogo,o=t.logo,c=r.a.createElement("div",null,r.a.createElement(v.a,{type:"plus",style:{fontSize:30,marginBottom:5}}),r.a.createElement("div",{className:"ant-upload-text"},"Carica immagine"));return r.a.createElement("div",{className:"col px-5 py-4 right-block"},r.a.createElement("h3",{className:"mb-2 text-center"},"Aggiungi un nuovo corso"),r.a.createElement("form",{className:"row",onSubmit:this.aggiungiCorso},r.a.createElement("div",{className:"form-group mr-3"},r.a.createElement("label",{className:"text-secondary d-block"},"Logo"),r.a.createElement(ze.a,{listType:"picture-card",showUploadList:!1,beforeUpload:function(t){return e.convertImage(t)},className:"logo-upload",accept:"image/*"},o?r.a.createElement("img",{src:o,alt:"logo",style:{width:"100%"}}):c)),r.a.createElement("div",{className:"col pr-0"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-secondary"},"Nome"),r.a.createElement("input",{name:"nomecorso",type:"text",className:"form-control",value:a,onChange:this.changeNome})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-secondary"},"Luogo"),r.a.createElement("input",{name:"luogo",type:"text",className:"form-control",value:n,onChange:this.changeLuogo}))),r.a.createElement("button",{type:"submit",className:"btn btn-success text-uppercase w-100"},"Aggiungi corso")))}}]),t}(r.a.PureComponent),Pe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){Object(b.k)()},a.componentWillUnmount=function(){Object(b.o)()},a.changeInputName=function(e){var t=e.target.value;a.setState({adminName:t})},a.changeInputPassword=function(e){var t=e.target.value;a.setState({adminPsw:t})},a.tryLogin=function(e){e.preventDefault();var t=a.state,n=t.adminName,r=t.adminPsw,o=(new A).encode(r);g.a.post(b.m+"/api/amministratori/loginamministratori",{username:n.trim(),password:o}).then((function(e){var t=e.data;!function(e){try{return"nome"in e&&"cognome"in e}catch(t){return!1}}(t)?k.a.error({title:"Errore!",content:"Username o Password errati!",centered:!0,maskClosable:!0}):(t.password=o,sessionStorage.setItem("superSession",JSON.stringify(t)),We.push(b.n),T.a.success("Login effettuato con successo!"))}))},a.state={adminName:"",adminPsw:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.adminName,a=e.adminPsw;return r.a.createElement("div",{className:"col-11 col-lg-5 mx-auto",id:"loginBlock"},r.a.createElement("div",{className:"w-100"},r.a.createElement("form",{className:"w-100 bg-white p-3 rounded shadow",onSubmit:this.tryLogin},r.a.createElement("h3",{className:"d-inline-block"},"Accesso amministratori"),r.a.createElement("img",{src:b.j,height:"40",className:"float-right logo",alt:"logo"}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-secondary"},"Utente di accesso"),r.a.createElement("input",{name:"username",type:"text",className:"form-control",value:t,onChange:this.changeInputName})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-secondary"},"Password di accesso"),r.a.createElement("input",{name:"password",type:"password",className:"form-control",value:a,onChange:this.changeInputPassword})),r.a.createElement("input",{type:"submit",value:"Accedi",className:"btn btn-lg btn-success w-100 text-uppercase"})),r.a.createElement(I,null)))}}]),t}(r.a.PureComponent),Me=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=Number(a.props.match.params.id);isNaN(e)&&We.push(b.n),g.a.get(b.m+"/api/corsi/"+e).then((function(e){var t=e.data;a.setState({corso:t,nome:t.nome,luogo:t.luogo,logo:t.logo})}))},a.changeNome=function(e){var t=e.target.value;a.setState({nome:t})},a.changeLuogo=function(e){var t=e.target.value;a.setState({luogo:t})},a.modificaCorso=function(e){e.preventDefault();var t=a.state,n=t.nome,r=t.luogo,o=t.corso,c=t.logo;""!==n.trim()&&""!==r.trim()?J(b.m+"/api/corsi/"+o.idCorso,"put",{corso:{idCorso:o.idCorso,nome:n.trim(),luogo:r.trim(),logo:c?c.trim():""}},(function(e){T.a.success("Corso modificato con successo!"),We.push(b.n+"/corsi")})):k.a.error({title:"Errore!",content:"Riempire tutti i campi."})},a.convertImage=function(e){return Object(b.i)(e).then((function(e){a.setState({logo:String(e)})})),!1},a.state={corso:null,nome:"",luogo:"",logo:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.nome,n=t.luogo,o=t.corso,c=t.logo,i=r.a.createElement("div",null,r.a.createElement(v.a,{type:"plus",style:{fontSize:30,marginBottom:5}}),r.a.createElement("div",{className:"ant-upload-text"},"Carica immagine"));if(!o){var l=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",{className:"col px-5 py-4 right-block",id:"mainBlock"},r.a.createElement(N.a,{indicator:l}))}return r.a.createElement("div",{className:"col px-5 py-4 right-block"},r.a.createElement("h3",{className:"mb-2 text-center"},"Modifica di un corso"),r.a.createElement("form",{className:"row",onSubmit:this.modificaCorso},r.a.createElement("div",{className:"form-group mr-3"},r.a.createElement("label",{className:"text-secondary d-block"},"Logo"),r.a.createElement(ze.a,{listType:"picture-card",showUploadList:!1,beforeUpload:function(t){return e.convertImage(t)},className:"logo-upload",accept:"image/*"},c?r.a.createElement("img",{src:c,alt:"logo",style:{width:"100%"}}):i)),r.a.createElement("div",{className:"col pr-0"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-secondary"},"Nome"),r.a.createElement("input",{name:"nomecorso",type:"text",className:"form-control",value:a,onChange:this.changeNome})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-secondary"},"Luogo"),r.a.createElement("input",{name:"luogo",type:"text",className:"form-control",value:n,onChange:this.changeLuogo}))),r.a.createElement("button",{type:"submit",className:"btn btn-success text-uppercase w-100"},"Modifica corso")))}}]),t}(r.a.PureComponent),De=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){g.a.get(b.m+"/api/coordinatori").then((function(e){var t=e.data;a.setState({tutor:t})}))},a.state={tutor:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.tutor;if(!e){var t=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",{className:"col px-5 py-4 right-block",id:"mainBlock"},r.a.createElement(N.a,{indicator:t}))}return r.a.createElement("div",{className:"col px-5 py-4 right-block"},r.a.createElement("h3",{className:"mb-3 text-center"},"Lista dei coordinatori"),r.a.createElement("button",{className:"btn btn-success float-right mb-3",type:"button",onClick:function(){return We.push(b.n+"/tutor/new")}},r.a.createElement("i",{className:"fal fa-plus fa-fw"})," Aggiungi coordinatore"),r.a.createElement("table",{className:"table table-bordered text-center"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nome"),r.a.createElement("th",null,"Cognome"),r.a.createElement("th",{style:{width:"30%"}},"Corso"),r.a.createElement("th",{style:{width:"10%"}},"Azioni")),e.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},e.nome),r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},e.cognome),r.a.createElement("td",{style:{maxWidth:0},className:"text-truncate"},e.corso),r.a.createElement("td",null,r.a.createElement(y.a,{title:"Modifica"},r.a.createElement("button",{type:"button",className:"btn btn-warning text-white circle-btn",onClick:function(){return We.push(b.n+"/tutor/edit/"+e.idCoordinatore)}},r.a.createElement("i",{className:"fa fa-pen"})))))})))))}}]),t}(r.a.PureComponent),Le=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){g.a.get(b.m+"/api/corsi").then((function(e){var t=e.data;a.setState({listaCorsi:t,corso:t.length?t[0].idCorso:0})}))},a.changeNome=function(e){var t=e.target.value;a.setState({nome:t})},a.changeCognome=function(e){var t=e.target.value;a.setState({cognome:t})},a.changeEmail=function(e){var t=e.target.value.trim();a.setState({email:t})},a.changeCorso=function(e){var t=parseInt(e.target.value);a.setState({corso:t})},a.isExistingCorso=function(e){return a.state.listaCorsi.find((function(t){return t.idCorso===e}))},a.aggiungiTutor=function(e){e.preventDefault();var t=a.state,n=t.nome,r=t.cognome,o=t.email,c=t.corso;""!==n.trim()&&""!==r.trim()&&""!==o?a.isExistingCorso(c)?J(b.m+"/api/coordinatori","post",{coordinatore:{nome:n.trim(),cognome:r.trim(),email:o,idCorso:c}},(function(e){T.a.success("Tutor creato con successo!"),We.push(b.n+"/tutor")})):k.a.error({title:"Errore!",content:"Corso non valido."}):k.a.error({title:"Errore!",content:"Riempire tutti i campi."})},a.state={nome:"",cognome:"",email:"",listaCorsi:null,corso:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.nome,a=e.cognome,n=e.email,o=e.listaCorsi;if(!o){var c=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",{className:"col px-5 py-4 right-block",id:"mainBlock"},r.a.createElement(N.a,{indicator:c}))}return o.length?r.a.createElement("div",{className:"col px-5 py-4 right-block"},r.a.createElement("h3",{className:"mb-2 text-center"},"Aggiungi un nuovo coordinatore"),r.a.createElement("form",{onSubmit:this.aggiungiTutor},r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Nome"),r.a.createElement("input",{name:"name",type:"text",className:"form-control",value:t,onChange:this.changeNome})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Cognome"),r.a.createElement("input",{name:"surname",type:"text",className:"form-control",value:a,onChange:this.changeCognome}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"E-mail"),r.a.createElement("input",{name:"email",type:"email",className:"form-control",value:n,onChange:this.changeEmail})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Corso gestito"),r.a.createElement("select",{name:"anno",onChange:this.changeCorso,className:"custom-select"},o.map((function(e){return r.a.createElement("option",{value:e.idCorso},e.nome)}))))),r.a.createElement("button",{type:"submit",className:"btn btn-success text-uppercase w-100"},"Aggiungi coordinatore"))):r.a.createElement("div",{className:"col px-5 py-4 right-block",id:"mainBlock"},"\xc8 necessario creare almeno un corso per poter inserire un nuovo coordinatore.")}}]),t}(r.a.PureComponent),Fe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=Number(a.props.match.params.id);isNaN(e)&&We.push(b.n),g.a.get(b.m+"/api/coordinatori/"+e).then((function(e){var t=e.data;a.setState({nome:t.nome,cognome:t.cognome,email:t.email,corso:t.idCorso})})),g.a.get(b.m+"/api/corsi").then((function(e){var t=e.data;a.setState({listaCorsi:t})}))},a.changeNome=function(e){var t=e.target.value;a.setState({nome:t})},a.changeCognome=function(e){var t=e.target.value;a.setState({cognome:t})},a.changeEmail=function(e){var t=e.target.value.trim();a.setState({email:t})},a.changeCorso=function(e){var t=parseInt(e.target.value);a.setState({corso:t})},a.isExistingCorso=function(e){return a.state.listaCorsi.find((function(t){return t.idCorso===e}))},a.modificaTutor=function(e){e.preventDefault();var t=a.state,n=t.nome,r=t.cognome,o=t.email,c=t.corso,i=a.props.match.params.id;""!==n.trim()&&""!==r.trim()&&""!==o?a.isExistingCorso(c)?J(b.m+"/api/coordinatori/"+i,"put",{coordinatore:{idCoordinatore:i,nome:n.trim(),cognome:r.trim(),email:o,idCorso:c}},(function(e){T.a.success("Tutor modificato con successo!"),We.push(b.n+"/tutor")})):k.a.error({title:"Errore!",content:"Corso non valido."}):k.a.error({title:"Errore!",content:"Riempire tutti i campi."})},a.state={nome:"",cognome:"",email:"",listaCorsi:null,corso:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.nome,a=e.cognome,n=e.email,o=e.listaCorsi,c=e.corso;if(!o){var i=r.a.createElement(v.a,{type:"loading",style:{fontSize:50},spin:!0});return r.a.createElement("div",{className:"col px-5 py-4 right-block",id:"mainBlock"},r.a.createElement(N.a,{indicator:i}))}return r.a.createElement("div",{className:"col px-5 py-4 right-block"},r.a.createElement("h3",{className:"mb-2 text-center"},"Modifica di un coordinatore"),r.a.createElement("form",{onSubmit:this.modificaTutor},r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Nome"),r.a.createElement("input",{name:"name",type:"text",className:"form-control",value:t,onChange:this.changeNome})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Cognome"),r.a.createElement("input",{name:"surname",type:"text",className:"form-control",value:a,onChange:this.changeCognome}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"E-mail"),r.a.createElement("input",{name:"email",type:"email",className:"form-control",value:n,onChange:this.changeEmail})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"text-secondary"},"Corso gestito"),r.a.createElement("select",{name:"anno",onChange:this.changeCorso,className:"custom-select"},o.map((function(e){var t=c===e.idCorso;return r.a.createElement("option",{value:e.idCorso,selected:t},e.nome)}))))),r.a.createElement("button",{type:"submit",className:"btn btn-success text-uppercase w-100"},"Modifica coordinatore")))}}]),t}(r.a.PureComponent),Te=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).componentWillUnmount=function(){sessionStorage.removeItem("superSession")},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return sessionStorage.getItem("superSession")?r.a.createElement("div",{className:"container-fluid"},r.a.createElement(f.b,{history:We},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3 bg-blue p-0 menu"},r.a.createElement(D,{idCorso:0}),r.a.createElement(p.a,{className:"router-link",activeClassName:"active",onClick:function(){return We.push(b.n+"/studenti")},to:b.n+"/tutor"},r.a.createElement("span",null,r.a.createElement("i",{className:"fal fa-users-crown fa-fw mr-1"})," Coordinatori")),r.a.createElement(p.a,{className:"router-link",activeClassName:"active",onClick:function(){return We.push(b.n+"/corsi")},to:b.n+"/corsi"},r.a.createElement("span",null,r.a.createElement("i",{className:"fal fa-list-alt fa-fw mr-1"})," Corsi")),r.a.createElement(p.a,{className:"router-link",activeClassName:"active",onClick:function(){sessionStorage.removeItem("superSession"),We.push(b.n)},exact:!0,to:b.n+"/login"},r.a.createElement("span",null,r.a.createElement("i",{className:"fal fa-power-off fa-fw mr-1"})," Esci")),r.a.createElement(I,{inMenu:!0})),r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:b.n,render:function(){return We.push(b.n+"/tutor"),null}}),r.a.createElement(f.a,{exact:!0,path:b.n+"/tutor",render:function(){return r.a.createElement(De,null)}}),r.a.createElement(f.a,{exact:!0,path:b.n+"/tutor/new",render:function(){return r.a.createElement(Le,null)}}),r.a.createElement(f.a,{exact:!0,path:b.n+"/tutor/edit/:id",render:function(e){return r.a.createElement(Fe,e)}}),r.a.createElement(f.a,{exact:!0,path:b.n+"/corsi",render:function(){return r.a.createElement(je,null)}}),r.a.createElement(f.a,{exact:!0,path:b.n+"/corsi/new",render:function(){return r.a.createElement(Ie,null)}}),r.a.createElement(f.a,{exact:!0,path:b.n+"/corsi/edit/:id",render:function(e){return r.a.createElement(Me,e)}}),r.a.createElement(f.a,{render:function(){return r.a.createElement(Ce,{goTo:b.n})}}))))):r.a.createElement(Pe,null)}}]),t}(r.a.Component),Ae=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){Object(b.k)()},a.componentWillUnmount=function(){Object(b.o)()},a.changeCodice=function(e){var t=e.target.value;a.setState({codice:t.trim()})},a.inviaCodice=function(e){e.preventDefault();var t=a.state.codice;""!==t?g.a.post(b.m+"/api/firmaremota/accessoremoto",t,{headers:{"Content-Type":"application/json"}}).then((function(e){var t=e.data;!function(e){try{return e.forEach((function(e){if(!function(e){try{return"nome"in e&&"cognome"in e&&"idStudente"in e}catch(t){return!1}}(e))return!1})),!0}catch(t){return!1}}(t)?k.a.error({title:"Errore!",content:"Il codice non corrisponde a nessun corso/classe, oppure \xe8 scaduto (chiedi al tuo coordinatore di cambiarlo).",centered:!0,maskClosable:!0}):(sessionStorage.removeItem("adminSession"),sessionStorage.removeItem("superSession"),sessionStorage.setItem("confermaCasa",JSON.stringify(t)),We.push("/firmacasa"))})).catch((function(e){k.a.error({title:"Errore!",content:"Il codice non \xe8 valido.",centered:!0,maskClosable:!0})})):k.a.error({title:"Errore!",content:"Riempire il campo."})},a.state={codice:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.codice;return r.a.createElement("div",{className:"col-11 col-lg-5 mx-auto",id:"loginBlock"},r.a.createElement("div",{className:"w-100"},r.a.createElement("form",{className:"w-100 bg-white p-3 rounded shadow",onSubmit:this.inviaCodice},r.a.createElement("h3",{className:"d-inline-block"},"Accesso firma da casa"),r.a.createElement(D,{forLogin:!0}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-secondary"},"Codice segreto"),r.a.createElement("input",{name:"username",type:"text",className:"form-control",value:e,onChange:this.changeCodice})),r.a.createElement("p",{className:"text-muted"},"Chiedi al tuo coordinatore il codice segreto per accedere alla firma da casa."),r.a.createElement("input",{type:"submit",value:"Prosegui",className:"btn btn-lg btn-success w-100 text-uppercase"})),r.a.createElement(I,null)))}}]),t}(r.a.PureComponent),qe=a(464),Re=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){Object(b.k)(),a.caricaLezione()},a.componentWillUnmount=function(){Object(b.o)()},a.inviaFirma=function(e){e.preventDefault();var t=a.state.selectedStudente;t?g.a.post(b.m+"/api/studenti/richiestacodice",t.idStudente,{headers:{"Content-Type":"application/json"}}).then((function(e){J(b.m+"/api/firmaremota/firmaremotastudente","post",{idStudente:t.idStudente},(function(e){var t=e.data;k.a.info({title:t.title,content:r.a.createElement("div",{style:{marginLeft:38}},t.message),icon:r.a.createElement("i",{className:"float-left mr-3 far "+t.icon,style:{color:t.iconColor,fontSize:22}})})}),null,"Inserisci il codice che ti abbiamo inviato per e-mail")})):k.a.error({title:"Errore!",content:"Selezionare uno studente.",maskClosable:!0})},a.firmaDocente=function(){var e=a.state,t=e.lezione,n=e.studenti;g.a.post(b.m+"/api/docenti/richiestacodice",t.idDocente,{headers:{"Content-Type":"application/json"}}).then((function(e){J(b.m+"/api/firmaremota/firmaremotadocente","post",{idDocente:t.idDocente,idCorso:n[0].idCorso,anno:n[0].annoFrequentazione},(function(e){var t=e.data;k.a.info({title:t.title,content:r.a.createElement("div",{style:{marginLeft:38}},t.message),icon:r.a.createElement("i",{className:"float-left mr-3 far "+t.icon,style:{color:t.iconColor,fontSize:22}})})}),null,"Inserisci il codice che ti abbiamo inviato per e-mail")}))},a.scegliStudente=function(e){a.setState({selectedStudente:e})},a.caricaLezione=function(){var e=a.state.studenti[0];g.a.get(b.m+"/api/lezioni/"+e.idCorso+"/"+e.annoFrequentazione).then((function(e){if("string"===typeof e.data)a.setState({noLezione:!0});else{var t=e.data;a.setState({lezione:t})}}))};var n=JSON.parse(sessionStorage.getItem("confermaCasa"));return a.state={studenti:n.filter((function(e){return!e.ritirato})),selectedStudente:null,lezione:null,noLezione:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.studenti,n=t.selectedStudente,o=t.lezione,c=t.noLezione;return a.length?r.a.createElement("div",{className:"col-11 col-lg-5 mx-auto",id:"loginBlock"},r.a.createElement("div",{className:"w-100"},r.a.createElement("div",{className:"bg-white p-3 rounded shadow mx-auto mb-3 col-12 col-md-6 pos-lg-fixed"},o||!o&&c?r.a.createElement("div",null,c?r.a.createElement("h5",{className:"mb-0 text-truncate"},"Non c'\xe8 lezione."):r.a.createElement(y.a,{title:o.titolo},r.a.createElement("h5",{className:"mb-0 text-truncate"},o.titolo)),!c&&r.a.createElement("small",{className:"text-muted"},Object(b.e)(o.oraInizio)," - ",Object(b.e)(o.oraFine)),r.a.createElement("button",{type:"button",className:"btn btn-danger w-100 text-uppercase mt-2",disabled:null===o&&c,onClick:this.firmaDocente},null===o&&!c&&r.a.createElement(v.a,{type:"loading",className:"mr-2 loadable-btn",spin:!0}),"Firma docente")):r.a.createElement(v.a,{type:"loading",spin:!0,style:{fontSize:23}})),r.a.createElement("form",{className:"w-100 bg-white p-3 rounded shadow",onSubmit:this.inviaFirma},r.a.createElement("h3",{className:"d-inline-block"},"Firma studente"),r.a.createElement(D,{idCorso:a[0].idCorso,forLogin:!0}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-secondary"},"Scegli lo studente"),r.a.createElement("div",{className:"multiselect form-control p-0"},a.map((function(t){var a=n===t,o=a?"checked":"";return r.a.createElement("label",{className:"option "+o},r.a.createElement(qe.a,{className:"mr-2",onChange:function(){return e.scegliStudente(t)},checked:a})," ",t.nome," ",t.cognome)})))),r.a.createElement("input",{type:"submit",disabled:null===o&&c,value:"Firma",className:"btn btn-lg btn-success w-100 text-uppercase"})),r.a.createElement(I,null))):r.a.createElement("div",{className:"col-11 col-lg-4 mx-auto",id:"loginBlock"},r.a.createElement("div",{className:"w-100 bg-white p-3 rounded shadow"},r.a.createElement("p",{className:"text-muted m-0 text-center"},r.a.createElement("i",{className:"fa fa-ban fa-fw fa-lg text-danger"})," Non \xe8 stato trovato nessuno studente.")))}}]),t}(r.a.PureComponent),Be=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).componentWillUnmount=function(){sessionStorage.removeItem("confermaCasa")},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return sessionStorage.getItem("confermaCasa")?r.a.createElement(Re,null):r.a.createElement(Ae,null)}}]),t}(r.a.Component),Ue=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){Object(b.k)()},a.componentWillUnmount=function(){Object(b.o)()},a.scrollToIndex=function(e){var t=document.getElementById(e);t.scrollIntoView(),t.classList.add("highlight"),setTimeout((function(){t.classList.remove("highlight")}),1e3)},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-11 col-lg-8 mx-auto",id:"loginBlock"},r.a.createElement("div",{className:"w-100 bg-white p-4 rounded shadow text-justify my-4"},r.a.createElement("span",{className:"link-primary float-right",onClick:function(){return We.push("/")}},r.a.createElement("i",{className:"far fa-arrow-left fa-fw fa-lg"})," Torna al registro"),r.a.createElement("div",{className:"clearfix"}),r.a.createElement("h4",{className:"mb-1"},"Come funziona il sito?"),r.a.createElement("p",null,"Tramite questa semplice pagina andremo ad elencare le varie pagine del sito, nonch\xe9 la modalit\xe0 di accesso ad esse, suddividendo per i ruoli principali."),r.a.createElement("div",{className:"ml-4"},r.a.createElement("h6",null,"Indice:"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("span",{className:"link-primary u-hover",onClick:function(){return e.scrollToIndex("stuDoc")}},"Studenti e docenti")),r.a.createElement("li",null,r.a.createElement("span",{className:"link-primary u-hover",onClick:function(){return e.scrollToIndex("tutor")}},"Coordinatori")),r.a.createElement("li",null,r.a.createElement("span",{className:"link-primary u-hover",onClick:function(){return e.scrollToIndex("admin")}},"Amministratori")))),r.a.createElement("div",{className:"pl-4 p-2 rounded overflow-hidden",id:"stuDoc"},r.a.createElement("h6",null,"Studenti e Docenti"),r.a.createElement("p",null,"Gli studenti e i docenti avranno la possibilit\xe0 di firmare la loro entrata/uscita da una lezione tramite ",r.a.createElement("a",{href:b.m+"/#/",target:"_blank",rel:"noopener noreferrer"},"questo")," URL."),r.a.createElement("p",null,"Una volta scelti il corso e la classe, l'accesso alla firma \xe8 possibile ",r.a.createElement("strong",null,"solamente")," tramite un codice segreto, fornito dal coordinatore del corso o, eventualmente, dal docente incaricato della lezione."),r.a.createElement("p",{className:"mb-0"},"Tramite ",r.a.createElement("a",{href:b.m+"/#/firmacasa",target:"_blank",rel:"noopener noreferrer"},"questo")," URL \xe8 possibile firmare da casa qualora sia necessario farlo. L'accesso alla firma \xe8 potretto da un codice segreto che il coordinatore del corso pu\xf2 generare su richiesta. Gli studenti dovranno solamente scegliere il loro nome nella lista, verr\xe0 quindi inviata un'e-mail con un codice segreto, da inserire per confermare la propria identit\xe0. Il procedimento rimane identico anche per i docenti, con la differenza che quest'ultimi potranno firmare tramite un semplice bottone.")),r.a.createElement("div",{className:"pl-4 p-2 rounded overflow-hidden",id:"tutor"},r.a.createElement("h6",null,"Coordinatori"),r.a.createElement("p",{className:"mb-2"},"I coordinatori avranno la possibilit\xe0 di gestire il corso a cui sono stati assegnati. Tramite ",r.a.createElement("a",{href:b.m+"/#"+b.b,target:"_blank",rel:"noopener noreferrer"},"questo")," URL si pu\xf2 accedere al gestionale, inserendo Username e Password ricevuti via e-mail dall'amministratore."),r.a.createElement("p",{className:"mb-2"},"Grazie al gestionale, \xe8 possibile gestire le seguenti attivit\xe0:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Homepage:"),r.a.createElement("ul",null,r.a.createElement("li",{className:"bg-transblue"},"Visualizzare il codice d'accesso alla firma del corso."),r.a.createElement("li",null,"Tenere traccia delle lezioni attualmente in corso nelle classi, con la lista degli studenti presenti.")),r.a.createElement("li",null,"Studenti:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Creazione e modifica di studenti, specificando i dati anagrafici e la classe di appartenenza."),r.a.createElement("li",null,"Possibilit\xe0 di importare una classe tramite CSV, per velocizzare il processo."),r.a.createElement("li",null,"Possibilit\xe0 di spostare gli studenti dal primo al secondo anno."),r.a.createElement("li",null,"Visualizzazione del dettaglio di uno studente, con la lista delle lezioni frequentate da quest'ultimo."),r.a.createElement("li",null,"Possibilit\xe0 di modificare l'entrata o l'uscita di uno studente (nel caso in cui sia stato commesso un errore) tramite appositi bottoni nella lista delle lezioni frequentate."),r.a.createElement("li",null,"Possibilit\xe0 di ritirare uno studente tramite apposito bottone nella lista degli studenti."),r.a.createElement("li",null,"Possibilit\xe0 di archiviare uno studente (nel caso in cui quest'ultimo sia stato promosso) tramite apposito bottone nella lista degli studenti.")),r.a.createElement("li",null,"Docenti:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Creazione e modifica di docenti, specificando i dati anagrafici, le materie insegnate e i corsi di appartenenza."),r.a.createElement("li",null,"Visualizzazione del dettaglio di un docente, con la lista delle lezioni tenute da quest'ultimo."),r.a.createElement("li",null,"Possibilit\xe0 di modificare l'entrata o l'uscita di un docente (nel caso in cui sia stato commesso un errore) tramite appositi bottoni nella lista delle lezioni tenute."),r.a.createElement("li",null,"Possibilit\xe0 di ritirare un docente dal corso tramite apposito bottone nella lista dei docenti, con possibilit\xe0 di annullare l'azione di ritiro in caso di reintegro nel corso.")),r.a.createElement("li",null,"Materie:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Creazione e modifica di materie del corso, assegnabili poi ai docenti.")),r.a.createElement("li",null,"Calendario:"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("p",null,"Possibilit\xe0 di configurare il calendario delle classi del corso, caricando cos\xec le lezioni nel database del registro."),r.a.createElement("p",{className:"bg-transblue"},"Gli eventi del calendario dovranno ",r.a.createElement("strong",null,"obbligatoriamente")," essere scritti nel seguente modo:",r.a.createElement("div",{className:"text-center"},r.a.createElement("strong",null,"LUOGO: DOCENTE - MATERIA")," (esempio: LAB 1 PASCAL: Matteo Mascellani - PHP).")),r.a.createElement("p",{className:"mb-0 bg-transblue"},r.a.createElement("strong",null,"ATTENZIONE"),": prima di configurare il calendario \xe8 necessario creare tutte le materie e i docenti citati nel calendario stesso. Ovviamente, \xe8 possibile salvare nuovamente il calendario per aggiornare le lezioni nel caso in cui si aggiungano docenti o materie durante l'anno."))),r.a.createElement("li",null,"Firma da remoto:"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("p",null,"Possibilit\xe0 di abilitare la firma da casa qualora sia necessario."),r.a.createElement("p",null,"Tramite ",r.a.createElement("a",{href:b.m+"/#"+b.b+"/codicefirma",target:"_blank",rel:"noopener noreferrer"},"questo")," URL \xe8 possibile creare un codice segreto per identificare la classe scelta. Il codice andr\xe0 condiviso con gli studenti, e ",r.a.createElement("u",null,"varr\xe0 solamente per il giorno in cui \xe8 stato generato"),"."),r.a.createElement("p",null,"Da ",r.a.createElement("a",{href:b.m+"/#/firmacasa",target:"_blank",rel:"noopener noreferrer"},"questo")," URL gli studenti saranno in grado di inserire il codice creato e, scegliendo il loro nome e cognome, potranno firmare per la lezione programmata."),r.a.createElement("p",{className:"mb-0"},"Il procedimento rimane identico anche per i docenti, con la differenza che quest'ultimi potranno firmare tramite un semplice bottone."))))),r.a.createElement("div",{className:"pl-4 p-2 rounded overflow-hidden",id:"admin"},r.a.createElement("h6",null,"Amministratori"),r.a.createElement("p",{className:"mb-2"},"Gli amministratori avranno la possibilit\xe0 di gestire FITSTIC. Tramite ",r.a.createElement("a",{href:b.m+"/#"+b.n,target:"_blank",rel:"noopener noreferrer"},"questo")," URL si pu\xf2 accedere al gestionale, inserendo Username e Password dell'amministratore."),r.a.createElement("p",{className:"mb-2"},"Grazie al gestionale, \xe8 possibile gestire le seguenti attivit\xe0:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Corsi:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Creazione e modifica di corsi (es: Alan Turing, McLuhan, Hopper, ecc.), con possibilit\xe0 di inserire nome, luogo e logo del corso."),r.a.createElement("li",null,"Creazione e modifica di coordinatori, che possono essere assegnati ad un determinato corso per gestirlo di conseguenza.",r.a.createElement("div",{className:"bg-transblue"},"Al momento della creazione il nuovo coordinatore ricever\xe0 un'e-mail con le credenziali per accedere al gestionale, e il codice per confermare l'accesso all'interfaccia della firma (visualizzabile anche nel gestionale dei coordinatori).")))))))}}]),t}(r.a.Component);a.d(t,"routerHistory",(function(){return We})),ue.a.locale("it");var We=Object(i.b)();c.a.render(r.a.createElement(f.b,{history:We},r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",render:function(){return We.push("/firme/"),null}}),r.a.createElement(f.a,{path:"/firme/",render:function(){return r.a.createElement(F,null)}}),r.a.createElement(f.a,{path:b.b,render:function(){return r.a.createElement(we,null)}}),r.a.createElement(f.a,{path:"/userprofile",render:function(){return r.a.createElement(ke,null)}}),r.a.createElement(f.a,{path:b.n,render:function(){return r.a.createElement(Te,null)}}),r.a.createElement(f.a,{path:"/firmacasa",render:function(){return r.a.createElement(Be,null)}}),r.a.createElement(f.a,{exact:!0,path:"/documentazione",render:function(){return r.a.createElement(Ue,null)}}),r.a.createElement(f.a,{render:function(){return r.a.createElement(Ce,{goTo:"/"})}}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[234,1,2]]]);
//# sourceMappingURL=main.ac3dc590.chunk.js.map